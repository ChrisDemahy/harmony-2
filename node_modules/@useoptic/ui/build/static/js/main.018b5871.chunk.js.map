{"version":3,"sources":["../../cli-config/build/helpers/initial-task.js","assets/agsquare_dark_@2X.png","components/diff/v2/CaptureManagerPage.js","components/diff/v2/AddUrlModal.js","components/docs/DocContribution.js","components/loaders/ApiLoader.js","components/diff/v2/learn-api/LearnAPIPageContext.js","components/diff/v2/DiffHooks.js","components/diff/v2/DiffCursor.js","components/diff/v2/DiffReviewPage.js","components/diff/v2/DiffPageNew.js","components/diff/v2/shape_viewers/ReusableDiffRow.js","components/docs/ContentTabs.js","RouterPaths.js","components/diff/v2/LoadingNextDiff.js","components/diff/v2/DiffViewSimulation.js","components/diff/v2/DiffReviewExpanded.js","contexts/InitialRfcCommandsContext.js","theme.js","components/diff/v2/DiffNewRegions.js","components/diff/v2/CustomNavTab.js","components/docs/DocConstants.js","components/diff/v2/shape_viewers/ShapeOnlyShapeRows.js","components/support/NeedHelpButton.js","components/support/EmptyState.js","components/diff/v2/shape_viewers/styles.js","components/diff/SimulatedCommandContext.js","components/diff/v2/shape_viewers/SideBySideShapeRows.js","components/diff/v2/DiffHunkViewer.js","components/diff/v2/DiffCopy.js","components/diff/v2/shape_viewers/InteractionBodyViewer.js","../../cli-client/build/index.js","../../analytics/lib/events/errors.js","engine/routines.js","components/diff/v2/DiffHelperCard.js","components/diff/v2/Stats.js","components/diff/UrlToPath.js","components/utilities/useHoverHook.js","components/diff/PathMatcher.js","../../analytics/lib/events/diffs.js","../../analytics/lib/interfaces/RegisterEvent.js","../../analytics/lib/interfaces/Events.js","components/docs/DocSubGroup.js","Analytics.js","components/diff/v2/Finalize.js","../../analytics/lib/events/onboarding.js","utilities/RequestUtilities.js","utilities/EndpointUtilities.ts","contexts/RfcContext.js","ContributionKeys.js","components/diff/v2/shape_viewers/ShapeRenderContext.js","contexts/BaseUrlContext.js","components/navigation/Loading.js","App.js","../../analytics/lib/eventbus.js","contexts/CommandContext.js","utilities/dump-spec-service-state.js","contexts/SpecServiceContext.js","utilities/debug-dump.js","serviceWorker.js","components/docs/DocParameter.js","components/docs/DocsPage.js","components/api-page/RenderTask.js","components/api-page/ApiPage.js","components/setup-page/yaml/YamlHelper.ts","components/setup-page/fetch-docs/IntegrationDocs.js","components/setup-page/setup-and-check-machine.ts","components/setup-page/yaml/UpdateOpticYml.js","components/setup-page/setup-api/CodeBlock.js","components/setup-page/fetch-docs/BuildMD.js","components/setup-page/HelperCard.js","components/setup-page/setup-api/FrameworkSelect.js","components/setup-page/FrameworkHelper.js","components/setup-page/setup-api/useUserTracking.js","components/setup-page/setup-api/useCaptureSampleCounter.js","components/setup-page/CheckPassed.js","components/setup-page/setup-api/SetupType.js","components/setup-page/SetupPage.js","components/setup-page/useDebounceHook.js","routes.js","entrypoints/testing-sessions.js","services/diff/LocalCliDiffService.ts","entrypoints/localcli.js","components/support/WelcomePage.js","entrypoints/private-sessions.js","entrypoints/demo-sessions.js","contexts/SpecViewerContext.js","entrypoints/index.js","components/diff/v2/learn-api/LearnAPIMenu.js","components/utilities/BatchCommandHandler.js","components/diff/v2/learn-api/Learn.js","components/diff/v2/learn-api/useBatchLearn.js","components/diff/v2/learn-api/InProgressFullScreen.js","components/diff/v2/learn-api/LearnAPIPage.js","index.js","contexts/CaptureContext.js","../../cli-client/build/client.js","../../client-utilities/build/json-http-client.js","../../cli-client/build/spec-service-client.js","components/diff/v2/shape_viewers/Indent.js","contexts/GenericContextFactory.js","components/tooltips/LightTooltip.js","components/diff/v2/PathAndMethod.js","components/diff/v2/MoreRecentCapture.js","components/shared/JsonTextarea.js","components/navigation/Navbar.js","components/Page.js","contexts/EndpointContext.js","components/diff/v2/DiffContext.js","components/utilities/PathUtilities.js","contexts/MockDataContext.js","../../client-utilities/build/index.js","components/support/Links.js","components/shared/Show.js"],"names":["__importDefault","this","mod","__esModule","Object","defineProperty","exports","value","defaultCommandInit","buildTask","jsesc_1","escapeIt","escaped","default","quotes","concat","apiName","flags","taskName","commandConfig","command","inboundUrl","trimRight","targetUrl","buildInitialTask","trimLeft","module","GenericContextFactory","AllCapturesContext","Context","withContext","AllCapturesStore","props","baseUrl","useBaseUrl","useState","captures","setCaptures","dismissed","setDismissed","specService","useSpecService","history","useHistory","update","a","listCaptures","listCapturesResponse","task","useEffect","window","addEventListener","removeEventListener","global","opticDump","dumpSpecServiceState","dumpEvents","listEvents","context","dismissCapture","captureId","switchToCapture","push","Provider","children","CaptureManagerPage","routerPaths","useRouterPaths","title","Navbar","mini","Body","padded","path","diffsRoot","component","CaptureManager","location","useCaptureManagerPageStyles","useContext","exact","captureRoot","CaptureDiffWrapper","captureRequestDiffsRoot","RequestDiffWrapper","length","to","empty","subtabs","ENDPOINT_DIFF","UNDOCUMENTED_URL","CaptureChooserComponent","classes","captureContext","useCaptureContext","endpointDiffs","unrecognizedUrls","completed","skipped","processed","realEndpointDiffCount","filter","i","count","isDocumentedEndpoint","totalEndpoints","urlsSplit","DiffResultHelper","splitUnmatchedUrls","JsonHelper","jsArrayToSeq","query","qs","parse","search","ignoreQueryPrefix","defaultTab","tab","setTab","trackUserEvent","UserChangedCaptureOverviewTab","withProps","currentTab","diffCount","undocumentedUrlCount","total","debugOptic","debugDump","className","container","navigationContainer","navRoot","header","color","fontSize","style","marginRight","variant","formControl","fullWidth","size","placeholder","onChange","event","target","reload","map","capture","index","key","primary","time","ago","lastUpdate","hasDiff","paddingTop","marginTop","marginBottom","orientation","tabs","_","label","flex","showSkipped","pageContainer","center","EndpointDiffs","content","AddOpticLink","trim","match","params","services","RfcContext","useServices","Consumer","ignoredDiffs","resetIgnored","realCount","anyHaveDiffs","some","stats","fontWeight","padding","pathId","method","classNames","paper","disabled","endpointDescriptor","button","row","Link","onClick","listItemInner","endpointPurpose","DocDarkGrey","httpMethod","fullPath","when","chips","backgroundColor","ChangedYellowBackground","AddedGreenBackground","show","makeStyles","theme","display","overflow","width","flexGrow","flexShrink","justifyContent","position","height","overflowY","overflowX","flexDirection","borderRight","palette","grey","background","marginLeft","spacing","maxWidth","statsSection","paddingBottom","progressStats","paddingLeft","progressWrapper","alignItems","margin","paddingRight","selectEmpty","subStat","pointerEvents","opacity","diffContainer","diffWrapper","useStyles","urls","maxHeight","OpticIds","NewUrlModal","withRfcContext","newUrl","urlOverride","onClose","allUnmatchedPaths","onAdd","cachedQueryResults","handleCommands","CaptureContext","knownPathId","getOrUndefined","React","Boolean","naming","setNaming","pathExpression","setPathExpression","AddUrlModalNaming","AddUrlModalIdentifyingPathComponents","handleClose","handleCreate","purpose","UserFinishedAddingNewUrl","lastParentPathId","commands","pathsById","pathComponents","pathStringToPathComponents","resolvePath","toAdd","lastMatch","forEach","addition","newPathId","isParameter","RequestsCommands","AddPathParameter","AddPathComponent","cleanupPathComponentName","name","RfcCommands","AddContribution","pathMethodKeyBuilder","PURPOSE","regex","pathString","pathComponentsToString","pathToRegexp","start","end","completePathMatcherRegex","matches","exec","matchingUrls","Array","from","url","NamingDialog","setPurpose","open","transitionDuration","toString","e","autoFocus","onKeyPress","type","endIcon","UserBeganAddingNewUrl","aria-labelledby","initialPathString","innerStyle","stripped","replace","join","trimTrailingEmptyPath","components","slice","split","charAt","root","rest","MarkdownRender","source","noHeadings","renderers","heading","level","paragraph","whiteSpace","list","listItem","FieldDescriptionMarkdownRender","SymbolColor","styles","cursor","_MarkdownContribution","state","inputValue","editing","handleChange","setState","setEditing","b","process","REACT_APP_SPEC_ENABLE_EDITING","multiline","onBlur","textTransform","Component","MarkdownContribution","withStyles","_HeadingContribution","SubHeadingStyles","HeadingContribution","ApiSpecServiceLoader","diffServiceFactory","captureServiceFactory","debugData","useMockData","service","setService","events","setEvents","available","loading","serviceFactory","createExampleSpecServiceFactory","data","eventEmitter","on","specServiceEvents","initialEventsString","rfcId","instance","LocalCliSpecServiceLoader","JSON","stringify","examples","EventEmitter","config","ignoreRequests","configRaw","loadConfig","Promise","resolve","saveConfig","addIgnoreRule","rule","listCapturedSamples","session","getCaptureStatus","status","Date","toISOString","saveEvents","eventStore","serializedEvents","serializeEvents","emit","listExamples","requestId","saveExample","interaction","requestExamples","getEnabledFeatures","TESTING_DASHBOARD","LearnAPIPageContext","createContext","LearnAPIStore","allUrls","toDocument","setToDocument","ignoredIds","setIgnoredIds","basepath","setBasepath","learningInProgress","setLearningInProgress","checkedIds","id","pathExpressions","changePathExpressions","highlightAlsoMatching","setHighlight","currentPathExpressions","shouldHideIds","find","td","matchesAToDocument","toDocumentWithRegex","shouldHideFromIgnore","startsWith","includes","toggleRow","forceRemove","current","startLearning","updatePathExpression","expression","matchingUrlsId","setIgnore","pattern","reset","addRow","useDiffDescription","diff","diffService","description","setDescription","loadDescription","getDescription","useInteractionWithPointer","pointer","captureService","setInteraction","mounted","loadInteraction","interactionScala","fromInteraction","getInteraction","useSuggestionsForDiff","currentInteraction","suggestions","setSuggestions","console","log","listSuggestions","result","RequirementForDiffsToHaveASuggestionFailed","with","getSuggestions","useInitialBodyPreview","inferPolymorphism","endpointId","preview","setPreview","loadingInferPoly","setLoadingInferPoly","naiveCache","cacheKey","loadInitialPreview","getInitialPreview","diffCursor","top","zIndex","borderLeft","UpdatedBlue","diffTitle","diffCursorActions","diffItem","DiffCursor","showAllDiffs","selectedDiff","setSelectedDiff","toggle","shouldComponentUpdate","nextProps","nextState","nextContext","CompareEquality","betweenBodyDiffs","diffs","componentDidUpdate","prevProps","prevState","snapshot","containsDiff","render","DiffReviewExpanded","Cursor","Card","elevation","Collapse","in","timeout","Typography","List","IconButton","DiffItem","ListItem","DiffCopy","copy","titleCopy","DiffReviewPage","rfcService","DiffContext","acceptedSuggestions","SuggestionsContext","rfcState","currentState","EndpointsContext","diffsForThisEndpoint","setCurrentTab","showFinalize","setShowFinalize","ignoreDiff","IgnoreDiffContext","regions","groupEndpointDiffsByRegion","firstRequestIdWithDiff","firstResponseIdWithDiff","newRegionsCount","requestBodyTabs","mapScala","requestDiffs","CustomNavTab","contentType","responseBodyTabs","responseDiffs","sectionHeader","statusCode","c","ShowCommitCard","PathAndMethod","suggestionsBox","suggestionsCount","Button","buttonSmall","tabScroll","Tabs","newRegions","seqToJsArray","bodyDiffsForId","Finalize","canOnlyReset","close","flexShirnk","indent","fab","bottom","right","fabLabel","textAlign","minWidth","opticEngine","com","useoptic","jsonHelper","SuggestionsStore","setAcceptedSuggestions","resetAccepted","IgnoreDiffStore","setIgnoredDiffs","flatten","acc","array","InnerDiffWrapper","isLoading","updatedAdditionalCommands","diffId","diffsForPathAndMethod","UserResetDiff","acceptSuggestion","updatedSuggestions","simulatedCommands","x","reduce","UserAcceptedSuggestion","suggestion","action","_CaptureSessionInlineContext","suggestionsContext","SimulatedCommandContext","getCopy","shouldSimulate","CaptureSessionInlineContext","compose","withSpecServiceContext","specStore","SpecServiceContext","Invariant","inContextOfDiff","notFound","ReusableDiffRow","mainContentMax","notifications","classnames","mainContent","spacer","RequestTabsContext","withRequestTabsContext","RequestTabsContextStore","requestContentType","responseStatusCode","responseContentType","setRequestContentType","setResponseStatusCode","setResponseContentType","ContentStyledTabs","minHeight","indicator","secondary","TabIndicatorProps","ContentStyledTab","typography","pxToRem","Tab","disableRipple","ContentTabs","inRequest","options","contentTypes","renderDescription","renderResponse","renderRequest","contentTypeTab","setContentTypeTab","contentTypeOptions","contribution","newValue","testingDashboard","base","testingCapture","testingEndpointDetails","docsRoot","dashboardRoot","setup","requestDocsRoot","entries","routesByName","entry","routeName","route","DiffLoading","sideBySide","textParent","text","DiffLoadingOverview","rootOverview","DiffReviewLoading","rootUnder","withChildren","visibility","_DiffViewSimulation","betweenBodyDiff","undefined","betweenSuggestions","selectedInterpretation","betweenInteractions","renderDiff","outerRfcState","body","renderKey","uuid","currentRfcState","previewDiff","timeEnd","DiffHunkViewer","diffDescription","exampleOnly","previewBody","DiffViewSimulation","leftContent","rightDrawer","borderLeftColor","innerRow","shapeBox","borderRadius","headerBox","DiffReviewExpandedCached","rfcContext","setSelectedInterpretationInner","setSelectedInterpretation","s","UserPreviewedSuggestion","diffAssertion","assertion","interactionsCount","interactionIndex","setInteractionIndex","currentInteractionPointer","shapesResolvers","getIndex","interactionPointers","request","Pagination","page","showLastButton","pageNumber","Show","nonEmpty","left","itemStyles","InteractionBodyViewer","response","DiffHelperCard","inResponse","InnerRow","ShapeBox","InitialRfcCommandsContext","devlog2","InitialRfcCommandsStore","initialCommandsString","UpdatedBlueBackground","RemovedRedBackground","AddedGreen","ChangedYellow","RemovedRed","SubtleBlueBackground","methodColors","methodColorsDark","appTheme","createMuiTheme","main","updated","changed","added","removed","info","httpMethods","OPTIONS","dark","GET","POST","PUT","PATCH","DELETE","fontFamily","overrides","MuiSnackbarContent","ColorButton","_NewRegions","deselected","setDeselected","finished","setFinished","setInferPolymorphism","ShowInitialDocumentingView","isDeselected","between","checked","onApply","allIgnored","diffBlock","all","firstInteractionPointer","cached","allApproved","newRequests","PreviewNewBodyRegion","newResponses","NewBodyDiffRendered","requestCount","responseCount","locationString","approveCount","approveNewRegions","control","UserEnabledInferPolymorphism","labelPlacement","wrapper","diffsNewRegion","region","NewRegions","BreadcumbX","separator","aria-label","n","crumb","isChecked","initialBody","hasRenderableBody","jsonOption","shapePreview","bodyPreview","regionHeader","uncheckedText","primaryTypographyProps","secondaryTypographyProps","unchecked","newContentPreview","blur","hunkHeader","fontWeightRegular","hunk","subheader","textOverflow","CustomNavTabDense","SubHeadingTitleColor","DocGrey","Dark","ParametersStyles","letterSpacing","DocSubGroupHeadingStyles","DocSubGroupHeadingBigStyles","DocDivider","DocSubHeading","ShapeOnlyViewer","useShapeViewerStyles","rootId","shape","getRootShape","Error","hideDivider","depth","renderShape","nested","baseShapeId","ObjectRender","AnyShape","shapeRender","ShapeRenderContext","renderChild","setRenderChild","setType","link","Row","rowContents","typeName","onTypeClick","add","getSpecShape","withShapeRenderContext","onLeftClick","stayHighlighted","rowHighlightColor","highlight","rowWithHover","noHover","spacerBorder","fields","field","FieldRow","withIndent","FieldName","missing","fieldName","ValueRows","FieldDescription","fieldId","contributions","DESCRIPTION","_setEditing","condition","stagedContent","setStagedContent","displayDescription","finalize","commandsForUpdatingContribution","fieldDescription","inputProps","fieldShape","specFieldId","isObject","NeedHelp","Intercom","hide_default_launcher","inlineCode","EmptyState","Paper","src","EmptyStateMarkdown","rowCompass","animation","willChange","transition","transform","isAbove","isBelow","rowCompassBody","rowCompassDirection","fill","rowCompassDirectionDown","rowCompassDirectionUp","menu","userSelect","fontStyle","hiddenItem","symbols","indexMarker","assertionMet","toolbar","dash","isSticky","HiddenItemEllipsis","setShowAllLists","ShapeExpandedContext","expandId","DiffToolTip","placement","tooltip","boxShadow","shadows","Tooltip","useColor","StringColor","NumberColor","BooleanColor","ObjectColor","ListColor","UnknownColor","modifier","TypeName","coloredComponents","asColoredString","specShapes","isLink","textDecoration","Symbols","symbol","initialEventStore","commandsToJson","hash","sha1","DiffViewer","containerRef","useRef","isEnabled","compassState","setCompassState","elementRef","animationRaf","onAnimationFrame","useCallback","trackedEl","viewportHeight","innerHeight","boundingRect","getBoundingClientRect","requestAnimationFrame","ref","useCompassTargetTracker","compassTargetRef","useDiff","containerEl","querySelector","isTracked","onClickCompass","preventDefault","scrollIntoView","scrollMode","block","RowCompass","changeType","changeTypeAsString","ListRender","ValueContents","getJson","example","getHighlightColor","tracked","highlightColor","DiffNotif","displayName","headOrUndefined","parent","Indent","showAllLists","listId","items","itemsWithHidden","item","ItemRow","isLast","lengthScala","IndexMarker","jsTypeString","prototype","call","isOptional","isNullable","innerShape","wordBreak","overflowWrap","AssertionMetTypeName","withDiffContext","exampleShape","specShape","getOrUndefinedJson","diffNotif","exampleItemShape","listItemShape","specListItem","normal","code","generalClasses","useReducer","updateState","createInitialState","rows","dispatch","diffDetails","changeDescription","copyPair","compliant","collapsed","seqIndex","fieldValue","onRowClick","payload","indentPadding","repeat","isCollapsed","isIncompliant","isCollapsedIncompliant","requiresAddition","requiresUpdate","requiresRemoval","rowContent","RowFieldName","RowSeqIndex","RowValue","DiffAssertion","symbolContent","collapsedSymbol","collapsedChangeIcon","collapsedWarning","stringContent","isMissing","fieldIndex","selectectedChangeIcon","assertionWarningIcon","lineHeight","collapsedRowValue","booleanContent","numberContent","missingContent","alignSelf","diffTrails","jsonTrails","jsonTrail","JsonTrailHelper","toJs","bodyJson","shapeRows","collapsedTrails","collapsedShape","_get","trail","rowField","replacementRows","newCollapsedTrails","updatedRows","splice","updatedCollapsedTrails","_isEqual","unfoldRows","typeString","objectRows","listRows","getFieldType","createRow","objectShape","nestedDiffs","diffTrail","every","trailComponent","keysWithDiffs","nestedDiff","_uniq","keys","sort","alphabetizeCaseInsensitve","A","B","toLowerCase","indexesWithDiffs","itemTypeString","itemTrail","itemIndent","isArray","TypeError","isCompliant","SpecServiceClient","Client","client_1","enumerable","get","spec_service_client_1","JavascriptErrorDetectedInFrontend","tslib_1","RegisterEvent_1","Events_1","Joi","__importStar","RequirementForDiffsToHaveASuggestionFailedSchema","object","string","required","DescribeEvent","Events","JavascriptErrorDetectedInFrontendSchema","message","stack","alignItem","font","icon","buttons","clearPreview","showIt","summary","SuggestionDisplayed","PulsingOptic","betweenWithoutCommands","toIgnore","DiffStats","createStyles","thin","thick","PathComponentItem","updateItem","setValue","handleMouseOver","handleMouseOut","node","useHover","hoverRef","isHovered","PathComponentButton","ButtonBase","originalName","ClickToMakeParam","inferDefaultParamName","otherPathComponents","doc","isEqual","firstMatchingParamName","param","UrlToPath","onAccept","onUserCompleted","urlStringToPathComponents","setPathComponentsInternal","lastInteractedIndex","setLastInteractedIndex","collapseParams","setCollapseParams","setItemAt","newItem","setPathComponents","parameters","flatMap","updater","TextField","startIcon","PathMatcher","handlePathComponentsChange","hasParameters","rowId","pathWrapper","UpdateContribution","UserCommittedChanges","UserChangedCaptureOverviewTabSchema","number","NewBodyDiffRenderedSchema","InferPolymorphismEnabledSchema","UserBeganAddingNewUrlSchema","optional","UserFinishedAddingNewUrlSchema","SuggestionDisplayedSchema","SuggestionAcceptedSchema","UserPreviewedSuggestionSchema","UserResetDiffSchema","ShowCommitCardSchema","UserCommittedChangesSchema","AddUrlModalNamingSchema","AddUrlModalIdentifyingPathComponentsSchema","ShowInitialDocumentingViewSchema","UpdateContributionSchema","_ref","AllEvents","joiSchema","propsToSentence","schema","properties","clientAgent","clientId","clientSessionInstanceId","clientTimestamp","toSentence","eventName","RegisterEvent","keymirror_1","UserLoggedInFromCLI","ApiCreated","ApiInitializedInProject","ApiCheckCompleted","StartedTaskWithLocalCli","ExitedTaskWithLocalCli","BodyDiffRendered","DocSubGroup","packageJson","version","isAnalyticsEnabled","opticAnalyticsEnabled","FS","shutdown","client","userPromise","niceTry","getIdentity","ok","json","user","anonymousId","identify","email","user_id","sub","analyticsEvents","newAnalyticsEventBus","batchId","clientContext","listen","postTrackingEvents","Transition","forwardRef","direction","FinalizeDialog","commitMessage","setCommitMessage","saving","setSaving","endpointName","setEndpointName","clientSessionId","commit","newEventStore","contexts","rfc","Commands","StartBatchCommit","EndBatchCommit","uuidv4","specContext","withSpecContext","applyCommands","jsArrayToVector","addContribution","seqToVector","setTimeout","pastTenseChanges","pastTenseAction","pluralIf","collection","hasChanges","TransitionComponent","keepMounted","error","helperText","onFocus","currentTarget","setSelectionRange","commandContext","RfcCommandContext","Facade","fromCommands","ApiCreatedSchema","UserLoggedInFromCLISchema","userId","ApiInitializedInProjectSchema","cwd","ApiCheckCompletedSchema","any","mode","passed","getNormalizedBodyDescriptor","ShapedBodyDescriptor","getEndpointId","createEndpointDescriptor","requests","requestIdsByPathId","responsesArray","requestsOnPathAndMethod","requestDescriptor","toUpperCase","pathParameters","pathTrail","asPathTrail","pathComponent","pathComponentName","getNameWithFormattedParameters","pathComponentId","p","isPathParameter","descriptor","ParameterizedPathComponentDescriptor","requestBodies","requestBody","bodyDescriptor","responsesForPathAndMethod","sortBy","responseDescriptor","responseId","responseBody","httpStatusCode","responses","endpointDescription","isEmpty","stuffFromQueries","queries","requestsState","requestParameters","pathIdsByRequestId","pathsWithRequests","pathIdsWithRequests","Set","values","endpoints","shapesState","BaseRfcStore","CommandContext","initialRfcInput","setError","setX","setUpdateCount","makeEventStore","bulkAdd","fromJsonCommands","handleCommand","Queries","getCommandsAsJson","RfcStore","LocalRfcStore","enqueueSnackbar","useSnackbar","debounce","leading","trailing","LocalDiffRfcStore","ShapeRenderStore","ShapeExpandedStore","collapsedIds","setCollapsedIds","include","delete","BaseUrlContext","Loading","loaderCenter","disableShrink","thickness","App","hasError","AppError","Fragment","maxSnack","topLevelRoutes","onClickRefresh","href","SupportLinks","_regeneratorRuntime","_asyncToGenerator","events_1","uuid_1","getContext","_emit","mark","_callee","_len","_key","_args","arguments","wrap","_context","prev","next","v4","sent","assign","stop","apply","callback","outputFileName","downloadSourcePath","downloadDestinationPath","output","blob","Blob","URL","createObjectURL","document","createElement","download","click","SpecServiceStore","enabledFeatures","forceUpdate","warn","determineEnabledFeatures","useEnabledFeatures","sessionCleaned","samples","asJsonString","asText","Math","floor","now","hostname","unregister","navigator","serviceWorker","ready","then","registration","DocParameter","paramId","updateContribution","overviewSection","expand","specPreview","DocsPage","Page","scrollToTop","DocumentationToc","EndpointDocumentationWrapper","DocumentingYourApi","getContribution","hasRequestBody","httpContentType","res","bgColor","useParams","EndpointDocs","fingerPrint","usePageTitle","diffPreviewer","DiffPreviewer","responsesGroupedByStatusCode","groupBy","allResponses","r","renderedShape","previewShape","toOption","shapeId","detail","codeInline","rangesFromOpticYaml","yamlString","load","mappings","isValid","allTasks","stringValueOf","scalar","startPosition","endPosition","contents","startLine","splitLines","substr","endLine","computeLines","thisTask","errors","useTask","taskRange","t","IntegrationDocs","require","CommonIssues","integrationDocsOptions","frameworks","lang","pretty_name","language","updateConfig","framework","currentStaged","stagedRanges","replaceRange","substitute","substring","docs","startCommand","start_command","template","ShowCurrentOpticYml","rawConfig","ranges","updateValue","computedMarkers","markers","highlightX","keyValue","colorClass","recommended","commandIsLongRunning","apiProcessStartsOnAssignedHost","apiProcessStartsOnAssignedPort","highlightCorrect","highlightError","proxyCanStartAtInboundUrl","manual","proxyTargetUrlResolves","highlightRowFocus","startRow","startCol","endRow","endCol","lineCount","bg","showPrintMargin","readOnly","showGutter","highlightActiveLine","editorProps","$blockScrolling","borderBottomColor","borderBottom","copybtn","Code","CodeBlock","dracula","customStyle","assertionsMap","commandProcess","getStatus","commandPort","commandHost","inboundUrlStart","targetUrlResolve","HelperCard","setting","noChecks","assertions","wordWrap","quickSummary","AssertionMini","issue","shortTitle","resolution","failed","Box","DotIndicator","LightTooltip","interactive","untested","border","headertop","borderTopColor","borderTop","optionStyle","optionRow","rootOption","defaultFilter","createFilter","ignoreCase","filterOptions","candidate","input","Option","cx","getStyles","innerRef","isDisabled","isFocused","isSelected","innerProps","css","customStyles","singleValue","provided","onChoose","touchEmpty","setStartCommand","hasShownEmpty","isSearchable","filterOption","FrameworkHelper","onModeChange","onChooseFramework","InnerToolTip","FrameworkSelect","Chip","useLatestEvent","lastEvent","useRecursiveTimeout","delay","savedCallback","tick","ret","clearTimeout","CheckPassed","started","setStarted","setCounter","latest","percentComplete","Divider","inputs","LinearProgress","selected","scroller","demo","chip","caption","DemoStartCommandSetup","springConfig","stiffness","damping","rightArrow","SetupPage","daemonIsUp","setNotificationChannel","notificationChannel","EventSource","onmessage","onerror","onopen","useUserTracking","useMachine","Machine","lastKnownSavedConfig","stagedConfig","checkCount","initial","states","invoke","onDone","actions","ctx","precheck","USER_FINISHED_CHANGING_CONFIG","USER_UPDATED_CONFIG","USER_TOGGLED_MODE","send","USER_SELECTED_FRAMEWORK","CHECK_RESULT_RECEIVED","cond","lastCheckResult","passedcheck","newSetupAndCheckMachine","debouncedConfigRaw","debouncedValue","setDebouncedValue","handler","useDebounce","isSaving","helperCardFor","cards","pageBg","copyRoot","ApiStartCommandCopy","focusTask","PortAssumption","PromptCheck","lastResult","shouldShow","promptCheck","PortTooltip","code_change","preamble","after","LookFor","backgroundImage","backgroundSize","TestingDashboardLoader","lazy","ApiRoutes","defaultRoute","getDefaultRoute","fallback","strict","TestingSessions","useRouteMatch","sessionId","useMockSession","exampleSessionCollection","ExampleCaptureService","_events","_rfcState","additionalCommands","computeInitialDiff","cachingResolversAndRfcStateFromEventsAndAdditionalCommands","resolvers","DiffHelpers","emptyInteractionPointersGroupedByDiff","groupInteractionPointerByDiffs","ExampleDiffService","LocalCliDiffService","JsonHttpClient","diffsJson","DiffWithPointersJsonDeserializer","fromJs","ScalaJSHelpers","toJsArray","UrlCounterHelper","fromJsonToSeq","descriptionFromDiff","suggestionsForDiff","previewBodyRender","interactions","randomPointers","previewShapeRender","EventSerialization","toJson","postJson","LocalCliCaptureService","filters","interactionPointer","LocalCli","apiId","WelcomePage","OpticDocs","PrivateSessions","snackbarStyles","alert","buttonWrapper","ctaButton","Alert","DemoSessions","setMessage","commits","setCommits","hasCommited","setHasCommited","_setRoute","routeStateRef","showTooltips","setShowTooltips","hasDocumentedAllEndpointDiffs","setDocumentedAllEndpointDiffs","pathname","pop","eventsHandler","eventProps","DiffEvents","diffAmount","exampleEndpointName","m","addingField","optionalField","removeField","changeField","missingField","newField","removeListener","Snackbar","autoHideDuration","severity","SpecViewerDataContext","debugSession","TopLevelRoutes","LearnAPIMenu","anchorEl","setAnchorEl","CustomMenuItem","why","MenuItem","option","topline","onMouseEnter","Menu","onMouseLeave","batchCommandHandler","makeRfcService","pendingCommands","emitCommands","doWork","getAllCommands","appBar","Slide","InProgressFullScreen","isManual","endpointIds","setEndpointIds","setStats","progressTicker","setProgressTicker","done","setDone","batchHandler","LearnPaths","onCompleted","allBodies","setAllBodies","throttler","Bottleneck","maxConcurrent","minTime","schedule","promise","learnInitial","finally","allCommands","flattenDeep","req","asScalaCommandsInJsArray","vectorToJsArray","CommandSerialization","useBatchLearn","batchCommands","commandsAsVector","oasLineCount","learnManual","pathAddCommands","Step","dense","ListItemText","ListItemSecondaryAction","CircularProgress","Dialog","fullScreen","Container","PulsingOpticHuge","LearnAPIPage","undocumented","allPaths","LearnAPIPageInner","EnhancedTable","descendingComparator","orderBy","headCells","align","EnhancedTableHead","order","onRequestSort","numSelected","rowCount","TableHead","TableRow","headCell","TableCell","sortDirection","TableSortLabel","active","property","visuallyHidden","EnhancedTableToolbar","useToolbarStyles","Toolbar","setOrder","setOrderBy","setPage","rowsPerPage","setRowsPerPage","handleChangePage","newPage","filteredUrls","FilterAction","paginator","TablePagination","rowsPerPageOptions","onChangePage","onChangeRowsPerPage","parseInt","TableContainer","Table","table","stickyHeader","TableBody","comparator","stabilizedThis","el","stableSort","getComparator","isItemSelected","indexOf","alsoMatchesCurrent","UndocumentedRowWrapper","UndocumentedRow","hover","role","tabIndex","selectedRowMatches","selectedRow","verticalAlign","innerCheck","Fade","Checkbox","handleClick","fontSizeAdjust","filterInput","lighten","light","clip","opticDebug","ReactDOM","getElementById","initialState","debouncer","pendingUpdates","reloadDebounce","_CaptureContextStore","componentDidMount","maxWait","startDiff","notifData","notifDataUpdates","hasOwnProperty","hasMoreInteractions","skippedInteractionsCounter","diffedInteractionsCounter","listDiffs","listUnrecognizedUrls","diffsResponse","urlsResponse","cleanupDiff","apiConfig","eventsAsArray","eventsJsArray","stats_SIMULATED","notificationsUrl","loadStats","endpointDiffsWithoutIgnored","filterIgnored","CaptureContextStore","_classCallCheck","_createClass","client_utilities_1","getJsonWithoutHandlingResponse","putJson","taskConfig","specId","cross_fetch_1","_verifyOkResponse","statusText","abrupt","_x","_handleJsonResponse","_callee2","_context2","_x2","additionalHeaders","headers","accept","handleJsonResponse","Accept","postJsonString","patchJsonString","verifyOkResponse","putJsonString","bottleneck_1","outgoingPoll","patchJson","_loadConfig","_saveConfig","raw","getJsonAsText","_this","_this2","metadata","_getEnabledFeatures","_callee3","_context3","getTestingCredentials","DepthContext","IndentIncrement","defaultValue","Wrapper","common","white","methodRender","pathRender","PathAndMethodOverflowFriendly","MethodRenderLarge","PathAndMethodLarge","SquareChip","tabSize","drawer","miniDrawer","drawerPaper","miniDrawerPaper","topLevel","navButton","opticLogo","mainSection","PageContext","pageContext","titles","useLocation","scrollTo","injectedContext","setTitles","menuItems","useMemo","REACT_APP_DONT_SHOW_DIFF","Drawer","anchor","EndpointsContextStoreWithoutContext","lookupExampleForRequest","lookupExampleForResponse","EndpointsContextStore","PathNameFromId","_DiffContextStore","isFinishing","exampleInteractions","DiffContextStore","asNormalizedAbsolutePath","pathTrailComponents","pathTrailComponent","BasicPathComponentDescriptor","getNormalizedName","asAbsolutePath","lastPathId","lastPath","parentPathId","reverse","asPathTrailComponents","normalizePath","lastOrElse","rootPathComponent","normalizedPathMap","lastMatchComponents","prefixes","pathComponentPrefix","normalized","lengthDifference","MockDataContext","fetchedData","refresh","fetch","getData","createDebugSession","deps","setData","setLoading","setAvailable","catch","err","json_http_client_1","docsBaseLink","Contact","subject","GithubIssues","ShowSpan"],"mappings":"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","file":"static/js/main.018b5871.chunk.js","sourcesContent":["\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultCommandInit = exports.buildTask = void 0; //@ts-ignore\n\nvar jsesc_1 = __importDefault(require(\"jsesc\"));\n\nfunction buildTask(apiName, flags, taskName) {\n  var config = \"\\nname: \".concat(escapeIt(apiName), \"\\ntasks:\\n\").concat(buildInitialTask(flags, taskName)).trimLeft();\n  return config;\n}\n\nexports.buildTask = buildTask;\nexports.defaultCommandInit = 'echo \"Setup A Valid Command to Start your API!\"';\n\nfunction buildInitialTask(flags, taskName) {\n  //default config and valid for start injected\n  var commandConfig = \"  \".concat(taskName, \":\\n     command: \").concat(escapeIt(flags.command || exports.defaultCommandInit), \"\\n     inboundUrl: \").concat(flags.inboundUrl || 'http://localhost:4000', \"\\n\").trimRight();\n\n  if (flags.inboundUrl && flags.targetUrl) {\n    commandConfig = \"  \".concat(taskName, \":\\n     inboundUrl: \").concat(flags.inboundUrl, \"\\n     targetUrl: \").concat(flags.targetUrl, \"\\n\").trimRight();\n  }\n\n  return commandConfig;\n}\n\nfunction escapeIt(value) {\n  var escaped = jsesc_1.default(value, {\n    quotes: 'double'\n  });\n\n  if (escaped !== value) {\n    return \"\\\"\".concat(escaped, \"\\\"\");\n  }\n\n  return \"\\\"\".concat(value, \"\\\"\");\n}","module.exports = \"data:image/png;base64,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\"","import React, { useContext, useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport time from 'time-ago';\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord';\nimport FormControl from '@material-ui/core/FormControl';\nimport { UserChangedCaptureOverviewTab } from '@useoptic/analytics/lib/events/diffs';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport {\n  Dark,\n  DocDarkGrey,\n  DocDivider,\n  DocGrey,\n} from '../../docs/DocConstants';\nimport { DocSubGroup } from '../../docs/DocSubGroup';\nimport ListItem from '@material-ui/core/ListItem';\nimport List from '@material-ui/core/List';\nimport { PathAndMethod } from './PathAndMethod';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport { Link, Redirect, Route, Switch, useHistory } from 'react-router-dom';\nimport Chip from '@material-ui/core/Chip';\nimport { dumpSpecServiceState } from '../../../utilities/dump-spec-service-state';\nimport { GenericContextFactory } from '../../../contexts/GenericContextFactory';\nimport {\n  useServices,\n  useSpecService,\n} from '../../../contexts/SpecServiceContext';\nimport { useRouterPaths } from '../../../RouterPaths';\nimport { RfcContext } from '../../../contexts/RfcContext';\nimport classNames from 'classnames';\nimport {\n  DiffResultHelper,\n  getOrUndefined,\n  JsonHelper,\n  lengthScala,\n  mapScala,\n} from '@useoptic/domain';\nimport { NewUrlModal } from './AddUrlModal';\nimport DiffPageNew, { IgnoreDiffContext, IgnoreDiffStore } from './DiffPageNew';\nimport { Show, ShowSpan } from '../../shared/Show';\nimport {\n  EndpointsContext,\n  EndpointsContextStore,\n  PathNameFromId,\n} from '../../../contexts/EndpointContext';\nimport MoreRecentCapture from './MoreRecentCapture';\nimport Page from '../../Page';\nimport { useBaseUrl } from '../../../contexts/BaseUrlContext';\nimport EmptyState from '../../support/EmptyState';\nimport {\n  AddedGreenBackground,\n  ChangedYellowBackground,\n  RemovedRedBackground,\n} from '../../../theme';\nimport { AddOpticLink } from '../../support/Links';\nimport { debugDump } from '../../../utilities/debug-dump';\nimport {\n  CaptureContext,\n  CaptureContextStore,\n  useCaptureContext,\n} from '../../../contexts/CaptureContext';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport { CustomNavTab } from './CustomNavTab';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport TypeModal from '../../shared/JsonTextarea';\nimport Fade from '@material-ui/core/Fade';\nimport { DiffLoadingOverview } from './LoadingNextDiff';\nimport { DiffStats } from './Stats';\nimport { trackUserEvent, track } from '../../../Analytics';\nimport qs from 'qs';\nimport { LearnAPIPage } from './learn-api/LearnAPIPage';\n\nconst {\n  Context: AllCapturesContext,\n  withContext: withAllCapturesContext,\n} = GenericContextFactory(null);\nexport { AllCapturesContext };\n\nfunction AllCapturesStore(props) {\n  const baseUrl = useBaseUrl();\n  const [captures, setCaptures] = useState([]);\n  const [dismissed, setDismissed] = useState([]);\n  const specService = useSpecService();\n  const history = useHistory();\n\n  function update() {\n    const task = async () => {\n      const listCapturesResponse = await specService.listCaptures();\n      const { captures } = listCapturesResponse;\n      setCaptures(captures);\n    };\n    task();\n  }\n\n  useEffect(() => {\n    update();\n  }, []);\n\n  useEffect(() => {\n    window.addEventListener('focus', update);\n\n    function cleanup() {\n      window.removeEventListener('focus', update);\n    }\n\n    return cleanup;\n  }, []);\n\n  useEffect(() => {\n    global.opticDump = dumpSpecServiceState(specService);\n    global.dumpEvents = async () => await specService.listEvents();\n  }, []);\n\n  function dismissCapture(captureId) {\n    setDismissed([...dismissed, captureId]);\n  }\n\n  function switchToCapture(captureId) {\n    history.push(`${baseUrl}/diffs/${captureId}`);\n  }\n\n  const context = {\n    captures,\n    dismissed,\n    dismissCapture,\n    switchToCapture,\n  };\n  return (\n    <AllCapturesContext.Provider value={context}>\n      {props.children}\n    </AllCapturesContext.Provider>\n  );\n}\n\nexport function CaptureManagerPage(props) {\n  const routerPaths = useRouterPaths();\n\n  return (\n    <Page title=\"Review API Diffs\">\n      <Page.Navbar mini={true} />\n      <Page.Body padded={false}>\n        <AllCapturesStore>\n          <IgnoreDiffStore>\n            <Switch>\n              <Route path={routerPaths.diffsRoot} component={CaptureManager} />\n            </Switch>\n          </IgnoreDiffStore>\n        </AllCapturesStore>\n      </Page.Body>\n    </Page>\n  );\n}\n\nexport const CaptureManager = ({ location }) => {\n  const classes = useCaptureManagerPageStyles();\n  const routerPaths = useRouterPaths();\n  const { captures } = useContext(AllCapturesContext);\n  const baseUrl = useBaseUrl();\n\n  return (\n    <Switch>\n      <Route\n        exact\n        path={routerPaths.captureRoot}\n        component={CaptureDiffWrapper}\n      />\n      <Route\n        exact\n        path={routerPaths.captureRequestDiffsRoot}\n        component={RequestDiffWrapper}\n      />\n      {captures.length && (\n        <Redirect to={`${baseUrl}/diffs/${captures[0].captureId}`} />\n      )}\n      <Route component={() => empty} />\n    </Switch>\n  );\n};\n\nexport const subtabs = {\n  ENDPOINT_DIFF: 'ENDPOINT_DIFF',\n  UNDOCUMENTED_URL: 'UNDOCUMENTED_URL',\n};\n\nfunction CaptureChooserComponent(props) {\n  const { captureId } = props;\n  const specService = useSpecService();\n  const classes = useCaptureManagerPageStyles();\n  const captureContext = useContext(AllCapturesContext);\n  const {\n    endpointDiffs,\n    unrecognizedUrls,\n    completed,\n    skipped,\n    processed,\n  } = useCaptureContext();\n  const history = useHistory();\n  const baseUrl = useBaseUrl();\n\n  const realEndpointDiffCount = endpointDiffs.filter(\n    (i) => i.count > 0 && i.isDocumentedEndpoint\n  ).length;\n\n  const totalEndpoints = endpointDiffs.length;\n\n  const urlsSplit = DiffResultHelper.splitUnmatchedUrls(\n    JsonHelper.jsArrayToSeq(unrecognizedUrls),\n    JsonHelper.jsArrayToSeq(endpointDiffs)\n  );\n\n  const query = qs.parse(props.location.search, {\n    ignoreQueryPrefix: true,\n  });\n\n  let defaultTab = subtabs.ENDPOINT_DIFF;\n\n  const [tab, setTab] = useState(defaultTab);\n\n  useEffect(() => {\n    if (query.tab === subtabs.UNDOCUMENTED_URL) {\n      setTab(subtabs.UNDOCUMENTED_URL);\n    }\n\n    if (query.tab === subtabs.ENDPOINT_DIFF) {\n      setTab(subtabs.ENDPOINT_DIFF);\n    }\n  }, [query.tab]);\n\n  useEffect(() => {\n    trackUserEvent(\n      UserChangedCaptureOverviewTab.withProps({\n        currentTab: tab,\n        diffCount: realEndpointDiffCount,\n        undocumentedUrlCount: urlsSplit.total,\n      })\n    );\n  }, [tab, realEndpointDiffCount, urlsSplit.total]);\n\n  useEffect(() => {\n    global.debugOptic = debugDump(specService, captureId);\n  });\n\n  useEffect(() => {\n    if (totalEndpoints === 0 && unrecognizedUrls.length > 0) {\n      setTab(subtabs.UNDOCUMENTED_URL);\n    }\n  }, [totalEndpoints, unrecognizedUrls.length]);\n\n  function handleChange(event) {\n    const captureId = event.target.value;\n    history.push(`${baseUrl}/diffs/${captureId}`);\n    window.location.reload();\n  }\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.navigationContainer}>\n        <div className={classes.navRoot}>\n          <div className={classes.header}>\n            <FiberManualRecordIcon\n              color=\"secondary\"\n              fontSize=\"small\"\n              style={{ marginRight: 10 }}\n            />\n            <Typography variant=\"h6\" style={{ fontSize: 19 }}>\n              Local Capture\n            </Typography>\n          </div>\n\n          <FormControl className={classes.formControl} fullWidth>\n            <Select\n              size=\"small\"\n              placeholder=\"Select Capture\"\n              value={captureId}\n              onChange={handleChange}\n            >\n              {captureContext.captures.map((capture, index) => {\n                return (\n                  <MenuItem value={capture.captureId} key={capture.captureId}>\n                    <ListItemText\n                      primary={`${time.ago(capture.lastUpdate)} ${\n                        index === 0 ? '(LATEST) ' : ''\n                      } `}\n                    />\n                    <ListItemSecondaryAction>\n                      {capture.hasDiff && (\n                        <WarningIcon\n                          fontSize=\"small\"\n                          color=\"secondary\"\n                          style={{ marginRight: 8, paddingTop: 5 }}\n                        />\n                      )}\n                    </ListItemSecondaryAction>\n                  </MenuItem>\n                );\n              })}\n            </Select>\n          </FormControl>\n\n          <DocDivider style={{ marginTop: 22, marginBottom: 15 }} />\n\n          <Tabs\n            orientation=\"vertical\"\n            className={classes.tabs}\n            onChange={(_, value) => setTab(value)}\n            value={tab}\n          >\n            <CustomNavTab\n              label={`Endpoint Diffs (${realEndpointDiffCount} / ${totalEndpoints}) `}\n              value={subtabs.ENDPOINT_DIFF}\n            />\n            <CustomNavTab\n              label={`Undocumented URLs (${urlsSplit.total})`}\n              value={subtabs.UNDOCUMENTED_URL}\n            />\n          </Tabs>\n\n          <DocDivider style={{ marginTop: 22, marginBottom: 15 }} />\n\n          <div style={{ flex: 1 }} />\n\n          <DiffStats showSkipped={true} />\n        </div>\n      </div>\n      <div className={classes.pageContainer}>\n        <div className={classes.center}>\n          {subtabs.ENDPOINT_DIFF === tab && (\n            <EndpointDiffs captureId={captureId} />\n          )}\n          {subtabs.UNDOCUMENTED_URL === tab &&\n            (process.env.REACT_APP_LEARN_API_MODE ? (\n              <LearnAPIPage captureId={captureId} urlsSplit={urlsSplit} />\n            ) : (\n              <UnrecognizedUrls captureId={captureId} urlsSplit={urlsSplit} />\n            ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction RequestDiffWrapper(props) {\n  const specService = useSpecService();\n  const classes = useCaptureManagerPageStyles();\n\n  return (\n    // sessionId={props.match.params.captureId}\n    // specService={specService}\n    <DiffPageNew {...props} />\n  );\n}\n\nconst empty = (\n  <EmptyState\n    title=\"Optic has not observed any traffic\"\n    content={`\nRun \\`api start\\` and send the API some traffic\n\nNot setup yet? Follow the [Getting Started Tutorial](${AddOpticLink})\n`.trim()}\n  />\n);\n\nfunction CaptureDiffWrapper(props) {\n  const { captureId } = props.match.params;\n  const classes = useCaptureManagerPageStyles();\n\n  const rfcContext = useContext(RfcContext);\n  const services = useServices();\n\n  return (\n    <IgnoreDiffContext.Consumer>\n      {({ ignoredDiffs, resetIgnored }) => (\n        <CaptureContextStore\n          captureId={captureId}\n          ignoredDiffs={ignoredDiffs}\n          {...services}\n        >\n          <CaptureChooserComponent\n            location={props.location}\n            captureId={captureId}\n          />\n        </CaptureContextStore>\n      )}\n    </IgnoreDiffContext.Consumer>\n  );\n}\n\nfunction CaptureDiffStat() {\n  const classes = useCaptureManagerPageStyles();\n  // const { stats } = useCaptureContext();\n  //also available\n  // stats.captureCompleted\n  // stats.processed\n  return (\n    <div className={classes.stats}>\n      <Typography variant=\"h6\" color=\"primary\" style={{ fontWeight: 200 }}>\n        Optic observed <Stat number={0} label=\"interaction\" />, yielding{' '}\n        <Stat number={0} label=\"diff\" /> and{' '}\n        <Stat number={0} label=\"undocumented endpoint\" />.\n        {/*<Stat number={stats.interactionsCounter || 0} label=\"interaction\" />,*/}\n        {/*yielding <Stat number={stats.totalDiffs || 0} label=\"diff\" /> and{' '}*/}\n        {/*<Stat*/}\n        {/*  number={stats.undocumentedEndpoints || 0}*/}\n        {/*  label=\"undocumented endpoint\"*/}\n        {/*/>*/}\n        {/*.*/}\n      </Typography>\n    </div>\n  );\n}\n\nfunction EndpointDiffs(props) {\n  const { captureId } = props;\n  const classes = useCaptureManagerPageStyles();\n  const { endpointDiffs, completed } = useCaptureContext();\n  const history = useHistory();\n  const baseUrl = useBaseUrl();\n\n  const realCount = endpointDiffs.length;\n  const anyHaveDiffs = endpointDiffs.some((i) => i.count > 0);\n\n  if (realCount === 0 && !completed) {\n    return <DiffLoadingOverview show={true} />;\n  }\n\n  //also available\n  // stats.captureCompleted\n  // stats.processed\n  return (\n    <>\n      <div className={classes.stats}>\n        <Typography variant=\"h6\" color=\"primary\" style={{ fontWeight: 200 }}>\n          {anyHaveDiffs\n            ? 'Some endpoints are exhibiting undocumented behavior'\n            : 'All endpoints are working as specified'}\n        </Typography>\n      </div>\n      <List style={{ padding: 13, paddingTop: 4 }}>\n        {endpointDiffs.map((i) => {\n          const to = `${baseUrl}/diffs/${captureId}/paths/${i.pathId}/methods/${i.method}`;\n          return (\n            <EndpointsContextStore key={to} pathId={i.pathId} method={i.method}>\n              <Paper\n                className={classNames(classes.paper, {\n                  [classes.disabled]: i.count === 0,\n                })}\n              >\n                <EndpointsContext.Consumer>\n                  {({ endpointDescriptor }) => (\n                    <ListItem\n                      button\n                      className={classes.row}\n                      component={Link}\n                      to={to}\n                      onClick={() => {\n                        // track('Viewing Endpoint IAsyncTask', i);\n                      }}\n                    >\n                      <div className={classes.listItemInner}>\n                        <Typography component=\"div\" variant=\"subtitle2\">\n                          {endpointDescriptor.endpointPurpose || (\n                            <span style={{ color: DocDarkGrey }}>\n                              Unnamed Endpoint\n                            </span>\n                          )}\n                        </Typography>\n                        <PathAndMethod\n                          method={endpointDescriptor.httpMethod}\n                          path={endpointDescriptor.fullPath}\n                        />\n                      </div>\n                      <ListItemSecondaryAction>\n                        <ShowSpan when={i.count > 0}>\n                          <Chip\n                            className={classes.chips}\n                            size=\"small\"\n                            label={`Diffs: ${i.count}`}\n                            style={{\n                              backgroundColor: ChangedYellowBackground,\n                            }}\n                          />\n                        </ShowSpan>\n                        <ShowSpan when={i.count === 0}>\n                          <Chip\n                            className={classes.chips}\n                            size=\"small\"\n                            label={`No Diffs`}\n                            style={{\n                              backgroundColor: AddedGreenBackground,\n                            }}\n                          />\n                        </ShowSpan>\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                  )}\n                </EndpointsContext.Consumer>\n              </Paper>\n            </EndpointsContextStore>\n          );\n        })}\n      </List>\n    </>\n  );\n}\n\nfunction UnrecognizedUrls(props) {\n  const { captureId, urlsSplit } = props;\n  const classes = useCaptureManagerPageStyles();\n  const history = useHistory();\n  const { unrecognizedUrls, endpointDiffs, completed } = useCaptureContext();\n  const baseUrl = useBaseUrl();\n\n  const undocumented = JsonHelper.seqToJsArray(urlsSplit.undocumented);\n  const allUnmatchedPaths = JsonHelper.seqToJsArray(urlsSplit.allPaths);\n  const urls = JsonHelper.seqToJsArray(urlsSplit.urls);\n\n  const [pendingUrl, setPendingUrl] = useState(null);\n\n  if (urls.length === 0 && undocumented.length === 0 && !completed) {\n    return <DiffLoadingOverview show={true} />;\n  }\n\n  return (\n    <>\n      {pendingUrl && (\n        <NewUrlModal\n          onClose={() => setPendingUrl(null)}\n          allUnmatchedPaths={allUnmatchedPaths}\n          urlOverride={pendingUrl.override}\n          newUrl={pendingUrl}\n          onAdd={(result) => {\n            const { pathId, method } = result;\n            const to = `${baseUrl}/diffs/${captureId}/paths/${pathId}/methods/${method}`;\n            history.push(to);\n          }}\n        />\n      )}\n      <div className={classes.stats}>\n        <Typography variant=\"h6\" color=\"primary\" style={{ fontWeight: 200 }}>\n          Optic observed{' '}\n          <Stat number={urlsSplit.totalCount || 0} label=\"undocumented url\" />.\n        </Typography>\n      </div>\n\n      <Show when={urlsSplit.totalCount >= 250}>\n        <div className={classes.subStat}>\n          <Typography variant=\"caption\" style={{ color: DocGrey }}>\n            Showing {urls.length} undocumented URLs. Start documenting the new\n            endpoints or ignore the paths in your optic.yml file.\n          </Typography>\n        </div>\n      </Show>\n\n      <Show when={undocumented.length}>\n        <Typography variant=\"subtitle2\" color=\"primary\" style={{ padding: 9 }}>\n          Ready to Document\n        </Typography>\n        <List style={{ marginBottom: 12 }}>\n          {undocumented.map((i) => {\n            const url = <PathNameFromId pathId={getOrUndefined(i.pathId)} />;\n\n            return (\n              <ListItem\n                button\n                className={classes.row}\n                divider={true}\n                onClick={() => {\n                  setPendingUrl({\n                    pathId: i.pathId,\n                    path: i.path,\n                    method: i.method,\n                    override: url,\n                  });\n                }}\n              >\n                <div className={classes.listItemInner}>\n                  <PathAndMethod method={i.method} path={url} />\n                </div>\n                <ListItemSecondaryAction>\n                  <Chip\n                    className={classes.chips}\n                    size=\"small\"\n                    label={i.count + ' observations'}\n                    style={{\n                      backgroundColor: AddedGreenBackground,\n                    }}\n                  />\n                </ListItemSecondaryAction>\n              </ListItem>\n            );\n          })}\n        </List>\n\n        {urls.length > 0 && (\n          <Typography\n            variant=\"subtitle2\"\n            color=\"primary\"\n            style={{ padding: 9 }}\n          >\n            Unrecognized URLs\n          </Typography>\n        )}\n      </Show>\n\n      <List>\n        {urls.map((i) => {\n          return (\n            <ListItem\n              button\n              className={classes.row}\n              divider={true}\n              onClick={() => {\n                setPendingUrl(i);\n              }}\n            >\n              <div className={classes.listItemInner}>\n                <PathAndMethod method={i.method} path={i.path} />\n              </div>\n              <ListItemSecondaryAction>\n                <Chip\n                  className={classes.chips}\n                  size=\"small\"\n                  label={i.count + ' observations'}\n                  style={{\n                    backgroundColor: AddedGreenBackground,\n                  }}\n                />\n              </ListItemSecondaryAction>\n            </ListItem>\n          );\n        })}\n      </List>\n    </>\n  );\n}\n\nexport const Stat = ({ number, label }) => {\n  return (\n    <span>\n      {number !== 0 && (\n        <Typography\n          variant=\"h6\"\n          component=\"span\"\n          color=\"secondary\"\n          style={{ fontWeight: 800 }}\n        >\n          {number}{' '}\n        </Typography>\n      )}\n      <Typography\n        variant=\"h6\"\n        component=\"span\"\n        style={{ fontWeight: 800 }}\n        color=\"primary\"\n      >\n        {number === 0 && 'no '}\n        {label}\n        {number === 1 ? '' : 's'}\n      </Typography>\n    </span>\n  );\n};\n\nexport const useCaptureManagerPageStyles = makeStyles((theme) => ({\n  container: {\n    display: 'flex',\n    overflow: 'hidden',\n  },\n  navigationContainer: {\n    width: 280,\n    overflow: 'hidden',\n    display: 'flex',\n  },\n  pageContainer: {\n    display: 'flex',\n    flexGrow: 1,\n    flexShrink: 1,\n    justifyContent: 'center',\n  },\n  navRoot: {\n    flexGrow: 1,\n    position: 'fixed',\n    width: 'inherit',\n    height: '100vh',\n    overflowY: 'visible',\n    overflowX: 'hidden',\n    display: 'flex',\n    flexDirection: 'column',\n    borderRight: `1px solid ${theme.palette.grey[300]}`,\n    background: theme.palette.grey[100],\n  },\n  chips: {\n    marginLeft: 10,\n  },\n  tabs: {\n    marginLeft: theme.spacing(4),\n  },\n  center: {\n    flex: 1,\n    maxWidth: 1200,\n  },\n  statsSection: {\n    paddingBottom: theme.spacing(2),\n  },\n  progressStats: {\n    paddingLeft: theme.spacing(1),\n    color: DocDarkGrey,\n  },\n  progressWrapper: {\n    height: 6,\n    width: '100%',\n  },\n  header: {\n    display: 'flex',\n    flexDirection: 'row',\n    flexShrink: 1,\n    width: '100%',\n    alignItems: 'center',\n    margin: theme.spacing(2),\n  },\n  formControl: {\n    paddingLeft: 35,\n    paddingRight: 15,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n  stats: {\n    marginTop: 20,\n    paddingBottom: 15,\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'row',\n  },\n  subStat: {\n    paddingBottom: 15,\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'row',\n  },\n  listItemInner: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  row: {\n    paddingTop: 10,\n    paddingBottom: 10,\n  },\n  disabled: {\n    pointerEvents: 'none',\n    opacity: 0.5,\n  },\n  paper: {\n    marginBottom: 15,\n  },\n  diffContainer: {\n    display: 'flex',\n\n    paddingLeft: 32,\n    paddingRight: 32,\n    flexDirection: 'row',\n    overflow: 'scroll',\n    flexGrow: 1,\n    flexShrink: 1,\n    justifyContent: 'center',\n  },\n  diffWrapper: {\n    flex: 1,\n    padding: '24px 0px 144px',\n    maxWidth: 1280,\n  },\n}));\n","import React, { useContext, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport pathToRegexp from 'path-to-regexp';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport PathMatcher from '../PathMatcher';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport Typography from '@material-ui/core/Typography';\nimport { Show } from '../../shared/Show';\nimport { DocSubGroup } from '../../docs/DocSubGroup';\nimport { resolvePath } from '../../utilities/PathUtilities';\n\nimport {\n  getOrUndefined,\n  RequestsCommands,\n  RequestsHelper,\n  RfcCommands,\n  OpticIds,\n} from '@useoptic/domain';\nimport { RfcContext, withRfcContext } from '../../../contexts/RfcContext';\nimport { pathMethodKeyBuilder, PURPOSE } from '../../../ContributionKeys';\nimport { PathAndMethod } from './PathAndMethod';\nimport { useHistory } from 'react-router-dom';\nimport { useBaseUrl } from '../../../contexts/BaseUrlContext';\nimport { trackUserEvent, track } from '../../../Analytics';\nimport {\n  AddUrlModalNaming,\n  AddUrlModalIdentifyingPathComponents,\n} from '@useoptic/analytics/lib/events/diffs';\nimport { CaptureContext } from '../../../contexts/CaptureContext';\nimport {\n  UserBeganAddingNewUrl,\n  UserFinishedAddingNewUrl,\n} from '@useoptic/analytics/lib/events/diffs';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100vh',\n  },\n  urls: {\n    maxHeight: 500,\n    overflow: 'scroll',\n  },\n}));\n\nwindow.OpticIds = OpticIds;\n\nexport const NewUrlModal = withRfcContext((props) => {\n  const {\n    children,\n    newUrl,\n    urlOverride,\n    onClose,\n    allUnmatchedPaths,\n    onAdd,\n  } = props;\n\n  const classes = useStyles();\n  const { cachedQueryResults, handleCommands } = useContext(RfcContext);\n  const { captureId } = useContext(CaptureContext);\n  const knownPathId = getOrUndefined(newUrl.pathId);\n  const [naming, setNaming] = React.useState(Boolean(knownPathId));\n  const [pathExpression, setPathExpression] = React.useState(newUrl.path);\n\n  const handleClickOpen = () => {\n    trackUserEvent(\n      UserBeganAddingNewUrl.withProps({\n        captureId: captureId,\n        method: newUrl.method,\n        path: newUrl.path,\n        knownPathId,\n      })\n    );\n  };\n\n  useEffect(() => {\n    if (naming) {\n      // AddUrlModal - Naming Endpoint\n      trackUserEvent(\n        AddUrlModalNaming.withProps({\n          path: newUrl.path,\n          method: newUrl.method,\n        })\n      );\n    } else {\n      // AddUrlModal - Path Components\n      trackUserEvent(\n        AddUrlModalIdentifyingPathComponents.withProps({\n          path: newUrl.path,\n          method: newUrl.method,\n        })\n      );\n    }\n  }, [naming]);\n\n  const handleClose = () => {\n    // track('Closed AddUrlModal');\n    setPathExpression(newUrl.path);\n    onClose();\n  };\n\n  const handleChange = ({ pathExpression }) => {\n    setPathExpression(pathExpression);\n  };\n\n  const handleCreate = (purpose) => {\n    trackUserEvent(\n      UserFinishedAddingNewUrl.withProps({\n        purpose,\n        captureId,\n        method: newUrl.method,\n        pathExpression,\n      })\n    );\n\n    let lastParentPathId = knownPathId;\n    const commands = [];\n    //create path if missing\n    if (!lastParentPathId) {\n      const { pathsById } = cachedQueryResults;\n      const pathComponents = pathStringToPathComponents(pathExpression);\n      const { toAdd, lastMatch } = resolvePath(pathComponents, pathsById);\n      lastParentPathId = lastMatch.pathId;\n      toAdd.forEach((addition) => {\n        const pathId = OpticIds.newPathId();\n        const command = (addition.isParameter\n          ? RequestsCommands.AddPathParameter\n          : RequestsCommands.AddPathComponent)(\n          pathId,\n          lastParentPathId,\n          cleanupPathComponentName(addition.name)\n        );\n        commands.push(command);\n        lastParentPathId = pathId;\n      });\n    }\n\n    //name it\n    commands.push(\n      RfcCommands.AddContribution(\n        pathMethodKeyBuilder(lastParentPathId, newUrl.method),\n        PURPOSE,\n        purpose\n      )\n    );\n\n    //apply commands\n    handleCommands(...commands);\n\n    onAdd({\n      pathId: lastParentPathId,\n      method: newUrl.method,\n    });\n    onClose();\n  };\n\n  const regex = completePathMatcherRegex(\n    pathStringToPathComponents(pathExpression)\n  );\n  const matches = regex.exec(newUrl.path) !== null;\n  const matchingUrls = Array.from(\n    allUnmatchedPaths.filter((url) => regex.exec(url) && url !== newUrl.path)\n  );\n\n  function NamingDialog() {\n    const [purpose, setPurpose] = React.useState('');\n\n    return (\n      <Dialog\n        open={true}\n        onClose={handleClose}\n        fullWidth\n        maxWidth=\"md\"\n        transitionDuration={0}\n        key={'dialog' + newUrl.toString()}\n      >\n        <form>\n          <DialogTitle>Add New Endpoint</DialogTitle>\n          <DialogContent style={{ marginTop: -20 }}>\n            <PathAndMethod\n              method={newUrl.method}\n              path={urlOverride || pathExpression}\n            />\n            <DialogContentText style={{ marginTop: 12 }}>\n              What does this endpoint do?\n            </DialogContentText>\n            <TextField\n              value={purpose}\n              onChange={(e) => setPurpose(e.target.value)}\n              autoFocus\n              onKeyPress={(e) => {\n                if (e.key === 'Enter') {\n                  handleCreate(purpose);\n                }\n              }}\n              fullWidth\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button\n              disabled={Boolean(knownPathId)}\n              onClick={() => setNaming(false)}\n            >\n              Back\n            </Button>\n            <Button\n              type=\"submit\"\n              onClick={() => handleCreate(purpose)}\n              color=\"secondary\"\n              disabled={!matches && !knownPathId && purpose !== ''}\n              endIcon={<NavigateNextIcon />}\n            >\n              Finish\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    );\n  }\n\n  return (\n    <div key={newUrl.toString()}>\n      {/*@TODO: investigate this as the cause of broken tabbing */}\n      <div onClick={handleClickOpen}>{children}</div>\n      {naming ? (\n        <NamingDialog key={'naming one' + newUrl.toString()} />\n      ) : (\n        <Dialog\n          open={true}\n          onClose={handleClose}\n          key={'path to' + newUrl.toString()}\n          fullWidth\n          maxWidth=\"md\"\n          aria-labelledby=\"form-dialog-title\"\n        >\n          <form>\n            <DialogTitle>Add New Endpoint</DialogTitle>\n            <DialogContent style={{ marginTop: -20 }}>\n              <PathAndMethod method={newUrl.method} path={newUrl.path} />\n              <DialogContentText style={{ marginTop: 12 }}>\n                Specify the pattern that matches this URL:\n              </DialogContentText>\n\n              <div style={{ display: 'flex', flexDirection: 'row' }}>\n                <div style={{ flex: 1.5 }}>\n                  <PathMatcher\n                    initialPathString={newUrl.path}\n                    url={newUrl.path}\n                    onChange={handleChange}\n                  />\n                </div>\n              </div>\n\n              <div className={classes.urls}>\n                <Show when={matchingUrls.length}>\n                  <DocSubGroup\n                    title=\"Other matching URLs:\"\n                    innerStyle={{ paddingLeft: 5 }}\n                  >\n                    {matchingUrls.map((i) => {\n                      return (\n                        <Typography\n                          variant=\"subtitle1\"\n                          style={{ fontSize: 12, marginBottom: 11 }}\n                        >\n                          {i}\n                        </Typography>\n                      );\n                    })}\n                  </DocSubGroup>\n                </Show>\n              </div>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose}>Cancel</Button>\n              <Button\n                autoFocus={true}\n                type=\"submit\"\n                onClick={() => setNaming(true)}\n                color=\"secondary\"\n                disabled={!matches}\n                endIcon={<NavigateNextIcon />}\n              >\n                Next\n              </Button>\n            </DialogActions>\n          </form>\n        </Dialog>\n      )}\n    </div>\n  );\n});\n\nfunction completePathMatcherRegex(pathComponents) {\n  const pathString = pathComponentsToString(pathComponents);\n  const regex = pathToRegexp(pathString, [], { start: true, end: true });\n  return regex;\n}\n\nfunction pathReducer(acc, item) {\n  if (\n    acc.find(\n      (i) =>\n        i.method === item.sample.request.method &&\n        i.url === item.sample.request.url\n    )\n  ) {\n    return acc;\n  } else {\n    return acc.concat({\n      method: item.sample.request.method,\n      url: item.sample.request.url,\n      pathId: item.pathId,\n      requestId: item.requestId,\n      sample: item.sample,\n    });\n  }\n}\n\nexport function pathComponentsToString(pathComponents) {\n  if (pathComponents.length === 0) {\n    return '/';\n  }\n  const s =\n    '/' +\n    pathComponents\n      .map(({ name, isParameter }) => {\n        if (isParameter) {\n          const stripped = name\n            .replace('{', '')\n            .replace('}', '')\n            .replace(':', '');\n          return `:${stripped}`;\n        } else {\n          return name;\n        }\n      })\n      .join('/');\n  return s;\n}\n\nexport function cleanupPathComponentName(name) {\n  return name.replace(/[{}:]/gi, '');\n}\n\nexport function trimTrailingEmptyPath(components) {\n  if (components.length > 0) {\n    if (components[components.length - 1].name === '') {\n      return components.slice(0, -1);\n    }\n  }\n  return components;\n}\n\nexport function pathStringToPathComponents(pathString) {\n  const components = pathString.split('/').map((name) => {\n    const isParameter = name.charAt(0) === ':' || name.charAt(0) === '{';\n    return { name, isParameter };\n  });\n  const [root, ...rest] = components;\n  if (root.name === '') {\n    return trimTrailingEmptyPath(rest);\n  }\n  return trimTrailingEmptyPath(components);\n}\n","import React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { TextField, Typography } from '@material-ui/core';\nimport ReactMarkdown from 'react-markdown';\nimport { DocDarkGrey, DocSubHeading, SubHeadingStyles } from './DocConstants';\nimport { SymbolColor } from '../diff/v2/shape_viewers/styles';\n\nexport function MarkdownRender({ source, style, noHeadings }) {\n  return (\n    <div style={style}>\n      <ReactMarkdown\n        source={source}\n        renderers={{\n          heading: ({ level, children }) =>\n            !noHeadings ? (\n              <Typography\n                color=\"primary\"\n                variant={`h${level}`}\n                style={{ fontWeight: 300, marginBottom: 3 }}\n              >\n                {children}\n              </Typography>\n            ) : null,\n          paragraph: ({ children }) => (\n            <Typography\n              variant=\"body2\"\n              style={{ fontWeight: 200, marginTop: 11, whiteSpace: 'pre-wrap' }}\n            >\n              {children}\n            </Typography>\n          ),\n          list: ({ children }) => {\n            return <ul style={{ paddingLeft: 20 }}>{children}</ul>;\n          },\n          listItem: ({ children }) => (\n            <li style={{ paddingLeft: 0 }}>\n              <Typography\n                variant=\"body2\"\n                style={{\n                  paddingLeft: 5,\n                  paddingRight: 5,\n                  marginTop: 11,\n                  fontWeight: 200,\n                }}\n              >\n                {children}\n              </Typography>\n            </li>\n          ),\n        }}\n      />\n    </div>\n  );\n}\n\nexport function FieldDescriptionMarkdownRender({ source, style }) {\n  return (\n    <div style={style}>\n      <ReactMarkdown\n        source={source}\n        renderers={{\n          paragraph: ({ children }) => (\n            <Typography\n              variant=\"body2\"\n              style={{\n                fontWeight: 200,\n                color: SymbolColor,\n                whiteSpace: 'pre-wrap',\n              }}\n            >\n              {children}\n            </Typography>\n          ),\n          list: ({ children }) => {\n            return (\n              <ul style={{ paddingLeft: 20, color: SymbolColor }}>\n                {children}\n              </ul>\n            );\n          },\n          listItem: ({ children }) => (\n            <li style={{ paddingLeft: 0 }}>\n              <Typography\n                variant=\"body2\"\n                style={{\n                  paddingLeft: 5,\n                  paddingRight: 5,\n                  color: SymbolColor,\n                  fontWeight: 200,\n                }}\n              >\n                {children}\n              </Typography>\n            </li>\n          ),\n        }}\n      />\n    </div>\n  );\n}\n\nconst styles = (theme) => ({\n  root: {\n    marginTop: 4,\n    cursor: 'text',\n  },\n});\n\nclass _MarkdownContribution extends React.Component {\n  state = {\n    inputValue: this.props.value || '',\n    editing: this.props.autoFocus,\n  };\n\n  handleChange = (e) => this.setState({ inputValue: e.target.value });\n  setEditing = (b) => () => {\n    if (process.env.REACT_APP_SPEC_ENABLE_EDITING === 'no') { return; }\n\n    this.setState({ editing: b });\n    if (!b && this.props.onChange) {\n      if (this.state.inputValue !== (this.props.value || '')) {\n        this.props.onChange(this.state.inputValue);\n      }\n    }\n  };\n\n  render() {\n    const { classes, label } = this.props;\n    const { inputValue, editing } = this.state;\n    if (editing) {\n      return (\n        <TextField\n          label={label}\n          fullWidth={true}\n          multiline={true}\n          style={{ fontSize: 11 }}\n          value={inputValue}\n          color=\"primary\"\n          autoFocus={true}\n          onChange={this.handleChange}\n          onBlur={this.setEditing(false)}\n          margin=\"dense\"\n        />\n      );\n    } else {\n      if (!inputValue) {\n        return (\n          <div className={classes.root} onClick={this.setEditing(true)}>\n            <Typography\n              variant=\"caption\"\n              style={{ color: DocDarkGrey, textTransform: 'uppercase' }}\n            >\n              {' '}\n              + {label}\n            </Typography>\n          </div>\n        );\n      }\n\n      return (\n        <div className={classes.root} onClick={this.setEditing(true)}>\n          <MarkdownRender source={inputValue} noHeadings={true} />\n        </div>\n      );\n    }\n  }\n}\n\nexport const MarkdownContribution = withStyles(styles)(_MarkdownContribution);\n\nclass _HeadingContribution extends React.Component {\n  state = {\n    inputValue: this.props.value || '',\n    editing: this.props.autoFocus,\n  };\n\n  handleChange = (e) => this.setState({ inputValue: e.target.value });\n  setEditing = (b) => () => {\n    if (process.env.REACT_APP_SPEC_ENABLE_EDITING === 'no') { return; }\n    \n    this.setState({ editing: b });\n    if (!b && this.props.onChange) {\n      if (this.state.inputValue !== (this.props.value || '')) {\n        this.props.onChange(this.state.inputValue);\n      }\n    }\n  };\n\n  render() {\n    const { classes, label } = this.props;\n    const { inputValue, editing } = this.state;\n\n    if (editing) {\n      return (\n        <TextField\n          label={label}\n          fullWidth={true}\n          value={inputValue}\n          color=\"primary\"\n          autoFocus={true}\n          onChange={this.handleChange}\n          onBlur={this.setEditing(false)}\n          margin=\"normal\"\n        />\n      );\n    } else {\n      if (!inputValue) {\n        return (\n          <div className={classes.root} onClick={this.setEditing(true)}>\n            <Typography\n              variant=\"h5\"\n              style={{\n                ...SubHeadingStyles,\n                color: DocDarkGrey,\n                textTransform: 'uppercase',\n              }}\n            >\n              {' '}\n              + {label}\n            </Typography>\n          </div>\n        );\n      }\n\n      return (\n        <DocSubHeading title={inputValue} onClick={this.setEditing(true)} />\n      );\n    }\n  }\n}\n\nexport const HeadingContribution = withStyles(styles)(_HeadingContribution);\n","import React, { useEffect, useState } from 'react';\nimport { useMockData } from '../../contexts/MockDataContext';\nimport { SpecServiceStore } from '../../contexts/SpecServiceContext';\nimport { LinearProgress } from '@material-ui/core';\nimport { LocalRfcStore, RfcStore } from '../../contexts/RfcContext';\nimport { InitialRfcCommandsStore } from '../../contexts/InitialRfcCommandsContext';\nimport EventEmitter from 'events';\n\nexport function ApiSpecServiceLoader(props) {\n  const { diffServiceFactory, captureServiceFactory } = props;\n  const debugData = useMockData();\n\n  const [service, setService] = useState(null);\n  const [events, setEvents] = useState(null);\n  useEffect(() => {\n    if (debugData.available && debugData.loading) return;\n\n    const serviceFactory = () =>\n      createExampleSpecServiceFactory(debugData.data);\n\n    const task = async () => {\n      const { specService } = await serviceFactory();\n      setService(specService);\n      specService.eventEmitter.on('events-updated', async () => {\n        const events = await specService.listEvents();\n        setEvents(events);\n      });\n    };\n    task();\n  }, [debugData.available, debugData.loading]);\n\n  useEffect(() => {\n    if (service) {\n      const task = async () => {\n        const events = await service.listEvents();\n        setEvents(events);\n      };\n      task();\n    }\n  }, [service]);\n\n  if (!events) {\n    return <LinearProgress />;\n  }\n\n  return (\n    <SpecServiceStore\n      specService={service}\n      specServiceEvents={service.eventEmitter}\n      diffServiceFactory={diffServiceFactory}\n      captureServiceFactory={captureServiceFactory}\n    >\n      <InitialRfcCommandsStore\n        initialEventsString={events}\n        rfcId=\"testRfcId\"\n        instance=\"the one in ApiSpecServiceLoader\"\n      >\n        <RfcStore specService={service}>{props.children}</RfcStore>\n      </InitialRfcCommandsStore>\n    </SpecServiceStore>\n  );\n}\n\nexport function LocalCliSpecServiceLoader(props) {\n  const { diffServiceFactory, captureServiceFactory } = props;\n  const [events, setEvents] = useState(null);\n  const { specService } = props;\n  useEffect(() => {\n    const task = async () => {\n      specService.eventEmitter.on('events-updated', async () => {\n        const events = await specService.listEvents();\n        setEvents(events);\n      });\n    };\n    task();\n  });\n\n  useEffect(() => {\n    if (specService) {\n      const task = async () => {\n        const events = await specService.listEvents();\n        setEvents(events);\n      };\n      task();\n    }\n  }, [specService]);\n\n  if (!events) {\n    return <LinearProgress />;\n  }\n\n  return (\n    <SpecServiceStore\n      specService={specService}\n      specServiceEvents={specService.eventEmitter}\n      diffServiceFactory={diffServiceFactory}\n      captureServiceFactory={captureServiceFactory}\n    >\n      <InitialRfcCommandsStore\n        initialEventsString={events}\n        rfcId=\"testRfcId\"\n        instance=\"the one in LocalCliSpecServiceLoader\"\n      >\n        <LocalRfcStore specService={specService}>\n          {props.children}\n        </LocalRfcStore>\n      </InitialRfcCommandsStore>\n    </SpecServiceStore>\n  );\n}\n\nexport const captureId = 'example-session';\nasync function createExampleSpecServiceFactory(data) {\n  let events = JSON.stringify(data.events);\n\n  const examples = data.examples || {};\n  const eventEmitter = new EventEmitter();\n\n  const ignoreRequests = [];\n\n  const config = {\n    config: {\n      apiName: 'Example API',\n      ignoreRequests,\n    },\n    configRaw:\n      'name: Todo API\\ntasks:\\n  start:\\n    command: npm run server-start\\n    inboundUrl: http://localhost:3005',\n  };\n\n  const specService = {\n    eventEmitter,\n    loadConfig: async function () {\n      return Promise.resolve(config);\n    },\n    saveConfig: async function (config) {\n      config.configRaw = config;\n      return Promise.resolve();\n    },\n    addIgnoreRule: async (rule) => {\n      ignoreRequests.push(rule);\n    },\n    listCapturedSamples: async (captureId) => {\n      return Promise.resolve(data.session);\n    },\n    listEvents() {\n      return Promise.resolve(events);\n    },\n    getCaptureStatus() {\n      return Promise.resolve({\n        status: 'completed',\n      });\n    },\n    listCaptures() {\n      return Promise.resolve({\n        captures: [\n          { captureId, lastUpdate: new Date().toISOString(), hasDiff: true },\n        ],\n      });\n    },\n    saveEvents: (eventStore, rfcId) => {\n      const serializedEvents = eventStore.serializeEvents(rfcId);\n      events = serializedEvents;\n      eventEmitter.emit('events-updated');\n      return Promise.resolve();\n    },\n    listExamples: (requestId) => {\n      return Promise.resolve({ examples: examples[requestId] || [] });\n    },\n    saveExample: (interaction, requestId) => {\n      const requestExamples = examples[requestId] || [];\n      requestExamples.push(interaction);\n      examples[requestId] = requestExamples;\n    },\n\n    getEnabledFeatures() {\n      return {\n        TESTING_DASHBOARD:\n          process.env.REACT_APP_TESTING_DASHBOARD === 'true' ||\n          process.env.REACT_APP_TESTING_DASHBOARD === true,\n      };\n    },\n  };\n\n  return { specService };\n}\n","import React, { useState } from 'react';\nimport pathToRegexp from 'path-to-regexp';\nimport { pathComponentsToString } from '../AddUrlModal';\nimport { useServices } from '../../../../contexts/SpecServiceContext';\n\nexport const LearnAPIPageContext = React.createContext({});\n\nexport function LearnAPIStore({ children, allUrls }) {\n  const { specService } = useServices();\n  const [toDocument, setToDocument] = useState([]);\n  const [ignoredIds, setIgnoredIds] = useState([]);\n  const [basepath, setBasepath] = useState('');\n  const [learningInProgress, setLearningInProgress] = useState(false);\n  const checkedIds = toDocument.map((i) => i.id);\n  const [pathExpressions, changePathExpressions] = useState({});\n\n  const [highlightAlsoMatching, setHighlight] = useState([]);\n\n  const updatePathExpression = (id, expression) => {\n    changePathExpressions((state) => ({ ...state, [id]: expression }));\n\n    const pathString = pathComponentsToString(expression.pathComponents);\n    const regex = pathToRegexp(pathString, [], { start: true, end: true });\n\n    const current = allUrls.find((i) => i.id === id);\n\n    const matchingUrlsId = Array.from(\n      allUrls\n        .filter((row) => row.method === current.method && regex.exec(row.path))\n        .map((i) => i.id)\n        .filter((i) => i !== current.id) // don't self match\n    );\n    setHighlight(matchingUrlsId);\n  };\n\n  const currentPathExpressions = toDocument.map((i) => ({\n    ...i,\n    pathExpression: pathExpressions[i.id].pathExpression,\n    regex: (() => {\n      const pathString = pathComponentsToString(\n        pathExpressions[i.id].pathComponents\n      );\n      return pathToRegexp(pathString, [], { start: true, end: true });\n    })(),\n  }));\n\n  const shouldHideIds = allUrls\n    .filter((i) => {\n      const isAToDocument = toDocument.find((td) => td.id === i.id);\n      if (isAToDocument) return false; // these always show\n\n      const matchesAToDocument = currentPathExpressions.some(\n        (toDocumentWithRegex) => {\n          if (toDocumentWithRegex.method === i.method) {\n            return Boolean(toDocumentWithRegex.regex.exec(i.path));\n          } else {\n            return false;\n          }\n        }\n      );\n\n      const shouldHideFromIgnore =\n        !i.path.startsWith(basepath) || ignoredIds.includes(i.id);\n\n      return matchesAToDocument || shouldHideFromIgnore;\n    })\n    .map((i) => i.id);\n\n  const startLearning = (type) => {\n    setLearningInProgress(type);\n    //do magic....\n  };\n\n  const toggleRow = (row, forceRemove = false) => {\n    if (checkedIds.includes(row.id) || forceRemove) {\n      setToDocument((current) => [...current].filter((i) => i.id !== row.id));\n    } else {\n      setToDocument((current) => [...current, row]);\n    }\n  };\n\n  const value = {\n    basepath,\n    setBasepath,\n    toDocument,\n    currentPathExpressions,\n    learningInProgress,\n    startLearning,\n    checkedIds,\n    shouldHideIds,\n    pathExpressions,\n    highlightAlsoMatching,\n    updatePathExpression,\n    setIgnore: (url) => {\n      const pattern = `${url.method} ${url.path}`;\n      setIgnoredIds((i) => [...i, url.id]);\n      toggleRow(url, true);\n      specService.addIgnoreRule(pattern);\n    },\n    reset: () => {\n      setToDocument([]);\n      setLearningInProgress(false);\n      changePathExpressions({});\n      setHighlight([]);\n    },\n    addRow: (row) => {\n      if (!checkedIds.includes(row.id)) {\n        setToDocument((current) => [...current, row]);\n        setHighlight([]);\n      }\n    },\n    toggleRow,\n  };\n\n  return (\n    <LearnAPIPageContext.Provider value={value}>\n      {children}\n    </LearnAPIPageContext.Provider>\n  );\n}\n","import { useCaptureContext } from '../../../contexts/CaptureContext';\nimport { useEffect, useState } from 'react';\nimport { JsonHelper, ScalaJSHelpers } from '@useoptic/domain';\nimport { track, trackUserEvent } from '../../../Analytics';\nimport { RequirementForDiffsToHaveASuggestionFailed } from '@useoptic/analytics/lib/events/errors';\nexport function useDiffDescription(diff) {\n  const { diffService } = useCaptureContext();\n  const [description, setDescription] = useState(null);\n\n  useEffect(() => {\n    const getDescription = async () => {\n      setDescription((await diffService.loadDescription(diff)) || null);\n    };\n    getDescription();\n  }, [diff.diff.toString()]);\n\n  return description;\n}\n\nexport function useInteractionWithPointer(pointer) {\n  const { captureService } = useCaptureContext();\n  const [interaction, setInteraction] = useState(null);\n\n  useEffect(() => {\n    let mounted = true;\n    const getInteraction = async () => {\n      if (pointer) {\n        setInteraction(null);\n        const interaction =\n          (await captureService.loadInteraction(pointer)).interaction || null;\n        if (mounted) {\n          setInteraction({\n            interaction,\n            interactionScala: JsonHelper.fromInteraction(interaction),\n          });\n        }\n      } else {\n        if (mounted) {\n          setInteraction(null);\n        }\n      }\n    };\n\n    getInteraction();\n\n    return () => (mounted = false);\n  }, [pointer]);\n\n  return interaction;\n}\n\nexport function useSuggestionsForDiff(diff, currentInteraction) {\n  const { diffService } = useCaptureContext();\n  const [suggestions, setSuggestions] = useState([]);\n\n  useEffect(() => {\n    let mounted = true;\n    console.log('look here ', mounted);\n    const getSuggestions = async () => {\n      if (diff) {\n        const result = await diffService.listSuggestions(\n          diff,\n          currentInteraction\n        );\n        if (mounted) {\n          setSuggestions(result);\n          if (result.length === 0) {\n            trackUserEvent(\n              RequirementForDiffsToHaveASuggestionFailed.with({\n                diff: diff.toString(),\n              })\n            );\n          }\n        }\n      } else {\n        if (mounted) {\n          setSuggestions([]);\n        }\n      }\n    };\n    getSuggestions();\n    return () => (mounted = false);\n  }, [diff && diff.diff.toString()]);\n\n  return suggestions;\n}\n\nwindow.naiveCache = {};\n\nexport function useInitialBodyPreview(\n  diff,\n  currentInteraction,\n  inferPolymorphism = false,\n  endpointId\n) {\n  const { diffService } = useCaptureContext();\n\n  const [preview, setPreview] = useState(null);\n  const [loadingInferPoly, setLoadingInferPoly] = useState(false);\n\n  useEffect(() => {\n    window.naiveCache = {};\n  }, [endpointId]);\n\n  useEffect(() => {\n    let mounted = true;\n    const cacheKey = diff.toString() + inferPolymorphism.toString();\n    console.log('cache key ' + cacheKey);\n    const getInitialPreview = async () => {\n      if (diff && currentInteraction) {\n        if (inferPolymorphism) {\n          setLoadingInferPoly(true);\n        }\n\n        const result = window.naiveCache[cacheKey]\n          ? await Promise.resolve(window.naiveCache[cacheKey])\n          : await diffService.loadInitialPreview(\n              diff,\n              currentInteraction,\n              inferPolymorphism\n            );\n\n        if (mounted) {\n          setLoadingInferPoly(false);\n          setPreview(result);\n          window.naiveCache[cacheKey] = result;\n        }\n      } else {\n        if (mounted) {\n          setLoadingInferPoly(false);\n          setPreview(null);\n        }\n      }\n    };\n    getInitialPreview();\n    return () => (mounted = false);\n  }, [\n    diff.diff.toString(),\n    currentInteraction && currentInteraction.toString(),\n    inferPolymorphism,\n  ]);\n\n  return { preview, loadingInferPoly };\n}\n","import React, { useContext, useEffect, useState } from 'react';\nimport { DiffContext } from './DiffContext';\nimport { useDiffDescription } from './DiffHooks';\nimport ListItem from '@material-ui/core/ListItem';\nimport Typography from '@material-ui/core/Typography';\nimport { CompareEquality, JsonHelper } from '@useoptic/domain';\nimport Card from '@material-ui/core/Card';\nimport { Collapse, withStyles } from '@material-ui/core';\nimport List from '@material-ui/core/List';\nimport { DocDarkGrey } from '../../docs/DocConstants';\nimport { DiffToolTip } from './shape_viewers/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuOpenIcon from '@material-ui/icons/MenuOpen';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { UpdatedBlue } from '../../../theme';\nimport DiffReviewExpanded, {\n  DiffReviewExpandedCached,\n} from './DiffReviewExpanded';\nimport { DiffCopy } from './DiffCopy';\n\nconst useStyles = makeStyles((theme) => ({\n  diffCursor: {\n    position: 'sticky',\n    top: 0,\n    zIndex: 500,\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'row',\n    borderLeft: `3px solid ${UpdatedBlue}`,\n    alignItems: 'center',\n  },\n  diffTitle: {\n    fontSize: 15,\n    fontWeight: 400,\n    paddingLeft: 11,\n  },\n  diffCursorActions: {\n    display: 'flex',\n    alignItems: 'center',\n    flexDirection: 'row',\n    paddingRight: 10,\n  },\n  diffItem: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'baseline',\n    paddingLeft: 5,\n  },\n}));\n\nexport class DiffCursor extends React.Component {\n  state = {\n    showAllDiffs: false,\n    selectedDiff: null,\n  };\n\n  setSelectedDiff = (selectedDiff) =>\n    this.setState({ selectedDiff, showAllDiffs: false });\n\n  toggle = (value) => this.setState({ showAllDiffs: value });\n\n  shouldComponentUpdate = (nextProps, nextState, nextContext) => {\n    return (\n      !CompareEquality.betweenBodyDiffs(this.props.diffs, nextProps.diffs) ||\n      this.state.showAllDiffs !== nextState.showAllDiffs ||\n      !this.state.selectedDiff ||\n      nextProps.tab !== this.props.tab\n    );\n  };\n\n  componentDidUpdate = (prevProps, prevState, snapshot) => {\n    if (this.props.diffs.length === 0) {\n      if (this.state.selectedDiff) {\n        this.setState({ selectedDiff: null });\n      }\n      return;\n    }\n\n    if (this.state.selectedDiff) {\n      if (\n        !CompareEquality.containsDiff(this.props.diffs, this.state.selectedDiff)\n      ) {\n        //diff is no longer valid\n        this.setSelectedDiff(this.props.diffs[0]);\n      }\n    } else {\n      this.setSelectedDiff(this.props.diffs[0]);\n    }\n  };\n\n  componentDidMount() {\n    this.setSelectedDiff(this.props.diffs[0]);\n  }\n\n  render = () => {\n    const { diffs, captureId } = this.props;\n    const diffCount = diffs.length;\n    const { showAllDiffs, selectedDiff } = this.state;\n\n    if (diffCount === 0 || !selectedDiff) {\n      return null;\n    }\n\n    const props = {\n      selectedDiff,\n      setSelectedDiff: this.setSelectedDiff,\n      diffs,\n      diffCount,\n      showAllDiffs,\n      toggle: this.toggle,\n    };\n    return (\n      <div key={this.props.tab}>\n        <Cursor {...props} />\n        <DiffReviewExpandedCached\n          captureId={captureId}\n          key={selectedDiff.diff.toString()}\n          {...{ selectedDiff, setSelectedDiff: this.setSelectedDiff }}\n        />\n      </div>\n    );\n  };\n}\n\nconst Cursor = ({\n  showAllDiffs,\n  diffs,\n  setSelectedDiff,\n  selectedDiff,\n  diffCount,\n  toggle,\n}) => {\n  const classes = useStyles();\n\n  return (\n    <Card className={classes.diffCursor} elevation={3}>\n      <div style={{ flex: 1 }}>\n        {!showAllDiffs && selectedDiff && (\n          <DiffItem button={false} diff={selectedDiff} />\n        )}\n        <Collapse in={showAllDiffs} timeout={0}>\n          <Typography\n            variant=\"subtitle2\"\n            style={{ paddingLeft: 12, paddingTop: 12 }}\n          >\n            Choose a diff to review\n          </Typography>\n          <List>\n            {diffs.map((diff) => (\n              <DiffItem\n                key={diff.diff.toString()}\n                setSelectedDiff={setSelectedDiff}\n                toggle={toggle}\n                diff={diff}\n                button={true}\n              />\n            ))}\n          </List>\n        </Collapse>\n      </div>\n      {!showAllDiffs && (\n        <div className={classes.diffCursorActions}>\n          <Typography\n            variant=\"overline\"\n            style={{ color: DocDarkGrey, marginRight: 10 }}\n          >\n            {diffCount} diffs\n          </Typography>\n          <DiffToolTip title=\"See all Diffs\">\n            <IconButton\n              color=\"primary\"\n              disabled={diffCount <= 1}\n              onClick={() => toggle(true)}\n            >\n              <MenuOpenIcon />\n            </IconButton>\n          </DiffToolTip>\n        </div>\n      )}\n    </Card>\n  );\n};\n\nconst DiffItem = ({ diff, button, setSelectedDiff, toggle }) => {\n  const description = useDiffDescription(diff);\n  const classes = useStyles();\n\n  return (\n    <ListItem\n      button={button}\n      className={classes.diffItem}\n      onClick={() => {\n        setSelectedDiff(diff);\n      }}\n    >\n      {description && (\n        <div style={{ display: 'flex', flexDirection: 'row', paddingLeft: 7 }}>\n          {button && <div style={{ marginRight: 7 }}>{' • '}</div>}\n          <DiffCopy copy={description.titleCopy} fontSize={15} />\n        </div>\n      )}\n    </ListItem>\n  );\n};\n","import React, { useContext, useEffect, useState } from 'react';\nimport { DocDarkGrey, DocDivider } from '../../docs/DocConstants';\nimport Tabs from '@material-ui/core/Tabs';\nimport { CustomNavTab, CustomNavTabDense } from './CustomNavTab';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Fab from '@material-ui/core/Fab';\nimport DoneIcon from '@material-ui/icons/Done';\nimport { EndpointsContext } from '../../../contexts/EndpointContext';\nimport { PathAndMethod, PathAndMethodOverflowFriendly } from './PathAndMethod';\nimport {\n  CaptureContext,\n  useCaptureContext,\n} from '../../../contexts/CaptureContext';\nimport {\n  DiffResultHelper,\n  getOrUndefined,\n  JsonHelper,\n  mapScala,\n} from '@useoptic/domain';\nimport { DiffContext } from './DiffContext';\nimport { NewRegions } from './DiffNewRegions';\nimport { DiffCursor } from './DiffCursor';\nimport DiffReviewExpanded from './DiffReviewExpanded';\nimport { RfcContext } from '../../../contexts/RfcContext';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Fade from '@material-ui/core/Fade';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { DiffStats } from './Stats';\nimport { DiffLoading } from './LoadingNextDiff';\nimport { IgnoreDiffContext, SuggestionsContext } from './DiffPageNew';\nimport FinalizeDialog from './Finalize';\nimport Button from '@material-ui/core/Button';\nimport { trackUserEvent } from '../../../Analytics';\nimport { ShowCommitCard } from '@useoptic/analytics/lib/events/diffs';\n\nexport const newRegionsConst = 'new_regions';\n\nexport function DiffReviewPage(props) {\n  const { captureId, method, pathId } = props;\n  const classes = useStyles();\n\n  const { rfcId, rfcService } = useContext(RfcContext);\n  const { reset } = useContext(DiffContext);\n  const { acceptedSuggestions } = useContext(SuggestionsContext);\n  const rfcState = rfcService.currentState(rfcId);\n\n  const { endpointDescriptor } = useContext(EndpointsContext);\n  const { diffsForThisEndpoint, completed } = useContext(DiffContext);\n\n  const [currentTab, setCurrentTab] = useState(null);\n  const [showFinalize, setShowFinalize] = useState(false);\n\n  const { ignoreDiff } = useContext(IgnoreDiffContext);\n\n  const regions = DiffResultHelper.groupEndpointDiffsByRegion(\n    diffsForThisEndpoint,\n    rfcState,\n    method,\n    pathId\n  );\n\n  useEffect(() => {\n    if (!currentTab) {\n      const firstRequestIdWithDiff = getOrUndefined(\n        regions.firstRequestIdWithDiff\n      );\n\n      const firstResponseIdWithDiff = getOrUndefined(\n        regions.firstResponseIdWithDiff\n      );\n\n      if (regions.newRegionsCount > 0) {\n        setCurrentTab(newRegionsConst);\n      } else if (firstRequestIdWithDiff) {\n        setCurrentTab(firstRequestIdWithDiff);\n      } else if (firstResponseIdWithDiff) {\n        setCurrentTab(firstResponseIdWithDiff);\n      }\n    }\n  });\n\n  const requestBodyTabs = mapScala(regions.requestDiffs)((i) => {\n    return (\n      <CustomNavTabDense\n        label={getOrUndefined(i.contentType) || 'No Body'}\n        disabled={i.count === 0}\n        value={i.id}\n        count={i.count}\n      />\n    );\n  });\n\n  const responseBodyTabs = mapScala(regions.responseDiffs)((i) => {\n    //must be flat for some reason. has to do with tab context and a material UI bug\n    return [\n      <Typography variant=\"overline\" className={classes.sectionHeader}>\n        {i.statusCode} Response Body\n      </Typography>,\n      mapScala(i.regions)((c) => {\n        return (\n          <CustomNavTabDense\n            label={getOrUndefined(c.contentType) || 'No Body'}\n            value={c.id}\n            disabled={c.count === 0}\n            count={c.count}\n          />\n        );\n      }),\n      <DocDivider style={{ marginTop: 16, marginBottom: 16 }} />,\n    ];\n  });\n\n  useEffect(() => {\n    if (showFinalize || (completed && regions.empty)) {\n      // track('Rendered Finalize Card');\n      trackUserEvent(ShowCommitCard.withProps({}));\n    }\n  }, [showFinalize, completed, regions.empty]);\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.navigationContainer}>\n        <div className={classes.navRoot}>\n          <div className={classes.header}>\n            <Typography variant=\"subtitle2\" className={classes.title}>\n              {endpointDescriptor.endpointPurpose || 'Unnamed Endpoint'}\n            </Typography>\n            <PathAndMethodOverflowFriendly\n              method={endpointDescriptor.httpMethod}\n              path={endpointDescriptor.fullPath}\n            />\n          </div>\n\n          <DocDivider />\n\n          <div className={classes.suggestionsBox}>\n            <Typography variant=\"caption\" className={classes.suggestionsCount}>\n              {acceptedSuggestions.length} approved\n            </Typography>\n            <div style={{ flex: 1 }} />\n            <Button\n              size=\"small\"\n              color=\"primary\"\n              onClick={reset}\n              classes={{ root: classes.buttonSmall }}\n            >\n              Reset\n            </Button>\n            <Button\n              size=\"small\"\n              color=\"primary\"\n              onClick={() => setShowFinalize(true)}\n              classes={{ root: classes.buttonSmall }}\n            >\n              Commit\n            </Button>\n          </div>\n\n          <DocDivider />\n\n          <div className={classes.tabScroll}>\n            <Tabs\n              orientation=\"vertical\"\n              className={classes.tabs}\n              onChange={(_, value) => {\n                if (value !== currentTab) {\n                  setCurrentTab(value);\n                }\n              }}\n              value={currentTab}\n            >\n              <CustomNavTabDense\n                label={`Loading`}\n                value={null}\n                style={{ display: 'none' }}\n              />\n              <CustomNavTabDense\n                label={`Review New Regions`}\n                value={newRegionsConst}\n                count={regions.newRegionsCount}\n                disabled={!regions.newRegionsCount}\n                style={{ marginBottom: 17 }}\n              />\n\n              {requestBodyTabs.length > 0 && (\n                <Typography\n                  variant=\"overline\"\n                  className={classes.sectionHeader}\n                >\n                  Request Body Diffs\n                </Typography>\n              )}\n\n              {requestBodyTabs}\n\n              {requestBodyTabs.length > 0 && (\n                <DocDivider style={{ marginTop: 16, marginBottom: 16 }} />\n              )}\n\n              {responseBodyTabs}\n            </Tabs>\n          </div>\n          <DiffStats />\n        </div>\n      </div>\n      <div className={classes.pageContainer}>\n        <div className={classes.center}>\n          {!currentTab && !completed && <DiffLoading show={true} />}\n\n          {currentTab === newRegionsConst && (\n            <NewRegions\n              ignoreDiff={ignoreDiff}\n              captureId={captureId}\n              endpointId={pathId + method}\n              newRegions={JsonHelper.seqToJsArray(regions.newRegions)}\n            />\n          )}\n\n          {currentTab && currentTab !== newRegionsConst && (\n            <DiffCursor\n              captureId={captureId}\n              key={currentTab}\n              diffs={JsonHelper.seqToJsArray(\n                regions.bodyDiffsForId(currentTab)\n              )}\n              completed={completed}\n              tab={currentTab}\n            />\n          )}\n        </div>\n      </div>\n      <FinalizeDialog\n        captureId={captureId}\n        open={showFinalize || (completed && regions.empty)}\n        canOnlyReset={regions.empty && completed}\n        close={() => setShowFinalize(false)}\n      />\n    </div>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    display: 'flex',\n  },\n  navigationContainer: {\n    width: 230,\n    overflow: 'hidden',\n    display: 'flex',\n  },\n  pageContainer: {\n    justifyContent: 'center',\n    flexGrow: 1,\n  },\n  navRoot: {\n    flexGrow: 1,\n    position: 'fixed',\n    width: 'inherit',\n    height: '100vh',\n    overflowY: 'visible',\n    overflowX: 'visible',\n    display: 'flex',\n    flexDirection: 'column',\n    borderRight: `1px solid ${theme.palette.grey[300]}`,\n    background: theme.palette.grey[100],\n    zIndex: 1000,\n  },\n  chips: {\n    marginLeft: 10,\n  },\n  tabScroll: {\n    paddingTop: 16,\n    flexGrow: 1,\n    flexShirnk: 1,\n  },\n  tabs: {\n    marginLeft: theme.spacing(2),\n  },\n  indent: {\n    display: 'flex',\n    flexDirection: 'column',\n    marginLeft: theme.spacing(1),\n  },\n  center: {\n    flex: 1,\n    maxWidth: 1200,\n    paddingLeft: 20,\n    paddingRight: 20,\n    paddingTop: 20,\n    paddingBottom: theme.spacing(1),\n    margin: '0 auto',\n  },\n  statsSection: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'baseline',\n    paddingLeft: theme.spacing(1),\n  },\n  progressStats: {\n    paddingLeft: theme.spacing(1),\n    color: DocDarkGrey,\n    flex: 1,\n  },\n  progressWrapper: {\n    height: 6,\n    width: '100%',\n  },\n  header: {\n    display: 'flex',\n    flexDirection: 'column',\n    flexShrink: 1,\n    width: '100%',\n    alignItems: 'left',\n    justifyContent: 'center',\n    paddingBottom: 6,\n    margin: theme.spacing(1),\n  },\n  formControl: {\n    paddingLeft: 35,\n    paddingRight: 15,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n  stats: {\n    marginTop: 20,\n    paddingBottom: 15,\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'row',\n  },\n  subStat: {\n    paddingBottom: 15,\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'row',\n  },\n  listItemInner: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  row: {\n    marginBottom: 11,\n  },\n  disabled: {\n    pointerEvents: 'none',\n    opacity: 0.5,\n  },\n  paper: {\n    marginBottom: 15,\n  },\n  diffContainer: {\n    display: 'flex',\n    height: '100vh',\n    paddingLeft: 32,\n    paddingRight: 32,\n    flexDirection: 'row',\n    overflow: 'scroll',\n    flexGrow: 1,\n    flexShrink: 1,\n    justifyContent: 'center',\n  },\n  diffWrapper: {\n    flex: 1,\n    padding: '24px 0px 144px',\n    maxWidth: 1280,\n  },\n  sectionHeader: {\n    fontWeight: 400,\n    fontSize: 11,\n    color: DocDarkGrey,\n  },\n  fab: {\n    position: 'fixed',\n    bottom: 15,\n    right: 15,\n  },\n  fabLabel: {\n    paddingRight: 8,\n  },\n  title: {\n    fontSize: 14,\n    padding: 7,\n    textAlign: 'left',\n    marginBottom: 4,\n  },\n  suggestionsBox: {\n    display: 'flex',\n    paddingLeft: 18,\n    paddingTop: 8,\n    paddingBottom: 8,\n    paddingRight: 5,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  suggestionsCount: {\n    fontSize: 10,\n    color: DocDarkGrey,\n  },\n  buttonSmall: {\n    fontSize: 10,\n    padding: 4,\n    minWidth: 40,\n  },\n}));\n","import React, { useContext } from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { Typography } from '@material-ui/core';\nimport compose from 'lodash.compose';\nimport Invariant from 'invariant';\nimport {\n  EndpointsContextStore,\n  withEndpointsContext,\n} from '../../../contexts/EndpointContext';\nimport {\n  SpecServiceContext,\n  useServices,\n  withSpecServiceContext,\n} from '../../../contexts/SpecServiceContext';\nimport { DiffContext, DiffContextStore, withDiffContext } from './DiffContext';\nimport { RfcContext, withRfcContext } from '../../../contexts/RfcContext';\nimport {\n  DiffResultHelper,\n  Facade,\n  opticEngine,\n  RfcCommandContext,\n} from '@useoptic/domain';\nimport SimulatedCommandContext from '../SimulatedCommandContext';\nimport { Redirect } from 'react-router-dom';\nimport { useBaseUrl } from '../../../contexts/BaseUrlContext';\nimport {\n  CaptureContextStore,\n  useCaptureContext,\n} from '../../../contexts/CaptureContext';\nimport { DiffReviewPage } from './DiffReviewPage';\nimport { trackUserEvent } from '../../../Analytics';\nimport {\n  UserResetDiff,\n  UserAcceptedSuggestion,\n} from '@useoptic/analytics/lib/events/diffs';\n\nconst { diff, JsonHelper } = opticEngine.com.useoptic;\nconst jsonHelper = JsonHelper();\n\nfunction DiffPageNew(props) {\n  const { specStore } = useContext(SpecServiceContext);\n  const baseUrl = useBaseUrl();\n  const services = useServices();\n\n  const { pathId, method, captureId } = props.match.params;\n\n  Invariant(pathId, ':pathId param must be matched to render DiffPageNew');\n  Invariant(method, ':method param must be matched to render DiffPageNew');\n  Invariant(\n    captureId,\n    ':captureId param must be matched to render DiffPageNew'\n  );\n\n  return (\n    <CaptureSessionInlineContext\n      specStore={specStore}\n      captureId={captureId}\n      pathId={pathId}\n      method={method}\n      services={services}\n    >\n      <EndpointsContextStore\n        pathId={pathId}\n        method={method}\n        inContextOfDiff={true}\n        notFound={<Redirect to={`${baseUrl}/diffs`} />}\n      >\n        <DiffReviewPage captureId={captureId} pathId={pathId} method={method} />\n      </EndpointsContextStore>\n    </CaptureSessionInlineContext>\n  );\n}\n\nexport const SuggestionsContext = React.createContext(null);\n\nexport function SuggestionsStore({ children }) {\n  const [acceptedSuggestions, setAcceptedSuggestions] = React.useState([]);\n\n  const resetAccepted = () => {\n    setAcceptedSuggestions([]);\n  };\n\n  const context = {\n    acceptedSuggestions,\n    setAcceptedSuggestions,\n    resetAccepted,\n  };\n  return (\n    <SuggestionsContext.Provider value={context}>\n      {children}\n    </SuggestionsContext.Provider>\n  );\n}\n\nexport const IgnoreDiffContext = React.createContext(null);\n\nexport function IgnoreDiffStore({ children }) {\n  const [ignoredDiffs, setIgnoredDiffs] = React.useState([]);\n\n  const ignoreDiff = (...diffs) => {\n    setIgnoredDiffs([...ignoredDiffs, ...diffs]);\n  };\n  const resetIgnored = () => setIgnoredDiffs([]);\n\n  const context = {\n    ignoreDiff,\n    ignoredDiffs,\n    resetIgnored,\n  };\n  return (\n    <IgnoreDiffContext.Provider value={context}>\n      {children}\n    </IgnoreDiffContext.Provider>\n  );\n}\n\nexport function flatten(acc, array) {\n  return [...acc, ...array];\n}\n\nconst InnerDiffWrapper = function (props) {\n  const { isLoading, session, captureId } = props;\n  const { children } = props;\n  const {\n    endpointDiffs,\n    updatedAdditionalCommands,\n    diffId,\n    completed,\n  } = useCaptureContext();\n  const {\n    setAcceptedSuggestions,\n    setSelectedDiff,\n    acceptedSuggestions,\n    ignoredDiffs,\n    resetIgnored,\n    resetAccepted,\n    pathId,\n    method,\n  } = props;\n\n  if (isLoading) {\n    return null;\n  }\n\n  const diffsForThisEndpoint = DiffResultHelper.diffsForPathAndMethod(\n    jsonHelper.jsArrayToSeq(endpointDiffs),\n    pathId,\n    method,\n    jsonHelper.jsArrayToSeq(ignoredDiffs)\n  );\n\n  return (\n    <DiffContextStore\n      diffId={diffId}\n      diffsForThisEndpoint={diffsForThisEndpoint}\n      completed={completed}\n      reset={() => {\n        updatedAdditionalCommands([]);\n        resetIgnored();\n        resetAccepted();\n        trackUserEvent(UserResetDiff.withProps({}));\n      }}\n      acceptSuggestion={(...suggestions) => {\n        if (suggestions) {\n          const updatedSuggestions = [...acceptedSuggestions, ...suggestions];\n          setAcceptedSuggestions(updatedSuggestions);\n          const simulatedCommands = updatedSuggestions\n            .map((x) => jsonHelper.seqToJsArray(x.commands))\n            .reduce(flatten, []);\n          updatedAdditionalCommands(simulatedCommands);\n          suggestions.map((i) => {\n            trackUserEvent(\n              UserAcceptedSuggestion.withProps({\n                captureId,\n                suggestion: i.action,\n              })\n            );\n          });\n        }\n      }}\n      acceptedSuggestions={acceptedSuggestions}\n    >\n      {children}\n    </DiffContextStore>\n  );\n  // })\n};\n\nclass _CaptureSessionInlineContext extends React.Component {\n  render() {\n    const jsonHelper = JsonHelper();\n    const {\n      captureId,\n      services,\n      rfcId,\n      eventStore,\n      children,\n      pathId,\n      method,\n    } = this.props;\n    return (\n      //@todo refactor sessionId to captureId\n      <SuggestionsStore>\n        <IgnoreDiffContext.Consumer>\n          {({ ignoredDiffs, resetIgnored }) => (\n            <SuggestionsContext.Consumer>\n              {(suggestionsContext) => {\n                const {\n                  acceptedSuggestions,\n                  setAcceptedSuggestions,\n                  resetAccepted,\n                } = suggestionsContext;\n                const simulatedCommands = acceptedSuggestions\n                  .map((x) => jsonHelper.seqToJsArray(x.commands))\n                  .reduce(flatten, []);\n                return (\n                  <SimulatedCommandContext\n                    rfcId={rfcId}\n                    eventStore={eventStore.getCopy(rfcId)}\n                    commands={simulatedCommands}\n                    shouldSimulate={true}\n                  >\n                    <CaptureContextStore\n                      captureId={captureId}\n                      pathId={pathId}\n                      method={method}\n                      ignoredDiffs={ignoredDiffs}\n                      {...services}\n                    >\n                      <InnerDiffWrapper\n                        pathId={pathId}\n                        method={method}\n                        captureId={captureId}\n                        ignoredDiffs={ignoredDiffs}\n                        resetIgnored={resetIgnored}\n                        resetAccepted={resetAccepted}\n                        setAcceptedSuggestions={setAcceptedSuggestions}\n                        acceptedSuggestions={acceptedSuggestions}\n                      >\n                        {children}\n                      </InnerDiffWrapper>\n                    </CaptureContextStore>\n                  </SimulatedCommandContext>\n                );\n              }}\n            </SuggestionsContext.Consumer>\n          )}\n        </IgnoreDiffContext.Consumer>\n      </SuggestionsStore>\n    );\n  }\n}\n\nconst CaptureSessionInlineContext = compose(withRfcContext)(\n  _CaptureSessionInlineContext\n);\n\nexport default compose(withSpecServiceContext)(DiffPageNew);\n","import React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport classnames from 'classnames'\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'row'\n  },\n  mainContent: {\n\n  },\n  spacer: {\n    flex: 1\n  },\n  right: {\n    display: 'flex',\n    alignItems: 'center'\n  }\n});\n\nclass ReusableDiffRow extends React.Component {\n  render() {\n    const {classes, className, mainContentMax, notifications,  children} = this.props;\n    return (\n      <div className={classnames(classes.root, className)}>\n        <div className={classes.mainContent} style={{maxWidth: mainContentMax, width: '100%'}}>{children}</div>\n        <div className={classes.spacer}/>\n        <div className={classes.right}>{notifications}</div>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(ReusableDiffRow);\n","import React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { GenericContextFactory } from '../../contexts/GenericContextFactory';\nimport { secondary } from '../../theme';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport ReusableDiffRow from '../diff/v2/shape_viewers/ReusableDiffRow';\nimport { Typography } from '@material-ui/core';\n\nconst {\n  Context: RequestTabsContext,\n  withContext: withRequestTabsContext,\n} = GenericContextFactory(null);\n\nclass RequestTabsContextStore extends React.Component {\n  state = {\n    requestContentType: null,\n    responseStatusCode: null,\n    responseContentType: null,\n  };\n\n  render() {\n    const context = {\n      setRequestContentType: (e) => this.setState({ requestContentType: e }),\n      setResponseStatusCode: (e) => this.setState({ responseStatusCode: e }),\n      setResponseContentType: (e) => this.setState({ responseContentType: e }),\n      requestContentType: this.state.requestContentType,\n      responseStatusCode: this.state.responseStatusCode,\n      responseContentType: this.state.responseContentType,\n    };\n\n    return (\n      <RequestTabsContext.Provider value={context}>\n        {this.props.children}\n      </RequestTabsContext.Provider>\n    );\n  }\n}\n\nexport { RequestTabsContextStore, withRequestTabsContext };\n\nexport const ContentStyledTabs = withStyles({\n  root: {\n    // height: 29,\n    paddingRight: 12,\n    minHeight: 'inherit',\n  },\n  indicator: {\n    display: 'flex',\n    justifyContent: 'center',\n    color: secondary,\n    backgroundColor: 'transparent',\n    '& > div': {\n      width: '100%',\n      backgroundColor: secondary,\n    },\n  },\n})((props) => <Tabs {...props} TabIndicatorProps={{ children: <div /> }} />);\n\nexport const ContentStyledTab = withStyles((theme) => {\n  return {\n    root: {\n      textTransform: 'none',\n      color: '#726e6e',\n      padding: 0,\n      marginTop: 5,\n      height: 25,\n      minHeight: 'inherit',\n      minWidth: 'inherit',\n      fontWeight: 500,\n      fontSize: theme.typography.pxToRem(14),\n      marginRight: theme.spacing(2),\n      '&:focus': {\n        opacity: 1,\n      },\n    },\n  };\n})((props) => <Tab disableRipple {...props} />);\n\nconst styles = (theme) => ({\n  container: {\n    marginBottom: 45,\n  },\n  root: {\n    marginTop: 15,\n    display: 'flex',\n    flex: 1,\n  },\n  content: {\n    paddingRight: 12,\n    paddingTop: 15,\n  },\n});\n\nclass ContentTabs extends React.Component {\n  componentDidMount() {\n    const {\n      inRequest,\n      responseContentType,\n      setResponseContentType,\n      setResponseStatusCode,\n      responseStatusCode,\n      requestContentType,\n      options,\n      setRequestContentType,\n    } = this.props;\n    if (inRequest && !requestContentType && options.contentTypes.length > 0) {\n      setRequestContentType(options.contentTypes[0]);\n    }\n    if (!inRequest && !responseStatusCode && options.length > 0) {\n      setResponseStatusCode(options[0].statusCode);\n      setResponseContentType(options[0].contentTypes[0]);\n    }\n  }\n\n  render() {\n    //@ts-ignore\n    const {\n      classes,\n      options,\n      notifications,\n      renderDescription,\n      inRequest,\n      requestContentType,\n      responseContentType,\n      setRequestContentType,\n      setResponseContentType,\n      responseStatusCode,\n      setResponseStatusCode,\n      renderResponse,\n      renderRequest,\n    } = this.props;\n\n    const contentTypeTab = inRequest ? requestContentType : responseContentType;\n    const setContentTypeTab = inRequest\n      ? setRequestContentType\n      : setResponseContentType;\n\n    const contentTypeOptions = inRequest\n      ? options.contentTypes || []\n      : (options.find((i) => i.statusCode === responseStatusCode) || {})\n          .contentTypes || [];\n\n    const children = inRequest\n      ? renderRequest(requestContentType)\n      : renderResponse(responseStatusCode, responseContentType);\n    const contribution =\n      renderDescription &&\n      (inRequest\n        ? renderDescription(requestContentType)\n        : renderDescription(responseStatusCode, responseContentType));\n\n    if (inRequest && options.contentTypes.length === 0) {\n      return null;\n    }\n\n    if (!inRequest && options.length === 0) {\n      return null;\n    }\n\n    const key = `${contentTypeTab}-${responseStatusCode}-${responseContentType}`;\n\n    return (\n      <div className={classes.container} key={key}>\n        <ReusableDiffRow notifications={notifications}>\n          <div className={classes.root}>\n            <Typography variant=\"h5\" color=\"primary\">\n              {inRequest ? 'Request' : 'Response'}\n            </Typography>\n          </div>\n        </ReusableDiffRow>\n        {contribution}\n        <div className={classes.root}>\n          {!inRequest && (\n            <ContentStyledTabs\n              onChange={(e, newValue) => setResponseStatusCode(newValue)}\n              value={responseStatusCode}\n            >\n              {options.map(({ statusCode }, index) => (\n                <ContentStyledTab label={statusCode} value={statusCode} />\n              ))}\n            </ContentStyledTabs>\n          )}\n\n          <div style={{ flex: 1 }} />\n\n          <ContentStyledTabs\n            value={contentTypeTab}\n            onChange={(e, newValue) => setContentTypeTab(newValue)}\n          >\n            {contentTypeOptions.map((contentType) => (\n              <ContentStyledTab label={contentType} value={contentType} />\n            ))}\n          </ContentStyledTabs>\n        </div>\n        <div className={classes.content}>{children}</div>\n      </div>\n    );\n  }\n}\n\nexport default withRequestTabsContext(withStyles(styles)(ContentTabs));\n","import { useBaseUrl } from './contexts/BaseUrlContext';\n\nconst routerPaths = {\n  testingDashboard: (base = '') => `${base}/testing`,\n  testingCapture: (base = '') => `${base}/testing/captures/:captureId`,\n  testingEndpointDetails: (base = '') =>\n    `${base}/testing/captures/:captureId/endpoints/:endpointId`,\n  docsRoot: (base = '') => `${base}/documentation`,\n  dashboardRoot: (base = '') => `${base}/dashboard`,\n  setup: (base = '') => `${base}/setup`,\n  requestDocsRoot: (base = '') =>\n    `${routerPaths.docsRoot(base)}/paths/:pathId/methods/:method`,\n  diffsRoot: (base = '') => `${base}/diffs`,\n  captureRoot: (base = '') => `${routerPaths.diffsRoot(base)}/:captureId`,\n  captureRequestDiffsRoot: (base = '') =>\n    `${routerPaths.captureRoot(base)}/paths/:pathId/methods/:method`,\n};\n\nexport function useRouterPaths() {\n  const baseUrl = useBaseUrl();\n\n  return Object.entries(routerPaths).reduce((routesByName, entry) => {\n    const [routeName, route] = entry;\n    if (typeof route === 'function') {\n      routesByName[routeName] = route(baseUrl);\n    }\n\n    return routesByName;\n  }, {});\n}\n","import React from 'react';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport { primary } from '../../../theme';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport { DocDarkGrey } from '../../docs/DocConstants';\n\nexport function DiffLoading({ show }) {\n  const classes = useStyles();\n\n  // if (!show) {\n  //   return null;\n  // }\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.top}>\n        <Skeleton variant=\"rect\" height={80} />\n      </div>\n      <div className={classes.sideBySide}>\n        <Skeleton\n          variant=\"rect\"\n          height={550}\n          component=\"div\"\n          className={classes.textParent}\n        >\n          <Typography\n            component=\"div\"\n            className={classes.text}\n            variant=\"overline\"\n          >\n            Waiting for Next Diff...\n          </Typography>\n        </Skeleton>\n        <div style={{ width: 20 }} />\n        <Skeleton variant=\"rect\" width={250} height={200} />\n      </div>\n    </div>\n  );\n}\n\nexport function DiffLoadingOverview({ show }) {\n  const classes = useStyles();\n\n  if (!show) {\n    return null;\n  }\n\n  return (\n    <div className={classes.rootOverview}>\n      <Skeleton\n        variant=\"rect\"\n        height={60}\n        component=\"div\"\n        style={{ marginTop: 12 }}\n      />\n\n      <Skeleton\n        variant=\"rect\"\n        height={60}\n        component=\"div\"\n        style={{ marginTop: 12 }}\n      />\n      <Skeleton\n        variant=\"rect\"\n        height={60}\n        component=\"div\"\n        style={{ marginTop: 12 }}\n      />\n      <Skeleton\n        variant=\"rect\"\n        height={60}\n        component=\"div\"\n        style={{ marginTop: 12 }}\n      />\n    </div>\n  );\n}\n\nexport function DiffReviewLoading({ show }) {\n  const classes = useStyles();\n\n  if (!show) {\n    return null;\n  }\n\n  return (\n    <div className={classes.rootUnder}>\n      <div className={classes.sideBySide}>\n        <Skeleton\n          variant=\"rect\"\n          height={550}\n          component=\"div\"\n          className={classes.textParent}\n          withChildren={{\n            withChildren: classes.withChildren,\n          }}\n        >\n          <Typography\n            component=\"div\"\n            className={classes.text}\n            variant=\"overline\"\n            style={{ visibility: 'inherit' }}\n          >\n            Loading Example and Diff...\n          </Typography>\n        </Skeleton>\n        <div style={{ width: 20 }} />\n        <Skeleton variant=\"rect\" width={250} height={200} />\n      </div>\n    </div>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  },\n  rootOverview: {\n    paddingLeft: 15,\n    paddingRight: 15,\n  },\n  rootUnder: {\n    width: '100%',\n    marginTop: 70,\n  },\n  text: {\n    margin: '0 auto',\n    fontSize: 20,\n    fontWeight: 400,\n    color: '#959191',\n    visibility: 'inherit !important',\n  },\n  textParent: {\n    display: 'flex',\n    justifyContent: 'center',\n    flex: 1,\n    maxWidth: 'inherit',\n    alignItems: 'center',\n  },\n  top: {\n    paddingBottom: 20,\n  },\n  sideBySide: {\n    display: 'flex',\n    maxWidth: 'inherit',\n    flexDirection: 'row',\n  },\n  withChildren: {\n    visibility: 'inherit',\n  },\n}));\n","import React from 'react';\nimport {\n  CompareEquality,\n  DiffResultHelper,\n  getOrUndefined,\n  JsonHelper,\n} from '@useoptic/domain';\nimport SimulatedCommandContext from '../SimulatedCommandContext';\nimport { RfcContext, withRfcContext } from '../../../contexts/RfcContext';\nimport DiffHunkViewer from './DiffHunkViewer';\n\nclass _DiffViewSimulation extends React.Component {\n  shouldComponentUpdate(nextProps, nextState, nextContext) {\n    const update =\n      !CompareEquality.betweenBodyDiff(\n        nextProps.diff || undefined,\n        this.props.diff || undefined\n      ) ||\n      !CompareEquality.betweenSuggestions(\n        nextProps.selectedInterpretation || undefined,\n        this.props.selectedInterpretation || undefined\n      ) ||\n      !CompareEquality.betweenInteractions(\n        nextProps.interactionScala || undefined,\n        this.props.interactionScala || undefined\n      ) ||\n      !nextProps.renderDiff !== this.props.renderDiff;\n\n    return update;\n  }\n\n  render() {\n    const {\n      outerRfcState,\n      renderDiff,\n      diff,\n      description,\n      interactionScala,\n      body,\n      selectedInterpretation,\n      rfcId,\n      eventStore,\n    } = this.props;\n\n    const renderKey = 'render ' + diff.diff.toString() + interactionScala.uuid;\n\n    if (renderDiff) {\n      const simulatedCommands = selectedInterpretation\n        ? JsonHelper.seqToJsArray(selectedInterpretation.commands)\n        : [];\n\n      return (\n        <div key={renderKey}>\n          <SimulatedCommandContext\n            rfcId={rfcId}\n            eventStore={eventStore.getCopy(rfcId)}\n            commands={simulatedCommands}\n            shouldSimulate={true}\n          >\n            <RfcContext.Consumer>\n              {({ rfcService, rfcId }) => {\n                const currentRfcState = rfcService.currentState(rfcId);\n\n                console.time('Making preview ' + renderKey);\n                let preview = DiffResultHelper.previewDiff(\n                  diff,\n                  interactionScala,\n                  currentRfcState\n                );\n                console.timeEnd('Making preview ' + renderKey);\n                return (\n                  <DiffHunkViewer\n                    suggestion={selectedInterpretation}\n                    diff={diff}\n                    preview={getOrUndefined(preview)}\n                    diffDescription={description}\n                  />\n                );\n              }}\n            </RfcContext.Consumer>\n          </SimulatedCommandContext>\n        </div>\n      );\n    } else {\n      return (\n        <div key={renderKey}>\n          <DiffHunkViewer\n            exampleOnly\n            preview={getOrUndefined(\n              DiffResultHelper.previewBody(body, outerRfcState)\n            )}\n          />\n        </div>\n      );\n    }\n  }\n}\n\nexport const DiffViewSimulation = withRfcContext(_DiffViewSimulation);\n","import React, { useContext, useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Pagination from '@material-ui/lab/Pagination';\nimport {\n  CompareEquality,\n  DiffPreviewer,\n  DiffResultHelper,\n  getIndex,\n  getOrUndefined,\n  JsonHelper,\n  lengthScala,\n  toOption,\n} from '@useoptic/domain';\nimport { DocDarkGrey, DocDivider } from '../../docs/DocConstants';\nimport { Show } from '../../shared/Show';\nimport DiffHunkViewer from './DiffHunkViewer';\nimport { DiffContext } from './DiffContext';\nimport { RfcContext } from '../../../contexts/RfcContext';\nimport { ShapeExpandedStore } from './shape_viewers/ShapeRenderContext';\nimport { PathAndMethod } from './PathAndMethod';\nimport { DiffHelperCard } from './DiffHelperCard';\nimport SimulatedCommandContext from '../SimulatedCommandContext';\nimport { BreadcumbX } from './DiffNewRegions';\nimport { primary } from '../../../theme';\nimport { useDiffDescription, useInteractionWithPointer } from './DiffHooks';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { DiffReviewLoading } from './LoadingNextDiff';\nimport { DiffViewSimulation } from './DiffViewSimulation';\nimport InteractionBodyViewer from './shape_viewers/InteractionBodyViewer';\nimport { trackUserEvent } from '../../../Analytics';\nimport { UserPreviewedSuggestion } from '@useoptic/analytics/lib/events/diffs';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(2),\n  },\n  title: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingTop: 30,\n    // justifyContent: 'center'\n  },\n  content: {\n    display: 'flex',\n    flexDirection: 'column',\n    paddingTop: 25,\n  },\n  leftContent: {\n    flex: 1,\n    padding: 12,\n  },\n  rightDrawer: {\n    width: 260,\n    padding: 12,\n    borderLeft: '1px solid',\n    borderLeftColor: '#e0e0e0',\n  },\n  innerRow: {\n    display: 'flex',\n    flexDirection: 'row',\n  },\n  shapeBox: {\n    backgroundColor: primary,\n    borderRadius: 8,\n    overflow: 'hidden',\n  },\n  headerBox: {\n    padding: 6,\n    paddingLeft: 0,\n  },\n}));\n\nexport class DiffReviewExpandedCached extends React.Component {\n  shouldComponentUpdate(nextProps, nextState, nextContext) {\n    return !CompareEquality.betweenBodyDiff(\n      nextProps.selectedDiff || undefined,\n      this.props.selectedDiff || undefined\n    );\n  }\n\n  render() {\n    const { selectedDiff, captureId, setSelectedDiff } = this.props;\n    return (\n      <DiffReviewExpanded\n        diff={selectedDiff}\n        captureId={captureId}\n        {...{ selectedDiff, setSelectedDiff }}\n      />\n    );\n  }\n}\n\nexport const DiffReviewExpanded = (props) => {\n  const classes = useStyles();\n  const { diff, selectedDiff, setSelectedDiff, rfcContext, captureId } = props;\n\n  const description = useDiffDescription(diff);\n\n  const [selectedInterpretation, setSelectedInterpretationInner] = useState(\n    null\n  );\n\n  const setSelectedInterpretation = (s) => {\n    if (description && s) {\n      trackUserEvent(\n        UserPreviewedSuggestion.withProps({\n          captureId,\n          diff: description.title,\n          diffAssertion: description.assertion,\n          suggestion: s.action,\n        })\n      );\n    }\n    setSelectedInterpretationInner(s);\n  };\n  useEffect(() => {\n    // when diff changes, remove selection\n    setSelectedInterpretation(null);\n  }, [diff && diff.diff.toString()]);\n\n  const { rfcId, rfcService, cachedQueryResults, eventStore } = useContext(\n    RfcContext\n  );\n\n  const length = diff.interactionsCount;\n\n  const [interactionIndex, setInteractionIndex] = React.useState(1);\n\n  useEffect(() => {\n    //reset interactions cursor whenever diff is updated. (it's 1 instead of 0 before of Pagination widget)\n    setInteractionIndex(1);\n  }, [diff && diff.diff.toString()]);\n\n  const outerRfcState = rfcService.currentState(rfcId);\n  const { shapesResolvers } = cachedQueryResults;\n\n  const currentInteractionPointer = getIndex(diff.interactionPointers)(\n    interactionIndex - 1\n  );\n\n  const currentInteraction = useInteractionWithPointer(\n    currentInteractionPointer\n  );\n\n  if (!currentInteraction || !description) {\n    return <DiffReviewLoading show={true} />;\n  }\n\n  const { interaction, interactionScala } = currentInteraction;\n\n  const { method, path } = interactionScala.request;\n  // track('Display Diff in Behavior Page', props);\n  return (\n    <ShapeExpandedStore>\n      <div>\n        <div className={classes.title}>\n          <Typography variant=\"h6\" color=\"primary\">\n            Observation\n          </Typography>\n          <div style={{ flex: 1 }} />\n          <Typography variant=\"overline\" style={{ color: DocDarkGrey }}>\n            Examples\n          </Typography>\n          <Pagination\n            color=\"primary\"\n            count={length}\n            page={interactionIndex}\n            showLastButton={length > 5}\n            size=\"small\"\n            onChange={(e, pageNumber) => setInteractionIndex(pageNumber)}\n          />\n        </div>\n        <DocDivider style={{ marginTop: 10, marginBottom: 15 }} />\n\n        <PathAndMethod path={path} method={method} />\n\n        <div className={classes.content}>\n          <Show when={interactionScala.request.body.nonEmpty}>\n            <InnerRow\n              left={\n                <ShapeBox\n                  header={\n                    <BreadcumbX\n                      itemStyles={{ fontSize: 13, color: 'white' }}\n                      location={[\n                        `Request Body`,\n                        getOrUndefined(\n                          interactionScala.request.body.contentType\n                        ),\n                      ]}\n                    />\n                  }\n                >\n                  {process.env.REACT_APP_FLATTENED_SHAPE_VIEWER === 'true' &&\n                  diff.inRequest ? (\n                    <InteractionBodyViewer\n                      diff={diff.inRequest && diff}\n                      diffDescription={description}\n                      body={interactionScala.request.body}\n                      selectedInterpretation={selectedInterpretation}\n                    />\n                  ) : (\n                    <DiffViewSimulation\n                      renderDiff={diff.inRequest}\n                      diff={diff}\n                      interactionScala={interactionScala}\n                      description={description}\n                      body={interactionScala.response.body} // TODO: shouldn't this be the request body?\n                      outerRfcState={outerRfcState}\n                      selectedInterpretation={selectedInterpretation}\n                    />\n                  )}\n                </ShapeBox>\n              }\n              right={\n                <DiffHelperCard\n                  inRequest\n                  description={description}\n                  currentInteraction={interactionScala}\n                  {...{\n                    selectedDiff,\n                    setSelectedDiff,\n                    selectedInterpretation,\n                    setSelectedInterpretation,\n                  }}\n                />\n              }\n            />\n\n            <div style={{ marginTop: 20, marginBottom: 20 }}>\n              <DocDivider />\n            </div>\n          </Show>\n\n          <Show when={interactionScala.response.body.nonEmpty}>\n            <InnerRow\n              left={\n                <ShapeBox\n                  header={\n                    <BreadcumbX\n                      itemStyles={{ fontSize: 13, color: 'white' }}\n                      location={[\n                        `${interactionScala.response.statusCode} Response Body`,\n                        getOrUndefined(\n                          interactionScala.response.body.contentType\n                        ),\n                      ]}\n                    />\n                  }\n                >\n                  {process.env.REACT_APP_FLATTENED_SHAPE_VIEWER === 'true' ? (\n                    <InteractionBodyViewer\n                      diff={diff.inResponse && diff}\n                      diffDescription={description}\n                      body={interactionScala.response.body}\n                      selectedInterpretation={selectedInterpretation}\n                    />\n                  ) : (\n                    <DiffViewSimulation\n                      renderDiff={diff.inResponse}\n                      diff={diff}\n                      interactionScala={interactionScala}\n                      description={description}\n                      body={interactionScala.response.body}\n                      outerRfcState={outerRfcState}\n                      selectedInterpretation={selectedInterpretation}\n                    />\n                  )}\n                </ShapeBox>\n              }\n              right={\n                <DiffHelperCard\n                  inResponse\n                  description={description}\n                  currentInteraction={interactionScala}\n                  {...{\n                    selectedDiff,\n                    setSelectedDiff,\n                    selectedInterpretation,\n                    setSelectedInterpretation,\n                  }}\n                />\n              }\n            />\n          </Show>\n        </div>\n      </div>\n    </ShapeExpandedStore>\n  );\n};\n\nconst InnerRow = ({ left, right }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.innerRow}>\n      <div style={{ flex: 1, paddingRight: 25 }}>{left}</div>\n      <div style={{ width: 250 }}>{right}</div>\n    </div>\n  );\n};\n\nexport const ShapeBox = ({ header, children }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.shapeBox}>\n      <div className={classes.headerBox}>{header}</div>\n      <div>{children}</div>\n    </div>\n  );\n};\n","import * as React from 'react';\nimport {GenericContextFactory} from './GenericContextFactory.js';\n\nconst {\n  Context: InitialRfcCommandsContext,\n  withContext: withInitialRfcCommandsContext\n} = GenericContextFactory(null);\nglobal.devlog2 = []\nclass InitialRfcCommandsStore extends React.Component {\n  render() {\n    const {rfcId, initialCommandsString, initialEventsString} = this.props;\n    global.devlog2.push({\n      instance: this.props.instance,\n      e: initialEventsString && initialEventsString.length,\n      c: initialCommandsString && initialCommandsString.length,\n      initialEventsString,\n      initialCommandsString\n    })\n    return (\n      <InitialRfcCommandsContext.Provider value={{rfcId, initialCommandsString, initialEventsString}}>\n        {this.props.children}\n      </InitialRfcCommandsContext.Provider>\n    );\n  }\n}\n\nexport {\n  InitialRfcCommandsStore,\n  InitialRfcCommandsContext,\n  withInitialRfcCommandsContext\n};\n","import { createMuiTheme, withStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\n\nexport const primary = '#31366f';\nexport const secondary = '#ea4a61';\nexport const UpdatedBlue = '#2b7bd1';\nexport const UpdatedBlueBackground = 'rgba(43,123,209,0.11)';\nexport const AddedGreenBackground = 'rgba(0,196,70,0.3)';\nexport const ChangedYellowBackground = 'rgba(252,171,16,0.3)';\nexport const RemovedRedBackground = 'rgba(248,51,60,0.3)';\nexport const AddedGreen = '#17c8a3';\nexport const AddedDarkGreen = '#1b6d5c';\nexport const ChangedYellow = '#c8b768';\nexport const RemovedRed = '#c86363';\nexport const OpticBlue = '#1B2958';\nexport const SubtleBlueBackground = '#F5F6FA';\n\nexport const methodColors = {\n  OPTIONS: '#686868',\n  GET: '#52e2a3',\n  POST: '#5aaad1',\n  PUT: '#ee7517',\n  PATCH: '#c8a5dc',\n  DELETE: '#cd8d8c',\n};\n\nexport const methodColorsDark = {\n  OPTIONS: '#686868',\n  GET: '#276c4e',\n  POST: '#264859',\n  PUT: '#69340a',\n  PATCH: '#796384',\n  DELETE: '#634444',\n};\n\nexport const appTheme = createMuiTheme({\n  palette: {\n    primary: { main: primary },\n    secondary: { main: secondary },\n    updated: { main: UpdatedBlue, background: UpdatedBlueBackground },\n    changed: { main: ChangedYellow, background: ChangedYellowBackground },\n    added: { main: AddedGreen, background: AddedGreenBackground },\n    removed: { main: RemovedRed, background: RemovedRedBackground },\n    info: {\n      main: \"#323232\"\n    },\n\n    httpMethods: {\n      OPTIONS: { main: methodColors.OPTIONS, dark: methodColorsDark.OPTIONS },\n      GET: { main: methodColors.GET, dark: methodColorsDark.GET },\n      POST: { main: methodColors.POST, dark: methodColorsDark.POST },\n      PUT: { main: methodColors.PUT, dark: methodColorsDark.PUT },\n      PATCH: { main: methodColors.PATCH, dark: methodColorsDark.PATCH },\n      DELETE: { main: methodColors.DELETE, dark: methodColorsDark.DELETE },\n    },\n  },\n  typography: {\n    // Use the system font instead of the default Roboto font.\n    fontFamily: ['Ubuntu', 'Inter'],\n  },\n  overrides: {\n    MuiSnackbarContent: {\n      root: {\n        '&[class*=\"variantInfo\"]': {\n          backgroundColor: SubtleBlueBackground,\n        },\n      }\n    },\n  }\n});\n\n\nexport const ColorButton = withStyles(() => ({\n  root: {\n    color: \"white\",\n    backgroundColor: \"#4696FF\",\n    '&:hover': {\n      backgroundColor: \"#71ABFF\",\n    },\n  },\n}))(Button);","import React, { useContext, useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport { DocDarkGrey, DocDivider } from '../../docs/DocConstants';\nimport {\n  Button,\n  CardActions,\n  Checkbox,\n  Collapse,\n  ListItemAvatar,\n} from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport MenuOpenIcon from '@material-ui/icons/MenuOpen';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport classNames from 'classnames';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport {\n  NewBodyDiffRendered,\n  UserEnabledInferPolymorphism,\n} from '@useoptic/analytics/lib/events/diffs';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord';\nimport {\n  CompareEquality,\n  filterScala,\n  getIndex,\n  getOrUndefined,\n  getOrUndefinedJson,\n  headOrUndefined,\n  JsonHelper,\n  lengthScala,\n  mapScala,\n  toOption,\n} from '@useoptic/domain';\nimport { DiffContext, withDiffContext } from './DiffContext';\nimport {\n  AddedGreenBackground,\n  ChangedYellowBackground,\n  RemovedRedBackground,\n  UpdatedBlue,\n} from '../../../theme';\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport Card from '@material-ui/core/Card';\nimport IconButton from '@material-ui/core/IconButton';\nimport { PulsingOptic } from './DiffHelperCard';\nimport { DiffToolTip } from './shape_viewers/styles';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { RfcContext } from '../../../contexts/RfcContext';\nimport DiffHunkViewer from './DiffHunkViewer';\nimport InteractionBodyViewer from './shape_viewers/InteractionBodyViewer';\nimport { ShapeExpandedStore } from './shape_viewers/ShapeRenderContext';\nimport { ShapeBox } from './DiffReviewExpanded';\nimport { ShapeOnlyViewer } from './shape_viewers/ShapeOnlyShapeRows';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport { LightTooltip } from '../../tooltips/LightTooltip';\nimport { useCaptureContext } from '../../../contexts/CaptureContext';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport {\n  useDiffDescription,\n  useInitialBodyPreview,\n  useInteractionWithPointer,\n} from './DiffHooks';\nimport { Show } from '../../shared/Show';\nimport { trackUserEvent } from '../../../Analytics';\nimport { ShowInitialDocumentingView } from '@useoptic/analytics/lib/events/diffs';\nfunction _NewRegions(props) {\n  const { newRegions, ignoreDiff, captureId, endpointId } = props;\n\n  const classes = useStyles();\n\n  const { acceptSuggestion } = useContext(DiffContext);\n  const { diffService, captureService } = useCaptureContext();\n\n  const [deselected, setDeselected] = useState([]);\n  const [finished, setFinished] = useState(false);\n  const [showExpanded, setShowExpanded] = useState(false);\n  const [inferPolymorphism, setInferPolymorphism] = React.useState(false);\n\n  useEffect(() => {\n    trackUserEvent(ShowInitialDocumentingView.withProps({}));\n  }, []);\n\n  if (newRegions.length === 0) {\n    return null;\n  }\n\n  const isDeselected = (diff) =>\n    !!deselected.find((i) => CompareEquality.between(i, diff.diff));\n  const onChange = (diff) => (e) => {\n    if (!e.target.checked) {\n      setDeselected([...deselected, diff.diff]);\n    } else {\n      setDeselected(\n        deselected.filter((i) => !CompareEquality.between(i, diff.diff))\n      );\n    }\n  };\n\n  const onApply = async () => {\n    setFinished(true);\n    const allIgnored = newRegions\n      .filter((diffBlock) => isDeselected(diffBlock))\n      .map((i) => i.diff);\n\n    ignoreDiff(...allIgnored);\n\n    const allApproved = await Promise.all(\n      newRegions\n        .filter((diffBlock) => !isDeselected(diffBlock))\n        .map(async (i) => {\n          //@todo this is messy and doubles the compute\n          const { interaction } = await captureService.loadInteraction(\n            i.firstInteractionPointer\n          );\n\n          const cacheKey = i.toString() + inferPolymorphism.toString();\n          const cached = window.naiveCache && window.naiveCache[cacheKey];\n          //@todo this dups something large. @dev good spot for the state chart\n          const { suggestion } = cached\n            ? cached\n            : await diffService.loadInitialPreview(\n                i,\n                JsonHelper.fromInteraction(interaction),\n                inferPolymorphism\n              );\n\n          return getOrUndefined(suggestion);\n        })\n    );\n\n    // track('Documented Changes');\n\n    acceptSuggestion(...allApproved);\n  };\n\n  const ignoreAll = () => {\n    const allIgnored = newRegions.map((i) => i.diff);\n    ignoreDiff(...allIgnored);\n  };\n\n  const newRequests =\n    !finished &&\n    newRegions\n      .map((diff) => {\n        if (diff.inRequest) {\n          return (\n            <PreviewNewBodyRegion\n              diff={diff}\n              key={diff.diff.toString()}\n              isDeselected={isDeselected}\n              onChange={onChange}\n              inferPolymorphism={inferPolymorphism}\n              endpointId={endpointId}\n            />\n          );\n        }\n      })\n      .filter((i) => !!i);\n\n  const newResponses =\n    !finished &&\n    newRegions\n      .map((diff) => {\n        if (diff.inResponse) {\n          return (\n            <PreviewNewBodyRegion\n              diff={diff}\n              isDeselected={isDeselected}\n              onChange={onChange}\n              key={diff.diff.toString()}\n              inferPolymorphism={inferPolymorphism}\n              endpointId={endpointId}\n            />\n          );\n        }\n      })\n      .filter((i) => !!i);\n\n  if (newRequests.length || newResponses.length) {\n    trackUserEvent(\n      NewBodyDiffRendered.withProps({\n        requestCount: newRequests.length,\n        responseCount: newResponses.length,\n        regions: [\n          ...newRequests.map((i) => i.locationString),\n          ...newResponses.map((i) => i.locationString),\n        ],\n      })\n    );\n  }\n\n  // track('Show Initial Documentation Page', props);\n\n  const approveCount =\n    newResponses.length + newRequests.length - deselected.length;\n\n  return (\n    <>\n      <Card className={classes.header} elevation={2}>\n        <div style={{ flex: 1 }}>\n          <Typography variant=\"h5\" color=\"primary\" style={{ fontSize: 22 }}>\n            Generate Initial Documentation\n          </Typography>\n        </div>\n        <div className={classes.approveNewRegions}>\n          <LightTooltip\n            title={\n              <div style={{ display: 'flex', flexDirection: 'column' }}>\n                When you turn this option on, Optic will try to infer which\n                fields are Optional, Nullable or OneOfs in your bodies. This can\n                save you a lot of time when documenting large APIs. Leave this\n                option disabled to review the polymorphism in your API manually.\n                <Typography\n                  variant=\"caption\"\n                  style={{ marginTop: 12, color: DocDarkGrey }}\n                >\n                  A random 20 examples from this capture will be used for the\n                  inference, it may not catch everything.{' '}\n                </Typography>\n              </div>\n            }\n          >\n            <FormControlLabel\n              style={{ marginRight: 12 }}\n              control={\n                <Switch\n                  size=\"medium\"\n                  checked={inferPolymorphism}\n                  disabled={finished}\n                  onChange={(e) => {\n                    setInferPolymorphism(e.target.checked);\n                    if (e.target.checked) {\n                      trackUserEvent(\n                        UserEnabledInferPolymorphism.withProps({\n                          captureId,\n                          endpointId,\n                        })\n                      );\n                    }\n                  }}\n                  color=\"primary\"\n                />\n              }\n              labelPlacement=\"start\"\n              label={\n                <Typography\n                  variant=\"body1\"\n                  color=\"textSecondary\"\n                  style={{ fontSize: 12 }}\n                >\n                  Infer Polymorphism\n                </Typography>\n              }\n            />\n          </LightTooltip>\n          <Button\n            size=\"small\"\n            color=\"default\"\n            onClick={ignoreAll}\n            disabled={finished}\n            style={{ marginRight: 10 }}\n          >\n            Ignore All\n          </Button>\n          <Button\n            size=\"small\"\n            color=\"primary\"\n            variant=\"contained\"\n            disabled={approveCount === 0 || finished}\n            onClick={onApply}\n          >\n            Document ({approveCount || ''}) bodies\n          </Button>\n        </div>\n        {finished && <LinearProgress />}\n      </Card>\n\n      {!finished && (\n        <div className={classes.wrapper}>\n          <div className={classes.diffsNewRegion}>\n            {newRequests.length > 0 && (\n              <div className={classes.region}>\n                <Typography variant=\"h6\" color=\"primary\">\n                  Requests\n                </Typography>\n                {newRequests}\n              </div>\n            )}\n\n            <Show when={newRequests.length}>\n              <DocDivider style={{ marginTop: 30, marginBottom: 20 }} />\n            </Show>\n\n            {newResponses.length > 0 && (\n              <div className={classes.region}>\n                <Typography variant=\"h6\" color=\"primary\">\n                  Responses\n                </Typography>\n                {newResponses}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport class NewRegions extends React.Component {\n  shouldComponentUpdate(nextProps, nextState, nextContext) {\n    const result = CompareEquality.between(\n      nextProps.newRegions,\n      this.props.newRegions\n    );\n\n    //@todo add ignore here\n    return !result;\n  }\n\n  render() {\n    console.log('rendering all over again');\n    return <_NewRegions {...this.props} />;\n  }\n}\n\nexport const BreadcumbX = (props) => {\n  const classes = useStyles();\n  const { location, itemStyles } = props;\n  return (\n    <Breadcrumbs\n      className={classes.location}\n      separator={<span style={{ fontSize: 13, ...itemStyles }}>{'›'}</span>}\n      aria-label=\"breadcrumb\"\n    >\n      {location\n        .filter((i) => !!i)\n        .map((n) => (\n          <Typography\n            key={n}\n            style={itemStyles}\n            className={classes.crumb}\n            color=\"primary\"\n          >\n            {n}\n          </Typography>\n        ))}\n    </Breadcrumbs>\n  );\n};\n\nconst PreviewNewBodyRegion = ({\n  diff,\n  inferPolymorphism,\n  isDeselected,\n  onChange,\n  endpointId,\n}) => {\n  const isChecked = !isDeselected(diff);\n  const classes = useStyles();\n  const length = diff.interactionsCount;\n\n  const [interactionIndex, setInteractionIndex] = React.useState(1);\n\n  useEffect(() => {\n    setInteractionIndex(1);\n  }, [diff.diff ? diff.diff.toString() : undefined]);\n\n  const currentInteractionPointer = getIndex(diff.interactionPointers)(\n    interactionIndex - 1\n  );\n\n  const currentInteraction = useInteractionWithPointer(\n    currentInteractionPointer\n  );\n\n  const { preview: initialBody, loadingInferPoly } = useInitialBodyPreview(\n    diff,\n    currentInteraction && currentInteraction.interactionScala,\n    inferPolymorphism,\n    endpointId\n  );\n\n  if (!currentInteraction || !initialBody || loadingInferPoly) {\n    return <LinearProgress />;\n  }\n\n  const body = diff.inRequest\n    ? currentInteraction.interactionScala.request.body\n    : currentInteraction.interactionScala.response.body;\n  const hasRenderableBody = !!getOrUndefined(body.jsonOption);\n\n  const bodyPreview = getOrUndefined(initialBody.bodyPreview);\n  const shapePreview = getOrUndefined(initialBody.shapePreview);\n\n  return (\n    <>\n      <Card className={classes.regionHeader} elevation={2}>\n        <Checkbox\n          checked={isChecked}\n          onChange={onChange(diff)}\n          color=\"primary\"\n        />\n        <ListItemText\n          className={classNames({\n            [classes.uncheckedText]: !isChecked,\n          })}\n          primary={\n            diff.inRequest\n              ? getOrUndefined(diff.contentType) || 'No Body'\n              : `${getOrUndefined(diff.statusCode)} Response ${\n                  getOrUndefined(diff.contentType) || 'No Body'\n                }`\n          }\n          secondary={`Observed ${diff.interactionsCount} times`}\n          primaryTypographyProps={{ style: { fontSize: 14 } }}\n          secondaryTypographyProps={{ style: { fontSize: 12 } }}\n        />\n\n        <div style={{ flex: 1 }} />\n        {length > 1 && getOrUndefined(diff.contentType) && (\n          <Pagination\n            color=\"primary\"\n            className={classNames({ [classes.unchecked]: !isChecked })}\n            style={{ display: 'flex' }}\n            count={length}\n            page={interactionIndex}\n            showLastButton={length > 5}\n            size=\"small\"\n            onChange={(e, pageNumber) => setInteractionIndex(pageNumber)}\n          />\n        )}\n      </Card>\n\n      <div\n        className={classNames(classes.newContentPreview, {\n          [classes.unchecked]: !isChecked,\n        })}\n      >\n        <div style={{ width: '55%', paddingRight: 15 }}>\n          {process.env.REACT_APP_FLATTENED_SHAPE_VIEWER == 'true'\n            ? hasRenderableBody && (\n                <ShapeBox\n                  header={\n                    <div style={{ display: 'flex', alignItems: 'center' }}>\n                      <BreadcumbX\n                        itemStyles={{ fontSize: 13, color: 'white' }}\n                        location={['Example']}\n                      />\n                      <div style={{ flex: 1 }}></div>\n                      <span style={{ color: 'white' }}>⮕</span>\n                    </div>\n                  }\n                >\n                  <InteractionBodyViewer body={body} />\n                </ShapeBox>\n              )\n            : process.env.REACT_APP_FLATTENED_SHAPE_VIEWER !== 'true' &&\n              bodyPreview && (\n                <ShapeBox\n                  header={\n                    <div style={{ display: 'flex', alignItems: 'center' }}>\n                      <BreadcumbX\n                        itemStyles={{ fontSize: 13, color: 'white' }}\n                        location={['Example']}\n                      />\n                      <div style={{ flex: 1 }}></div>\n                      <span style={{ color: 'white' }}>⮕</span>\n                    </div>\n                  }\n                >\n                  <ShapeExpandedStore>\n                    <DiffHunkViewer preview={bodyPreview} exampleOnly />\n                  </ShapeExpandedStore>\n                </ShapeBox>\n              )}\n        </div>\n        <div style={{ flex: 1 }}>\n          {shapePreview && (\n            <ShapeBox\n              header={\n                <BreadcumbX\n                  itemStyles={{ fontSize: 13, color: 'white' }}\n                  location={['Documented Shape']}\n                />\n              }\n            >\n              <ShapeExpandedStore>\n                <ShapeOnlyViewer preview={shapePreview} exampleOnly />\n              </ShapeExpandedStore>\n            </ShapeBox>\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  },\n  blur: {\n    opacity: 0.3,\n    pointerEvents: 'none',\n  },\n  header: {\n    backgroundColor: 'white',\n    padding: 8,\n    paddingLeft: 12,\n    display: 'flex',\n    justifyContent: 'center',\n    position: 'sticky',\n    top: 0,\n    zIndex: 500,\n    alignItems: 'center',\n  },\n  region: {\n    padding: 5,\n  },\n  regionHeader: {\n    display: 'flex',\n    flexDirection: 'row',\n    marginTop: 16,\n    paddingRight: 12,\n  },\n  approveNewRegions: {\n    paddingRight: 10,\n  },\n  newContentPreview: {\n    paddingTop: 16,\n    paddingRight: 8,\n    display: 'flex',\n    flexDirection: 'row',\n  },\n  unchecked: {\n    pointerEvents: 'none',\n    opacity: 0.38,\n  },\n  uncheckedText: {\n    pointerEvents: 'none',\n    opacity: 0.68,\n  },\n  hunkHeader: {\n    paddingRight: 10,\n    paddingTop: 5,\n    paddingBottom: 5,\n    color: '#25292e',\n    minHeight: 40,\n    fontWeight: 800,\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'start',\n    justifyContent: 'start',\n  },\n  location: {\n    marginLeft: 12,\n  },\n  diff: {\n    fontSize: 12,\n    fontWeight: 600,\n    color: '#f8333c',\n    marginLeft: 11,\n    flex: 1,\n    paddingLeft: 30,\n  },\n  crumb: {\n    fontSize: 12,\n    textTransform: 'uppercase',\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(17),\n    padding: 0,\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  wrapper: {\n    overflow: 'hidden',\n    paddingTop: 18,\n  },\n  hunk: {\n    backgroundColor: 'white',\n    minHeight: 300,\n  },\n  subheader: {\n    fontWeight: 100,\n    paddingBottom: 0,\n    marginBottom: 0,\n    height: 33,\n  },\n  diffsNewRegion: {\n    display: 'flex',\n    flexDirection: 'column',\n    paddingLeft: 5,\n    justifyContent: 'center',\n  },\n}));\n\nconst addition = (\n  <FiberManualRecordIcon\n    style={{ width: '.7em', height: '.7em', color: AddedGreenBackground }}\n  />\n);\n\nconst update = (\n  <FiberManualRecordIcon\n    style={{ width: '.7em', height: '.7em', color: ChangedYellowBackground }}\n  />\n);\n\nconst removal = (\n  <FiberManualRecordIcon\n    style={{ width: '.7em', height: '.7em', color: RemovedRedBackground }}\n  />\n);\n","import withStyles from '@material-ui/core/styles/withStyles';\nimport Tab from '@material-ui/core/Tab';\nimport React from 'react';\nimport { primary } from '../../../theme';\n\nexport const CustomNavTab = withStyles((theme) => {\n  return {\n    root: {\n      textTransform: 'none',\n      color: primary,\n      padding: 0,\n      marginTop: 5,\n      height: 35,\n      minHeight: 'inherit',\n      minWidth: 'inherit',\n      fontWeight: 500,\n      textAlign: 'left',\n      fontSize: theme.typography.pxToRem(13),\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      marginRight: theme.spacing(2),\n      '&:focus': {\n        opacity: 1,\n      },\n    },\n    wrapper: {\n      alignItems: 'flex-start',\n    },\n  };\n})((props) => <Tab disableRipple {...props} />);\n\nexport const CustomNavTabDense = withStyles((theme) => {\n  return {\n    root: {\n      textTransform: 'none',\n      color: primary,\n      padding: 0,\n      marginTop: 5,\n      height: 20,\n      minHeight: 'inherit',\n      minWidth: 'inherit',\n      fontWeight: 500,\n      textAlign: 'left',\n      fontSize: theme.typography.pxToRem(12),\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      marginRight: theme.spacing(2),\n      '&:focus': {\n        opacity: 1,\n      },\n    },\n    wrapper: {\n      alignItems: 'flex-start',\n    },\n  };\n})((props) => (\n  <Tab\n    disableRipple\n    {...props}\n    label={\n      <div style={{ display: 'flex', width: '100%' }}>\n        <div style={{ flex: 1 }}>{props.label}</div>\n        <div>{props.count}</div>\n      </div>\n    }\n  />\n));\n","import Divider from '@material-ui/core/Divider';\nimport React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { primary } from '../../theme';\n\nexport const SubHeadingTitleColor = primary;\nexport const DocGrey = '#a3acb9';\nexport const DocDarkGrey = '#818892';\nexport const Dark = '#3d4045';\nexport const ParametersStyles = {\n  fontWeight: 600,\n  fontSize: 13,\n};\nexport const SubHeadingStyles = {\n  color: SubHeadingTitleColor,\n  fontWeight: 600,\n  letterSpacing: '.41px',\n  textTransform: 'none',\n};\nexport const DocSubGroupHeadingStyles = {\n  color: DocGrey,\n  fontSize: '12px',\n  fontWeight: 500,\n  letterSpacing: '.41px',\n};\nexport const DocSubGroupHeadingBigStyles = {\n  color: DocDarkGrey,\n  fontSize: '15px',\n  fontWeight: 500,\n  letterSpacing: '.41px',\n};\n\nexport const methodColors = {\n  GET: '#52e2a3',\n  POST: '#5aaad1',\n  PUT: '#ee7517',\n  PATCH: '#c8a5dc',\n  DELETE: '#cd8d8c',\n};\n\nexport const methodColorsDark = {\n  GET: '#276c4e',\n  POST: '#264859',\n  PUT: '#69340a',\n  PATCH: '#796384',\n  DELETE: '#634444',\n};\n\nexport const primitiveDocColors = {\n  $string: '#00f2ff',\n  $number: '#e0ff00',\n  $boolean: '#ff9868',\n  $object: '#00ec57',\n  $list: '#d3c90a',\n  $map: '#7d521f',\n  $unknown: '#027a7d',\n};\n\nexport const DocDivider = ({ style }) => (\n  <Divider style={{ ...style, backgroundColor: '#e3e8ee' }} />\n);\nexport const DocSubHeading = ({ title, onClick }) => (\n  <Typography onClick={onClick} variant=\"h5\" style={SubHeadingStyles}>\n    {' '}\n    {title}{' '}\n  </Typography>\n);\n","import React, { useContext, useEffect, useState } from 'react';\nimport { TextField, Typography } from '@material-ui/core';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport classNames from 'classnames';\nimport {\n  AddedGreenBackground,\n  ChangedYellowBackground,\n  RemovedRedBackground,\n} from '../../../../theme';\nimport {\n  ShapeExpandedContext,\n  ShapeRenderContext,\n  ShapeRenderStore,\n  withShapeRenderContext,\n} from './ShapeRenderContext';\nimport {\n  getOrUndefined,\n  getOrUndefinedJson,\n  lengthScala,\n  mapScala,\n  toOption,\n} from '@useoptic/domain';\n\nimport {\n  HiddenItemEllipsis,\n  SymbolColor,\n  Symbols,\n  TypeName,\n  useColor,\n  useShapeViewerStyles,\n} from './styles';\nimport { DepthContext, Indent, IndentIncrement } from './Indent';\nimport Paper from '@material-ui/core/Paper';\nimport Collapse from '@material-ui/core/Collapse';\nimport { RfcContext } from '../../../../contexts/RfcContext';\nimport { DESCRIPTION } from '../../../../ContributionKeys';\nimport IconButton from '@material-ui/core/IconButton';\nimport { LightTooltip } from '../../../tooltips/LightTooltip';\nimport {\n  FieldDescriptionMarkdownRender,\n  MarkdownRender,\n} from '../../../docs/DocContribution';\nimport { commandsForUpdatingContribution } from '../../../../engine/routines';\n\nexport function ShapeOnlyViewer(props) {\n  const { preview, exampleOnly } = props;\n  const classes = useShapeViewerStyles();\n\n  if (!preview) {\n    return null;\n  }\n\n  const rootShape = preview.rootId;\n  const shape = getOrUndefined(preview.getRootShape);\n\n  if (!shape) {\n    throw new Error('Could not render root shape');\n  }\n\n  return (\n    <ShapeRenderStore\n      shape={preview}\n      hideDivider={true}\n      exampleOnly={exampleOnly}\n    >\n      <div className={classes.root}>\n        <DepthContext.Provider value={{ depth: 0 }}>\n          {renderShape(shape)}\n        </DepthContext.Provider>\n      </div>\n    </ShapeRenderStore>\n  );\n}\n\nfunction renderShape(shape, nested) {\n  if (!shape) {\n    return null;\n  }\n\n  switch (shape.baseShapeId) {\n    case '$object':\n      return <ObjectRender shape={shape} nested={Boolean(nested)} />;\n      break;\n    default:\n      return <AnyShape shape={shape} />;\n  }\n}\n\nexport const AnyShape = (props) => {\n  const classes = useShapeViewerStyles();\n  const { shapeRender } = useContext(ShapeRenderContext);\n  const { shape } = props;\n\n  const [renderChild, setRenderChild] = useState(null);\n\n  useEffect(() => {\n    setRenderChild(null);\n  }, [shape]);\n\n  const setType = (link) => {\n    if (link === renderChild) {\n      return setRenderChild(null);\n    }\n    setRenderChild(link);\n  };\n\n  return (\n    <>\n      <Row\n        left={(() => {\n          return (\n            <Indent>\n              <div className={classes.rowContents}>\n                <div style={{ flex: 1, paddingLeft: 4 }}>\n                  <TypeName typeName={shape.name} onTypeClick={setType} />\n                </div>\n              </div>\n            </Indent>\n          );\n        })()}\n      />\n      <Collapse in={!!renderChild}>\n        {renderChild && (\n          <Indent add={2}>\n            <Paper className={classes.nested} elevation={6}>\n              <DepthContext.Provider value={{ depth: 0 }}>\n                {renderShape(\n                  getOrUndefined(shapeRender.getSpecShape(renderChild))\n                )}\n              </DepthContext.Provider>\n            </Paper>\n          </Indent>\n        )}\n      </Collapse>\n    </>\n  );\n};\n\nexport const Row = withShapeRenderContext((props) => {\n  const classes = useShapeViewerStyles();\n\n  const { exampleOnly, onLeftClick, stayHighlighted, hideDivider } = props;\n\n  const rowHighlightColor = (() => {\n    if (props.highlight === 'Addition') {\n      return AddedGreenBackground;\n    } else if (props.highlight === 'Update') {\n      return ChangedYellowBackground;\n    } else if (props.highlight === 'Removal') {\n      return RemovedRedBackground;\n    }\n  })();\n\n  return (\n    <div\n      className={classNames(classes.row, {\n        [classes.stayHighlighted]: stayHighlighted,\n        [classes.rowWithHover]: !props.noHover,\n      })}\n      style={{ backgroundColor: rowHighlightColor }}\n    >\n      <div className={classes.left} onClick={onLeftClick}>\n        {props.left}\n      </div>\n      {!exampleOnly && !hideDivider && (\n        <div className={classes.spacerBorder}>\n          {' '.replace(/ /g, '\\u00a0')}\n        </div>\n      )}\n      {!exampleOnly && (\n        <div className={classes.right} style={{ width: '50%' }}>\n          {props.right}\n        </div>\n      )}\n    </div>\n  );\n});\n\nexport const ObjectRender = withShapeRenderContext((props) => {\n  const classes = useShapeViewerStyles();\n  const { shapeRender, shape, nested } = props;\n  const fields = shape.fields;\n  return (\n    <>\n      {!nested && <Row left={<Symbols>{'{'}</Symbols>} noHover />}\n      {mapScala(fields)((field) => (\n        <FieldRow field={field} />\n      ))}\n      <IndentIncrement>\n        <Row left={<Symbols withIndent>{'}'}</Symbols>} noHover />\n      </IndentIncrement>\n    </>\n  );\n});\n\n// export const ListRender = withShapeRenderContext((props) => {\n//   const classes = useShapeViewerStyles();\n//   const {shapeRender, shape, nested} = props;\n//   const listId = shape.shapeId;\n//   const listItem = getOrUndefined(shapeRender.listItemShape(listId));\n//\n//\n//   const {showAllLists} = useContext(ShapeExpandedContext);\n//\n//   const items = shapeRender.resolvedItems(shape.shapeId, !showAllLists.includes(listId));\n//\n//   return (\n//     <>\n//       {!nested && <Row left={<Symbols>{'['}</Symbols>} noHover/>}\n//       {mapScala(items)((item, index) => {\n//         return <ItemRow item={item}\n//                         listItemShape={listItem}\n//                         listId={listId}\n//                         isLast={index - 1 === lengthScala(items)}/>;\n//       })}\n//       <IndentIncrement><Row left={<Symbols withIndent>{']'}</Symbols>} noHover/></IndentIncrement>\n//     </>\n//   );\n// });\n\nfunction FieldName({ children, missing }) {\n  const classes = useShapeViewerStyles();\n  return (\n    <Typography\n      variant=\"caption\"\n      className={classes.fieldName}\n      style={{ opacity: missing ? 0.4 : 1 }}\n    >\n      {children}:\n    </Typography>\n  );\n}\n\nfunction IndexMarker({ children }) {\n  const classes = useShapeViewerStyles();\n  return (\n    <Typography variant=\"caption\" className={classes.indexMarker}>\n      {children}:\n    </Typography>\n  );\n}\n\nfunction ValueRows({ shape }) {\n  const classes = useShapeViewerStyles();\n  return <IndentIncrement add={1}>{renderShape(shape, true)}</IndentIncrement>;\n}\n\nfunction FieldDescription({ fieldId }) {\n  const classes = useShapeViewerStyles();\n  const { cachedQueryResults, handleCommands } = useContext(RfcContext);\n  const { contributions } = cachedQueryResults;\n\n  const description = contributions.getOrUndefined(fieldId, DESCRIPTION);\n\n  const [editing, _setEditing] = useState(false);\n  const setEditing = (condition) => {\n    if (process.env.REACT_APP_SPEC_ENABLE_EDITING === 'no') { return; }\n    _setEditing(condition);\n  }\n  const [stagedContent, setStagedContent] = useState(description || '');\n\n  const handleChange = (e) => setStagedContent(e.target.value);\n  const displayDescription = description || stagedContent;\n  const finalize = () => {\n    if (stagedContent !== description) {\n      handleCommands(\n        ...commandsForUpdatingContribution(fieldId, DESCRIPTION, stagedContent)\n      );\n    }\n    setEditing(false);\n  };\n\n  return (\n    <div\n      className={classes.fieldDescription}\n      style={{ justifyContent: 'flex-end' }}\n    >\n      {editing && (\n        <TextField\n          value={stagedContent}\n          onChange={handleChange}\n          onBlur={finalize}\n          autoFocus\n          fullWidth={true}\n          multiline={true}\n          inputProps={{ onBlur: finalize, style: { color: SymbolColor } }}\n          size=\"small\"\n        />\n      )}\n      {!editing && displayDescription && (\n        <div style={{ flex: 1 }} onClick={() => setEditing(true)}>\n          <FieldDescriptionMarkdownRender\n            source={displayDescription}\n            noHeadings={true}\n          />\n        </div>\n      )}\n      {!description && !editing && process.env.REACT_APP_SPEC_ENABLE_EDITING !== 'no' && (\n        <LightTooltip title=\"Add Field Description\">\n          <DescriptionIcon\n            className={'descriptionButton'}\n            onClick={() => setEditing(true)}\n            style={{\n              width: 15,\n              display: 'none',\n              height: 15,\n              cursor: 'pointer',\n              color: SymbolColor,\n            }}\n            color=\"primary\"\n          />\n        </LightTooltip>\n      )}\n    </div>\n  );\n}\n\nexport const FieldRow = withShapeRenderContext((props) => {\n  const classes = useShapeViewerStyles();\n  const { field, shapeRender } = props;\n  const fieldName = field.fieldName;\n  const fieldShape = field.shape;\n\n  const fieldId = field.specFieldId;\n\n  const [renderChild, setRenderChild] = useState(null);\n\n  useEffect(() => {\n    setRenderChild(null);\n  }, [fieldShape]);\n\n  const setType = (link) => {\n    if (link === renderChild) {\n      return setRenderChild(null);\n    }\n    setRenderChild(link);\n  };\n\n  return (\n    <>\n      <Row\n        stayHighlighted={Boolean(renderChild)}\n        left={\n          <Indent>\n            <div className={classes.rowContents}>\n              <div>\n                <FieldName>{fieldName}</FieldName>\n              </div>\n              <div style={{ flex: 1, paddingLeft: 4 }}>\n                {fieldShape.isObject ? (\n                  <Symbols children={'{'} />\n                ) : (\n                  <TypeName typeName={fieldShape.name} onTypeClick={setType} />\n                )}\n              </div>\n            </div>\n          </Indent>\n        }\n        right={<FieldDescription fieldId={fieldId} />}\n      />\n      {/* this will insert nested rows */}\n      {fieldShape && fieldShape.isObject ? (\n        <ValueRows shape={fieldShape} />\n      ) : (\n        <Collapse in={!!renderChild}>\n          {renderChild && (\n            <Indent add={2}>\n              <Paper className={classes.nested} elevation={6}>\n                <DepthContext.Provider value={{ depth: 0 }}>\n                  {renderShape(\n                    getOrUndefined(shapeRender.getSpecShape(renderChild))\n                  )}\n                </DepthContext.Provider>\n              </Paper>\n            </Indent>\n          )}\n        </Collapse>\n      )}\n    </>\n  );\n});\n\n// export const ItemRow = withShapeRenderContext((props) => {\n//   const classes = useShapeViewerStyles();\n//   const {item, shapeRender, isLast, listId, listItemShape} = props;\n//\n//   const resolvedShape = getOrUndefined(shapeRender.resolveItemShape(toOption(listItemShape))) || getOrUndefined(shapeRender.resolveItemShapeFromShapeId(item.item.shapeId));\n//\n//\n//   return (\n//     <>\n//       <Row\n//         left={(() => {\n//\n//           if (item.display === 'hidden') {\n//             return <Indent><HiddenItemEllipsis expandId={listId}/></Indent>;\n//           }\n//\n//           return (<Indent>\n//               <div className={classes.rowContents}>\n//                 <IndexMarker>{item.index}</IndexMarker>\n//                 <div style={{flex: 1, paddingLeft: 4}}>\n//                   <TypeName typeName={resolvedShape.name} />\n//                 </div>\n//               </div>\n//             </Indent>\n//           );\n//         })()}\n//       />\n//       {item.display !== 'hidden' &&\n//       <ValueRows value={getOrUndefinedJson(item.item.exampleValue)} shape={resolvedShape}/>}\n//     </>\n//   );\n// });\n","import React from 'react';\nimport { Button } from '@material-ui/core';\n\nexport const NeedHelp = () => {\n  const askForHelp = () => {\n    window.Intercom('showNewMessage', 'Hey Optic team, I have a question!');\n    window.Intercom('update', { hide_default_launcher: false });\n  };\n  return (\n    <Button color=\"secondary\" onClick={askForHelp}>\n      Need Help?\n    </Button>\n  );\n};\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ReactMarkdown from 'react-markdown';\nimport { Button, Typography } from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport { DocDivider } from '../docs/DocConstants';\nimport { secondary } from '../../theme';\nimport { NeedHelp } from './NeedHelpButton';\n\nconst useStyles = makeStyles((theme) => ({\n  header: {\n    textAlign: 'center',\n    marginBottom: 22,\n  },\n  paper: {\n    padding: 20,\n    width: 400,\n    margin: '0px auto',\n    paddingBottom: 10,\n  },\n  inlineCode: {\n    backgroundColor: '#e2e2e2',\n    padding: 2,\n    fontSize: 12,\n    paddingTop: 1,\n    paddingBottom: 1,\n    display: 'inline-block',\n    color: secondary,\n  },\n}));\n\nexport default function EmptyState(props) {\n  const classes = useStyles();\n  const { title, content } = props;\n\n  return (\n    <Paper className={classes.paper}>\n      <div className={classes.header}>\n        <img src=\"/optic-logo.svg\" />\n        <Typography variant=\"h6\" color=\"primary\">\n          {title}\n        </Typography>\n      </div>\n\n      <DocDivider style={{ marginBottom: 30 }} />\n\n      <EmptyStateMarkdown source={content} />\n\n      <div style={{ display: 'flex', marginTop: 15 }}>\n        <div style={{ flex: 1 }} />\n        <NeedHelp />\n      </div>\n    </Paper>\n  );\n}\n\nfunction EmptyStateMarkdown({ source, style }) {\n  const classes = useStyles();\n\n  return (\n    <div style={style}>\n      <ReactMarkdown\n        source={source}\n        renderers={{\n          paragraph: ({ children }) => (\n            <Typography\n              variant=\"body2\"\n              style={{ fontWeight: 200, marginTop: 11, whiteSpace: 'pre-wrap' }}\n            >\n              {children}\n            </Typography>\n          ),\n          inlineCode: ({ children }) => (\n            <Typography className={classes.inlineCode}>{children}</Typography>\n          ),\n        }}\n      />\n    </div>\n  );\n}\n","import React, { useContext } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { primary } from '../../../../theme';\nimport {\n  ShapeExpandedContext,\n  ShapeRenderContext,\n  withShapeRenderContext,\n} from './ShapeRenderContext';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { getOrUndefined, mapScala } from '@useoptic/domain';\nimport { Typography } from '@material-ui/core';\nimport { Indent } from './Indent';\n\nexport const useShapeViewerStyles = makeStyles((theme) => ({\n  root: {\n    paddingTop: 10,\n    paddingBottom: 10,\n    backgroundColor: '#16203F',\n    position: 'relative',\n  },\n  nested: {\n    paddingTop: 10,\n    marginTop: 17,\n    paddingBottom: 10,\n    backgroundColor: '#1c274b',\n  },\n  row: {\n    display: 'flex',\n    padding: 0,\n    paddingLeft: 4,\n    flexDirection: 'row',\n  },\n  rowWithHover: {\n    cursor: 'pointer',\n    '&:hover': {\n      backgroundColor: 'rgba(78,165,255,0.27) !important',\n    },\n    '&:hover .descriptionButton': {\n      display: 'inherit !important',\n    },\n  },\n\n  rowCompass: {\n    width: '100%', // set at runtime to match $right\n    position: 'fixed',\n    display: 'flex',\n    justifyContent: 'flex-end',\n    paddingLeft: 8,\n\n    cursor: 'pointer',\n    animation: '$compassHover 3s ease-in-out infinite',\n    opacity: 0,\n\n    willChange: 'opacity',\n    transition: '0.1s ease-out opacity',\n\n    '&$isAbove': {\n      top: theme.spacing(15),\n      opacity: 1,\n    },\n    '&$isBelow': {\n      bottom: theme.spacing(4),\n      opacity: 1,\n    },\n  },\n\n  '@keyframes compassHover': {\n    '0%': {\n      transform: 'translateY(-2px)',\n    },\n    '50%': {\n      transform: 'translateY(2px)',\n    },\n    '100%': {\n      transform: 'translateY(-2px)',\n    },\n  },\n\n  isAbove: {},\n  isBelow: {},\n\n  rowCompassBody: {\n    position: 'relative',\n    padding: theme.spacing(0.8, 1),\n    marginRight: 8,\n    flexShrink: 0,\n    flexGrow: 1,\n\n    borderRadius: 15,\n  },\n\n  rowCompassDirection: {\n    position: 'absolute',\n    left: '50%',\n    marginLeft: -10,\n    width: theme.typography.pxToRem(20),\n    height: theme.typography.pxToRem(20),\n    flexGrow: 0,\n    flexShrink: 0,\n    fill: '#f8edf4',\n    opacity: 0,\n  },\n\n  rowCompassDirectionDown: {\n    '$isBelow &': {\n      bottom: -28,\n      opacity: 1,\n    },\n  },\n\n  rowCompassDirectionUp: {\n    '$isAbove &': {\n      top: -28,\n      opacity: 1,\n    },\n  },\n\n  fieldDescription: {\n    flex: 1,\n    alignItems: 'center',\n    paddingRight: 15,\n    display: 'flex',\n  },\n  stayHighlighted: {\n    backgroundColor: 'rgba(78,165,255,0.27) !important',\n  },\n  menu: {\n    userSelect: 'none',\n  },\n  suggestion: {\n    fontStyle: 'italic',\n    color: 'white',\n    flex: 1,\n    textAlign: 'right',\n    paddingRight: 10,\n  },\n  hiddenItem: {\n    color: '#070707',\n    fontSize: 10,\n    paddingLeft: 7,\n    paddingRight: 7,\n    backgroundColor: '#ababab',\n    borderRadius: 12,\n  },\n  symbols: {\n    color: '#cfcfcf',\n    fontWeight: 800,\n    fontFamily: \"'Source Code Pro', monospace\",\n  },\n  value: {\n    fontWeight: 600,\n    fontFamily: \"'Source Code Pro', monospace\",\n  },\n  fieldName: {\n    fontWeight: 600,\n    color: '#cfcfcf',\n    fontSize: 12,\n    fontFamily: \"'Source Code Pro', monospace\",\n  },\n  indexMarker: {\n    fontWeight: 500,\n    color: '#9cdcfe',\n    fontSize: 12,\n    fontFamily: \"'Source Code Pro', monospace\",\n  },\n  rowContents: {\n    display: 'flex',\n    alignItems: 'baseline',\n    justifyContent: 'center',\n    flexDirection: 'row',\n  },\n  left: {\n    flexGrow: 1,\n    flexShrink: 1,\n    overflow: 'hidden',\n    display: 'flex',\n    paddingTop: 3,\n    paddingBottom: 3,\n    paddingLeft: 5,\n  },\n  spacerBorder: {\n    maxWidth: 1,\n    backgroundColor: '#4B5A8C',\n    flexGrow: 0,\n    flexShrink: 0,\n  },\n  right: {\n    display: 'flex',\n    paddingLeft: 5,\n    paddingTop: 3,\n    paddingBottom: 3,\n    width: '35%',\n    flexGrow: 0,\n    flexShrink: 0,\n    overflow: 'hidden',\n  },\n  typeName: {\n    display: 'flex',\n    whiteSpace: 'pre',\n    flex: 1,\n    fontWeight: 600,\n    fontFamily: \"'Source Code Pro', monospace\",\n  },\n  assertionMet: {\n    display: 'flex',\n    flex: 1,\n    fontWeight: 400,\n    color: '#646464',\n    fontStyle: 'italic',\n    fontFamily: \"'Source Code Pro', monospace\",\n  },\n  diffAssertion: {\n    color: '#f8edf4',\n    flex: 1,\n    fontSize: 14,\n    fontWeight: 800,\n    fontFamily: \"'Source Code Pro', monospace\",\n  },\n  toolbar: {\n    alignItems: 'flex-start',\n    paddingTop: theme.spacing(1),\n    paddingBottom: theme.spacing(2),\n  },\n  dash: {\n    fontWeight: 500,\n    marginLeft: -10,\n    color: primary,\n  },\n\n  isSticky: {},\n}));\n\nexport const HiddenItemEllipsis = withShapeRenderContext((props) => {\n  const classes = useShapeViewerStyles();\n  const { setShowAllLists } = useContext(ShapeExpandedContext);\n  const { expandId } = props;\n  return (\n    <DiffToolTip placement=\"right\" title=\"(Hidden) Click to Expand\">\n      <div\n        className={classes.hiddenItem}\n        onClick={() => setShowAllLists(expandId, true)}\n      >\n        {'⋯'}\n      </div>\n    </DiffToolTip>\n  );\n});\n\nexport const DiffToolTip = withStyles((theme) => ({\n  tooltip: {\n    backgroundColor: '#2A3B72',\n    color: 'rgba(247, 248, 240, 1)',\n    boxShadow: theme.shadows[1],\n    maxWidth: 200,\n    fontSize: 11,\n    fontWeight: 200,\n    padding: 4,\n  },\n}))(Tooltip);\n\nexport const useColor = {\n  StringColor: '#e29f84',\n  NumberColor: '#09885a',\n  BooleanColor: '#E3662E',\n  ObjectColor: '#30B1C4',\n  ListColor: '#c47078',\n  UnknownColor: '#ffc176',\n  modifier: '#d5d4ff',\n};\n\nexport const SymbolColor = '#cfcfcf';\n\nexport const TypeName = ({ typeName, style, onTypeClick }) => {\n  const classes = useShapeViewerStyles();\n  const { shapeRender } = useContext(ShapeRenderContext);\n\n  if (!typeName) {\n    return null;\n  }\n\n  const coloredComponents = typeName.asColoredString(shapeRender.specShapes);\n\n  return (\n    <div className={classes.typeName}>\n      {mapScala(coloredComponents)((i) => {\n        if (i.text) {\n          const link = getOrUndefined(i.link);\n          const isLink = onTypeClick && link;\n          return (\n            <span\n              onClick={isLink && (() => onTypeClick(link))}\n              style={{\n                color: useColor[i.color] || i.color,\n                whiteSpace: 'pre',\n                textDecoration: isLink && 'underline',\n                cursor: isLink && 'pointer',\n              }}\n            >\n              {i.text}\n            </span>\n          );\n        }\n      })}\n    </div>\n  );\n};\n\nexport function Symbols({ children, withIndent }) {\n  const classes = useShapeViewerStyles();\n\n  const symbol = (\n    <Typography variant=\"caption\" className={classes.symbols}>\n      {children}\n    </Typography>\n  );\n\n  if (withIndent) {\n    return <Indent add={-1}>{symbol}</Indent>;\n  } else {\n    return symbol;\n  }\n}\n","import React from 'react';\nimport { InitialRfcCommandsStore } from '../../contexts/InitialRfcCommandsContext';\nimport { LocalDiffRfcStore } from '../../contexts/RfcContext';\nimport { commandsToJson } from '@useoptic/domain';\nimport { withSpecServiceContext } from '../../contexts/SpecServiceContext';\nimport compose from 'lodash.compose';\nimport sha1 from 'node-sha1';\n\nclass SimulatedCommandContext extends React.Component {\n  render() {\n    const {\n      rfcId,\n      eventStore,\n      commands,\n      shouldSimulate,\n      specService,\n    } = this.props;\n    const initialEventStore = eventStore.getCopy(rfcId);\n    const initialEventsString = eventStore.serializeEvents(rfcId);\n    const initialCommandsString = shouldSimulate\n      ? JSON.stringify(commandsToJson(commands))\n      : null;\n    const hash = sha1(`${initialEventsString}+${initialCommandsString}`);\n    return (\n      <InitialRfcCommandsStore\n        instance=\"the one in simulated command context\"\n        rfcId={rfcId}\n        initialEventsString={initialEventsString}\n        initialCommandsString={initialCommandsString}\n      >\n        <LocalDiffRfcStore\n          specService={specService}\n          initialEventStore={initialEventStore}\n          key={hash}\n        >\n          {this.props.children}\n        </LocalDiffRfcStore>\n      </InitialRfcCommandsStore>\n    );\n  }\n}\n\nexport default compose(withSpecServiceContext)(SimulatedCommandContext);\n","import React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { Typography } from '@material-ui/core';\nimport classNames from 'classnames';\nimport scrollIntoView from 'scroll-into-view-if-needed';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport {\n  AddedGreenBackground,\n  ChangedYellowBackground,\n  RemovedRedBackground,\n  secondary,\n} from '../../../../theme';\nimport {\n  ShapeExpandedContext,\n  ShapeRenderContext,\n  withShapeRenderContext,\n  useDiff,\n} from './ShapeRenderContext';\nimport CheckIcon from '@material-ui/icons/Check';\nimport {\n  getOrUndefined,\n  getOrUndefinedJson,\n  headOrUndefined,\n  JsonHelper,\n  lengthScala,\n  mapScala,\n  getJson,\n  toOption,\n} from '@useoptic/domain';\nimport { withDiffContext } from '../DiffContext';\nimport { DepthContext, Indent, IndentIncrement } from './Indent';\nimport {\n  HiddenItemEllipsis,\n  Symbols,\n  TypeName,\n  useColor,\n  useShapeViewerStyles,\n} from './styles';\nimport { AnyShape } from './ShapeOnlyShapeRows';\n\nexport const DiffViewer = ({ shape }) => {\n  const classes = useShapeViewerStyles();\n  const containerRef = useRef(null);\n  const { ref: compassTargetRef, compassState } = useCompassTargetTracker(true);\n  const { diff, diffDescription } = useDiff();\n\n  useEffect(() => {\n    const containerEl = containerRef.current;\n    compassTargetRef.current = containerEl.querySelector(\n      `.${classes.isTracked} .${classes.right}`\n    );\n\n    return () => {\n      compassTargetRef.current = null;\n    };\n  }, [diff && diff.toString()]); //may be undefined\n\n  const onClickCompass = useCallback(\n    (e) => {\n      e.preventDefault();\n      if (!compassTargetRef.current) return;\n\n      scrollIntoView(compassTargetRef.current, {\n        scrollMode: 'always',\n        block: 'center',\n      });\n    },\n    [diff && diff.toString()] //may be undefined\n  );\n\n  return (\n    <div ref={containerRef} className={classes.root}>\n      <DepthContext.Provider value={{ depth: 0 }}>\n        {renderShape(shape)}\n      </DepthContext.Provider>\n\n      {diff && (\n        <RowCompass\n          changeType={diffDescription.changeTypeAsString}\n          {...compassState}\n          onClick={onClickCompass}\n        />\n      )}\n    </div>\n  );\n};\n\nfunction renderShape(shape, nested) {\n  if (!shape) {\n    return null;\n  }\n\n  switch (shape.baseShapeId) {\n    case '$object':\n      return <ObjectRender shape={shape} nested={Boolean(nested)} />;\n    case '$list':\n      return <ListRender shape={shape} nested={Boolean(nested)} />;\n    default:\n      return (\n        <Row\n          left={<ValueContents shape={shape} value={getJson(shape.example)} />}\n        />\n      );\n  }\n}\n\nfunction getHighlightColor(changeType) {\n  if (changeType === 'Addition') {\n    return AddedGreenBackground;\n  } else if (changeType === 'Update') {\n    return ChangedYellowBackground;\n  } else if (changeType === 'Removal') {\n    return RemovedRedBackground;\n  }\n}\n\nexport const Row = withShapeRenderContext((props) => {\n  const classes = useShapeViewerStyles();\n  const { exampleOnly, onLeftClick } = props;\n\n  const rowHighlightColor = getHighlightColor(props.changeType);\n\n  return (\n    <div\n      className={classNames(classes.row, {\n        [classes.rowWithHover]: !props.noHover,\n        [classes.isTracked]: !!props.tracked, // important for the compass to work\n      })}\n      style={{ backgroundColor: rowHighlightColor }}\n    >\n      <div className={classes.left} onClick={onLeftClick}>\n        {props.left}\n      </div>\n      {!exampleOnly && (\n        <div className={classes.spacerBorder}>\n          {' '.replace(/ /g, '\\u00a0')}\n        </div>\n      )}\n      {!exampleOnly && <div className={classes.right}>{props.right}</div>}\n    </div>\n  );\n});\nRow.displayName = 'ShapeViewer/Row';\n\nfunction RowCompass(props) {\n  const classes = useShapeViewerStyles();\n  const highlightColor = getHighlightColor(props.changeType);\n  const { x, width, isAbove, isBelow } = props;\n\n  return (\n    <div\n      className={classNames(classes.rowCompass, {\n        [classes.isAbove]: isAbove,\n        [classes.isBelow]: isBelow,\n      })}\n      style={{\n        left: x,\n        width,\n      }}\n      onClick={props.onClick}\n    >\n      <div\n        className={classes.rowCompassBody}\n        style={{ backgroundColor: highlightColor }}\n      >\n        <ArrowDownwardIcon\n          className={classNames(\n            classes.rowCompassDirection,\n            classes.rowCompassDirectionDown\n          )}\n        />\n        <ArrowUpwardIcon\n          className={classNames(\n            classes.rowCompassDirection,\n            classes.rowCompassDirectionUp\n          )}\n        />\n\n        <DiffNotif />\n      </div>\n    </div>\n  );\n}\n\nexport const ObjectRender = withShapeRenderContext((props) => {\n  const { shapeRender, shape, nested } = props;\n  const fields = shape.fields;\n\n  return (\n    <>\n      {!nested && (\n        <Row\n          left={<Symbols>{'{'}</Symbols>}\n          right={<AssertionMetTypeName typeName={shape.name} />}\n          noHover\n        />\n      )}\n      {mapScala(fields)((field) => {\n        const key = [field.fieldName, headOrUndefined(field.diffs)].join('-');\n\n        return <FieldRow key={key} field={field} parent={shape} />;\n      })}\n      <IndentIncrement>\n        <Row left={<Symbols withIndent>{'}'}</Symbols>} noHover />\n      </IndentIncrement>\n    </>\n  );\n});\n\nexport const ListRender = withShapeRenderContext((props) => {\n  const classes = useShapeViewerStyles();\n  const { shapeRender, shape, nested } = props;\n  const { showAllLists } = useContext(ShapeExpandedContext);\n\n  const listId = shape.id;\n\n  const items = shape.itemsWithHidden(showAllLists.includes(listId));\n\n  return (\n    <>\n      {!nested && (\n        <Row\n          left={<Symbols>{'['}</Symbols>}\n          right={<AssertionMetTypeName typeName={shape.name} />}\n          noHover\n        />\n      )}\n      {mapScala(items)((item, index) => {\n        return (\n          <ItemRow\n            key={index}\n            item={item}\n            listId={listId}\n            isLast={index - 1 === lengthScala(items)}\n          />\n        );\n      })}\n      <IndentIncrement>\n        <Row left={<Symbols withIndent>{']'}</Symbols>} noHover />\n      </IndentIncrement>\n    </>\n  );\n});\n\nfunction FieldName({ children, missing }) {\n  const classes = useShapeViewerStyles();\n  return (\n    <Typography\n      variant=\"caption\"\n      className={classes.fieldName}\n      style={{ opacity: missing ? 0.4 : 1 }}\n    >\n      {children}:\n    </Typography>\n  );\n}\n\nfunction IndexMarker({ children }) {\n  const classes = useShapeViewerStyles();\n  return (\n    <Typography variant=\"caption\" className={classes.indexMarker}>\n      {children}:\n    </Typography>\n  );\n}\n\nfunction ValueRows({ value, shape }) {\n  const classes = useShapeViewerStyles();\n  const { shapeRender } = useContext(ShapeRenderContext);\n  const jsTypeString = Object.prototype.toString.call(value);\n\n  if (!shape) {\n    return null;\n  }\n\n  if (shape.isOptional || shape.isNullable) {\n    return <ValueRows value={value} shape={shape.innerShape} />;\n  }\n\n  if (jsTypeString === '[object Array]' || jsTypeString === '[object Object]') {\n    return (\n      <IndentIncrement add={1}>{renderShape(shape, true)}</IndentIncrement>\n    );\n  }\n\n  return null;\n}\n\nfunction ValueContents({ value, shape }) {\n  const classes = useShapeViewerStyles();\n  const { shapeRender } = useContext(ShapeRenderContext);\n\n  if (typeof value === 'undefined') {\n    return null;\n  }\n\n  if (!shape) {\n    return null;\n  }\n\n  const jsTypeString = Object.prototype.toString.call(value);\n\n  if (shape.isOptional || shape.isNullable) {\n    return <ValueContents value={value} shape={shape.innerShape} />;\n  }\n\n  if (jsTypeString === '[object Null]') {\n    return <Symbols>{'null'}</Symbols>;\n  }\n\n  if (jsTypeString === '[object Array]') {\n    return <Symbols>{'['}</Symbols>;\n  }\n\n  if (jsTypeString === '[object Object]') {\n    return <Symbols>{'{'}</Symbols>;\n  }\n\n  if (jsTypeString === '[object String]') {\n    return (\n      <Typography\n        variant=\"caption\"\n        component=\"pre\"\n        className={'fs-exclude'}\n        style={{\n          fontWeight: 600,\n          whiteSpace: 'pre-line',\n          wordBreak: 'break-all',\n          overflowWrap: 'break-word',\n          fontFamily: \"'Source Code Pro', monospace\",\n          color: useColor.StringColor,\n        }}\n      >\n        \"{value}\"\n      </Typography>\n    );\n  }\n\n  if (jsTypeString === '[object Boolean]') {\n    return (\n      <Typography\n        variant=\"caption\"\n        className={'fs-exclude'}\n        style={{\n          fontWeight: 600,\n          fontFamily: \"'Source Code Pro', monospace\",\n          color: useColor.BooleanColor,\n        }}\n      >\n        {value ? 'true' : 'false'}\n      </Typography>\n    );\n  }\n\n  if (jsTypeString === '[object Number]') {\n    return (\n      <Typography\n        variant=\"caption\"\n        className={'fs-exclude'}\n        style={{\n          fontWeight: 600,\n          fontFamily: \"'Source Code Pro', monospace\",\n          color: useColor.NumberColor,\n        }}\n      >\n        {value.toString()}\n      </Typography>\n    );\n  }\n\n  return null;\n  // return <Typography variant=\"caption\"\n  //                    style={{color: colors[typeO]}}>{value.toString()}</Typography>;\n}\n\nconst AssertionMetTypeName = ({ typeName, style }) => {\n  const classes = useShapeViewerStyles();\n\n  const { shapeRender } = useContext(ShapeRenderContext);\n\n  if (!typeName) {\n    return null;\n  }\n\n  const coloredComponents = typeName.asColoredString(shapeRender.specShapes);\n\n  return (\n    <div className={classes.assertionMet}>\n      <CheckIcon\n        style={{\n          color: '#646464',\n          height: 10,\n          width: 10,\n          marginTop: 6,\n          marginRight: 6,\n        }}\n      />\n      {mapScala(coloredComponents)((i, n) => {\n        if (i.text) {\n          return (\n            <span key={n} style={{ whiteSpace: 'pre' }}>\n              {i.text}\n            </span>\n          );\n        }\n      })}\n    </div>\n  );\n};\n\nexport const DiffNotif = withShapeRenderContext(\n  withDiffContext((props) => {\n    const classes = useShapeViewerStyles();\n    const { diffDescription } = props;\n\n    return (\n      <span className={classes.diffAssertion}>\n        <WarningIcon style={{ color: secondary, height: 10, width: 10 }} />\n        <span style={{ marginLeft: 6 }}>{diffDescription.assertion}</span>\n      </span>\n    );\n  })\n);\n\nexport const FieldRow = withShapeRenderContext((props) => {\n  const classes = useShapeViewerStyles();\n  const { field, parent, shapeRender, diffDescription, suggestion } = props;\n\n  const missing = field.display === 'missing';\n  //\n  const fieldShape = getOrUndefined(field.exampleShape);\n  const specShape = getOrUndefined(field.specShape);\n\n  const example = getOrUndefinedJson(field.example);\n\n  const diff = headOrUndefined(field.diffs);\n\n  // spec shape for assertion\n\n  const diffNotif = diff && <DiffNotif />;\n\n  return (\n    <>\n      <Row\n        tracked={!!diff}\n        changeType={(() => {\n          if (diff && suggestion) {\n            return suggestion.changeTypeAsString;\n          }\n\n          if (diff) {\n            return diffDescription.changeTypeAsString;\n          }\n        })()}\n        left={\n          <Indent>\n            <div className={classes.rowContents}>\n              <div>\n                <FieldName missing={missing}>{field.fieldName}</FieldName>\n              </div>\n              <div style={{ flex: 1, paddingLeft: 4 }}>\n                <ValueContents value={example} shape={fieldShape} />\n              </div>\n            </div>\n          </Indent>\n        }\n        right={(() => {\n          if (diffNotif && suggestion) {\n            return (\n              <div style={{ flex: 1, display: 'flex', marginLeft: 16 }}>\n                {suggestion.changeTypeAsString !== 'Removal' && (\n                  <TypeName\n                    style={{ marginRight: 9 }}\n                    typeName={specShape && specShape.name}\n                  />\n                )}\n                <Typography\n                  variant=\"caption\"\n                  className={classes.suggestion}\n                  style={{\n                    marginLeft:\n                      suggestion.changeTypeAsString !== 'Removal' ? 15 : 0,\n                  }}\n                >\n                  ({suggestion.changeTypeAsString})\n                </Typography>\n              </div>\n            );\n          }\n          if (diffNotif) {\n            return diffNotif;\n          }\n\n          if (fieldShape) {\n            return (\n              <AssertionMetTypeName typeName={specShape && specShape.name} />\n            );\n          }\n        })()}\n      />\n      {/* this will insert nested rows */}\n      <ValueRows value={example} shape={fieldShape} />\n    </>\n  );\n});\nFieldRow.displayName = 'ShapeViewers/FieldRow';\n\nexport const ItemRow = withShapeRenderContext((props) => {\n  const classes = useShapeViewerStyles();\n  const {\n    item,\n    shapeRender,\n    isLast,\n    listId,\n    diffDescription,\n    suggestion,\n  } = props;\n\n  const exampleItemShape = item.exampleShape;\n  const listItemShape = getOrUndefined(item.specListItem);\n  const diff = headOrUndefined(item.diffs);\n\n  const diffNotif = diff && <DiffNotif />;\n\n  return (\n    <>\n      <Row\n        tracked={!!diff}\n        changeType={(() => {\n          if (diff && suggestion) {\n            return suggestion.changeTypeAsString;\n          }\n\n          if (diff) {\n            return diffDescription.changeTypeAsString;\n          }\n        })()}\n        left={(() => {\n          if (item.display === 'hidden') {\n            return (\n              <Indent>\n                <HiddenItemEllipsis expandId={listId} />\n              </Indent>\n            );\n          }\n\n          return (\n            <Indent>\n              <div className={classes.rowContents}>\n                <IndexMarker>{item.index}</IndexMarker>\n                <div style={{ flex: 1, paddingLeft: 4 }}>\n                  <ValueContents\n                    value={getJson(item.example)}\n                    shape={exampleItemShape}\n                  />\n                </div>\n              </div>\n            </Indent>\n          );\n        })()}\n        right={(() => {\n          if (diffNotif && suggestion) {\n            return (\n              <div style={{ flex: 1, display: 'flex', marginLeft: 16 }}>\n                {suggestion.changeTypeAsString !== 'Removal' && (\n                  <TypeName\n                    style={{ marginRight: 9 }}\n                    typeName={listItemShape.name}\n                  />\n                )}\n                <Typography\n                  variant=\"caption\"\n                  className={classes.suggestion}\n                  style={{\n                    marginLeft:\n                      suggestion.changeTypeAsString !== 'Removal' ? 15 : 0,\n                  }}\n                >\n                  ({suggestion.changeTypeAsString})\n                </Typography>\n              </div>\n            );\n          }\n          if (diffNotif) {\n            return diffNotif;\n          }\n          if (listItemShape) {\n            return (\n              <AssertionMetTypeName\n                typeName={listItemShape.name}\n              ></AssertionMetTypeName>\n            );\n          }\n        })()}\n      />\n      {item.display !== 'hidden' && (\n        <ValueRows value={getJson(item.example)} shape={exampleItemShape} />\n      )}\n    </>\n  );\n});\n\nfunction useCompassTargetTracker(isEnabled) {\n  const [compassState, setCompassState] = useState({\n    isAbove: false,\n    isBelow: false,\n    x: null,\n    width: null,\n  });\n  const elementRef = useRef(null);\n  const animationRaf = useRef(null);\n\n  const onAnimationFrame = useCallback(() => {\n    if (!isEnabled || !window) return;\n    const trackedEl = elementRef.current;\n\n    if (!trackedEl) return;\n\n    const viewportHeight = window.innerHeight;\n    const boundingRect = trackedEl.getBoundingClientRect();\n\n    const isAbove = boundingRect.bottom < 100;\n    const isBelow = boundingRect.top - viewportHeight > 0;\n    const { x, width } = boundingRect;\n\n    if (\n      isAbove !== compassState.isAbove ||\n      isBelow !== compassState.isBelow ||\n      x !== compassState.x ||\n      width !== compassState.width\n    ) {\n      setCompassState({\n        isAbove,\n        isBelow,\n        x,\n        width,\n      });\n    }\n\n    animationRaf.current = requestAnimationFrame(onAnimationFrame);\n  }, [\n    compassState.isAbove,\n    compassState.isBelow,\n    compassState.x,\n    compassState.width,\n  ]);\n\n  // useEffect(() => {\n  //   animationRaf.current = requestAnimationFrame(onAnimationFrame);\n  //   return () => cancelAnimationFrame(animationRaf.current);\n  // }, [onAnimationFrame]);\n\n  return {\n    ref: elementRef,\n    compassState,\n  };\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ShapeRenderStore } from './shape_viewers/ShapeRenderContext';\nimport { DiffViewer } from './shape_viewers/SideBySideShapeRows';\nimport { getOrUndefined } from '@useoptic/domain';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  },\n}));\n\nexport default function DiffHunkViewer(props) {\n  const { preview, diffDescription, suggestion, exampleOnly, diff } = props;\n  const classes = useStyles();\n\n  const rootShape = preview.rootId;\n  const shape = getOrUndefined(preview.getRootShape);\n\n  return (\n    <ShapeRenderStore\n      shape={preview}\n      diff={diff}\n      diffDescription={diffDescription}\n      suggestion={suggestion}\n      exampleOnly={exampleOnly}\n    >\n      <DiffViewer shape={shape} />\n    </ShapeRenderStore>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { mapScala } from '@useoptic/domain';\nimport { UpdatedBlue, UpdatedBlueBackground } from '../../../theme';\nimport { track } from '../../../Analytics';\n\nexport function DiffCopy(props) {\n  const classes = useStyles();\n\n  const copy = props.copy;\n  const fontSize = props.fontSize || 13;\n\n  let suggestion = '';\n  const components = mapScala(copy)((i) => {\n    suggestion += i.value + ' ';\n    if (i.style === 'normal') {\n      return (\n        <span className={classes.normal} style={{ fontSize }}>\n          {i.value}{' '}\n        </span>\n      );\n    } else if (i.style === 'code') {\n      return (\n        <span>\n          <span className={classes.code} style={{ fontSize }}>\n            {i.value}\n          </span>{' '}\n        </span>\n      );\n    }\n  });\n\n  useEffect(() => {\n    // track(\"Showing recommendation\", {suggestion})\n  }, []);\n\n  return <div>{components}</div>;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  normal: {\n    wordBreak: 'break-word',\n    fontFamily: 'Ubuntu',\n  },\n  code: {\n    fontFamily: \"'Source Code Pro', monospace\",\n    fontWeight: 600,\n    paddingLeft: 2,\n    paddingRight: 2,\n    paddingTop: 1,\n    paddingBottom: 1,\n    wordBreak: 'break-word',\n    backgroundColor: UpdatedBlueBackground,\n  },\n}));\n","import React, { useCallback, useReducer } from 'react';\nimport classNames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useColor, useShapeViewerStyles, SymbolColor } from './styles';\nimport _isEqual from 'lodash.isequal';\nimport _get from 'lodash.get';\nimport _uniq from 'lodash.uniq';\n\nimport {\n  getOrUndefined,\n  getOrUndefinedJson,\n  headOrUndefined,\n  JsonHelper,\n  JsonTrailHelper,\n  lengthScala,\n  mapScala,\n  getJson,\n  toOption,\n} from '@useoptic/domain';\n\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport WarningIcon from '@material-ui/icons/Warning';\n\nexport default function InteractionBodyViewer({\n  diff,\n  diffDescription,\n  body,\n  selectedInterpretation,\n}) {\n  const generalClasses = useShapeViewerStyles();\n\n  const [{ rows }, dispatch] = useReducer(\n    updateState,\n    { diff, body },\n    createInitialState\n  );\n\n  const diffDetails = diff && {\n    diffDescription,\n    changeType: selectedInterpretation\n      ? selectedInterpretation.changeTypeAsString\n      : diffDescription.changeTypeAsString,\n    changeDescription:\n      selectedInterpretation &&\n      JsonHelper.seqToJsArray(\n        selectedInterpretation.copyPair.action\n      ).map(({ value, style }) => ({ value, style })),\n  };\n\n  return (\n    <div className={generalClasses.root}>\n      {rows.map((row, index) => {\n        return (\n          <Row\n            key={row.id}\n            index={index}\n            {...row}\n            diffDetails={row.compliant ? {} : diffDetails}\n            dispatch={dispatch}\n          />\n        );\n      })}\n    </div>\n  );\n}\n\nexport function Row(props) {\n  const classes = useStyles();\n  const generalClasses = useShapeViewerStyles();\n  const {\n    collapsed,\n    compliant,\n    diffDetails,\n    indent,\n    index,\n    seqIndex,\n    fieldName,\n    fieldValue,\n    type,\n\n    dispatch,\n  } = props;\n\n  const onRowClick = useCallback(\n    (e) => {\n      if (!collapsed) return;\n      e.preventDefault();\n      if (type === 'array_item_collapsed') {\n        dispatch({ type: 'unfold', payload: index });\n      }\n    },\n    [index, type, dispatch]\n  );\n\n  const indentPadding = ' '.repeat(indent * 2);\n\n  return (\n    <div\n      className={classNames(classes.row, {\n        [generalClasses.isTracked]: !!props.tracked, // important for the compass to work\n        [classes.isCollapsed]: collapsed,\n        [classes.isIncompliant]: !compliant && !collapsed,\n        [classes.isCollapsedIncompliant]: !compliant && collapsed,\n        [classes.requiresAddition]:\n          diffDetails && diffDetails.changeType === 'Addition',\n        [classes.requiresUpdate]:\n          diffDetails && diffDetails.changeType === 'Update',\n        [classes.requiresRemoval]:\n          diffDetails && diffDetails.changeType === 'Removal',\n      })}\n    >\n      <div className={classes.rowContent} onClick={onRowClick}>\n        {indentPadding}\n        <RowFieldName type={type} name={fieldName} />\n        <RowSeqIndex type={type} index={seqIndex} />\n        <RowValue\n          type={type}\n          value={fieldValue}\n          compliant={compliant}\n          changeDescription={diffDetails && diffDetails.changeDescription}\n        />\n      </div>\n\n      {!compliant && !collapsed && <DiffAssertion {...diffDetails} />}\n    </div>\n  );\n}\nRow.displayName = 'ShapeViewer/Row';\n\nfunction RowValue({ type, value, compliant, changeDescription }) {\n  const generalClasses = useShapeViewerStyles();\n  const classes = useStyles();\n\n  if (type === 'null') {\n    return (\n      <span\n        className={classNames(\n          generalClasses.symbols,\n          classes.symbolContent,\n          'fs-exclude'\n        )}\n      >\n        {'null'}\n      </span>\n    );\n  }\n\n  if (type === 'array_open') {\n    return (\n      <span\n        className={classNames(generalClasses.symbols, classes.symbolContent)}\n      >\n        {'['}\n      </span>\n    );\n  }\n\n  if (type === 'array_item_collapsed') {\n    return (\n      <span className={classes.collapsedSymbol}>\n        {'⋯'}\n        {!compliant ? (\n          changeDescription ? (\n            <CheckCircleIcon className={classes.collapsedChangeIcon} />\n          ) : (\n            <WarningIcon className={classes.collapsedWarning} />\n          )\n        ) : (\n          ''\n        )}\n      </span>\n    );\n  }\n\n  if (type === 'array_close') {\n    return (\n      <span\n        className={classNames(generalClasses.symbols, classes.symbolContent)}\n      >\n        {']'}\n      </span>\n    );\n  }\n\n  if (type === 'object_open') {\n    return (\n      <span\n        className={classNames(generalClasses.symbols, classes.symbolContent)}\n      >\n        {'{'}\n      </span>\n    );\n  }\n\n  if (type === 'object_close') {\n    return (\n      <span\n        className={classNames(generalClasses.symbols, classes.symbolContent)}\n      >\n        {'}'}\n      </span>\n    );\n  }\n\n  if (type === 'string') {\n    return (\n      <span className={classNames(classes.stringContent, 'fs-exclude')}>\n        \"{value}\"\n      </span>\n    );\n  }\n\n  if (type === 'boolean') {\n    return <span className=\"fs-exclude\">{value ? 'true' : 'false'}</span>;\n  }\n\n  if (type === 'number') {\n    return <span className=\"fs-exclude\">{value}</span>;\n  }\n\n  if (type === 'undefined') {\n    return null;\n  }\n\n  throw new Error(`Cannot render RowValue for type '${type}'`);\n}\nRowValue.displayName = 'ShapeViewer/RowValue';\n\nfunction RowFieldName({ type, name }) {\n  const classes = useStyles();\n  const missing = type === 'undefined';\n  if (!name) return null;\n  return (\n    <span\n      className={classNames(classes.fieldName, {\n        [classes.isMissing]: type === 'undefined',\n      })}\n    >\n      {name}\n      {!missing && ': '}\n    </span>\n  );\n}\n\nfunction RowSeqIndex({ type, index, missing }) {\n  const classes = useStyles();\n  if (!index && index !== 0) return null;\n  return (\n    <span\n      className={classNames(classes.fieldIndex, {\n        [classes.isMissing]: !!missing,\n      })}\n    >\n      {index}:{' '}\n    </span>\n  );\n}\n\nfunction DiffAssertion({ diffDescription, changeDescription }) {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.diffAssertion}>\n      {changeDescription ? (\n        <>\n          <CheckCircleIcon className={classes.selectectedChangeIcon} />\n          <span className={classes.changeDescription}>\n            {changeDescription.map(({ value }) => value).join(' ')}\n          </span>\n        </>\n      ) : (\n        <>\n          <WarningIcon className={classes.assertionWarningIcon} />\n          <span>{diffDescription.assertion}</span>\n        </>\n      )}\n    </div>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  row: {\n    display: 'flex',\n    padding: 0,\n    paddingLeft: 4,\n    flexDirection: 'row',\n    alignItems: 'baseline',\n\n    '&:hover': {\n      backgroundColor: 'rgba(78,165,255,0.27)',\n    },\n\n    '&$isCollapsed': {\n      cursor: 'pointer',\n    },\n\n    '&$isIncompliant, &$isCollapsedIncompliant:hover': {\n      '&$requiresAddition': {\n        backgroundColor: theme.palette.added.background,\n      },\n\n      '&$requiresRemoval': {\n        backgroundColor: theme.palette.removed.background,\n      },\n\n      '&$requiresUpdate': {\n        backgroundColor: theme.palette.changed.background,\n      },\n    },\n  },\n\n  rowContent: {\n    flexGrow: 1,\n    flexShrink: 1,\n    overflow: 'hidden',\n    padding: theme.spacing(0, 5 / 8),\n\n    lineHeight: '25px',\n    fontSize: 12,\n    fontFamily: \"'Source Code Pro', monospace\",\n    whiteSpace: 'pre',\n    color: SymbolColor,\n  },\n\n  collapsedRowValue: {},\n\n  collapsedSymbol: {\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    paddingTop: 3,\n    color: '#070707',\n    fontSize: 10,\n    backgroundColor: '#ababab',\n    borderRadius: 12,\n\n    '$isCollapsedIncompliant$requiresAddition &': {\n      backgroundColor: theme.palette.added.background,\n      color: theme.palette.added.main,\n    },\n\n    '$isCollapsedIncompliant$requiresRemoval &': {\n      backgroundColor: theme.palette.removed.background,\n      color: theme.palette.removed.main,\n    },\n\n    '$isCollapsedIncompliant$requiresUpdate &': {\n      backgroundColor: theme.palette.changed.background,\n      color: theme.palette.changed.main,\n    },\n  },\n\n  collapsedWarning: {\n    width: 10,\n    height: 10,\n    marginLeft: theme.spacing(0.5),\n    color: theme.palette.secondary.main,\n  },\n\n  collapsedChangeIcon: {\n    width: 10,\n    height: 10,\n    marginLeft: theme.spacing(0.5),\n\n    '$requiresAddition &': {\n      color: theme.palette.added.main,\n    },\n\n    '$requiresRemoval &': {\n      color: theme.palette.removed.main,\n    },\n\n    '$requiresUpdate &': {\n      color: theme.palette.changed.main,\n    },\n  },\n\n  booleanContent: {\n    fontWeight: 600,\n    fontFamily: \"'Source Code Pro', monospace\",\n    color: useColor.BooleanColor,\n  },\n\n  symbolContent: {\n    color: SymbolColor,\n  },\n\n  numberContent: {\n    fontWeight: 600,\n    fontFamily: \"'Source Code Pro', monospace\",\n    color: useColor.NumberColor,\n  },\n\n  stringContent: {\n    fontWeight: 600,\n    whiteSpace: 'pre-line',\n    wordBreak: 'break-all',\n    overflowWrap: 'break-word',\n    fontFamily: \"'Source Code Pro', monospace\",\n    color: useColor.StringColor,\n  },\n\n  missingContent: {\n    fontWeight: 600,\n    fontFamily: \"'Source Code Pro', monospace\",\n    fontStyle: 'italic',\n    opacity: 0.8,\n  },\n\n  fieldName: {\n    fontWeight: 600,\n    color: '#cfcfcf',\n    fontSize: 12,\n    fontFamily: \"'Source Code Pro', monospace\",\n\n    opacity: 1,\n\n    '&$isMissing': {\n      fontStyle: 'italic',\n      opacity: 0.6,\n    },\n  },\n\n  fieldIndex: {\n    fontWeight: 500,\n    color: '#9cdcfe',\n    fontSize: 12,\n    fontFamily: \"'Source Code Pro', monospace\",\n\n    opacity: 1,\n\n    '&$isMissing': {\n      opacity: 0.4,\n    },\n  },\n\n  diffAssertion: {\n    flexGrow: 0,\n    flexShrink: 0,\n    alignSelf: 'center',\n    minWidth: '35%',\n    maxWidth: '50%',\n\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 2),\n\n    color: '#f8edf4',\n    fontSize: 14,\n    fontWeight: 800,\n    fontFamily: \"'Source Code Pro', monospace\",\n  },\n\n  assertionWarningIcon: {\n    width: 14,\n    height: 14,\n    marginRight: theme.spacing(1),\n    color: theme.palette.secondary.main,\n  },\n\n  selectectedChangeIcon: {\n    width: 14,\n    height: 14,\n    marginRight: theme.spacing(1),\n\n    '$requiresAddition &': {\n      color: theme.palette.added.main,\n    },\n\n    '$requiresRemoval &': {\n      color: theme.palette.removed.main,\n    },\n\n    '$requiresUpdate &': {\n      color: theme.palette.changed.main,\n    },\n  },\n\n  isCollapsed: {},\n  isMissing: {},\n  isIncompliant: {},\n  isCollapsedIncompliant: {},\n  requiresAddition: {},\n  requiresUpdate: {},\n  requiresRemoval: {},\n}));\n\n// ShapeViewer view model\n// ----------------------\n//\n// We're using a reducer model so we can use pure transformation functions to\n// manage the view model's state. That should especially come in handy when we\n// want to cover this with tests, but will also help in making it into something\n// re-usable, using Typescript to implement it, etc.\n//\n// TODO: consider moving this to it's own module, partly to enable the usecase\n// stated above.\n\nfunction createInitialState({ diff, body }) {\n  const diffTrails = diff\n    ? JsonHelper.seqToJsArray(diff.jsonTrails).map((jsonTrail) =>\n        JsonTrailHelper.toJs(jsonTrail)\n      )\n    : [];\n\n  const bodyJson = getOrUndefined(body.jsonOption);\n  const shape = bodyJson && JsonHelper.toJs(bodyJson);\n\n  const [rows, collapsedTrails] = shapeRows(shape, diffTrails);\n\n  return { body: shape, rows, collapsedTrails, diffTrails };\n}\n\nfunction updateState(state, action) {\n  switch (action.type) {\n    case 'unfold':\n      let index = action.payload;\n      return unfoldRows(state, index);\n    default:\n      throw new Error(\n        `State cannot be updated through action of type '${action.type}'`\n      );\n  }\n}\n\nfunction unfoldRows(currentState, index) {\n  const row = currentState.rows[index];\n  if (row.type !== 'array_item_collapsed') return currentState;\n\n  const collapsedShape = _get(currentState.body, row.trail);\n  const rowField = {\n    fieldValue: row.fieldValue,\n    fieldName: row.fieldName,\n    seqIndex: row.seqIndex,\n    trail: [...row.trail],\n  };\n\n  const [replacementRows, newCollapsedTrails] = shapeRows(\n    collapsedShape,\n    currentState.diffTrails,\n    [],\n    [],\n    row.indent,\n    rowField\n  );\n  const updatedRows = [...currentState.rows];\n  updatedRows.splice(index, 1, ...replacementRows);\n  const updatedCollapsedTrails = currentState.collapsedTrails\n    .filter((trail) => !_isEqual(trail, row.trail))\n    .concat(newCollapsedTrails);\n\n  return {\n    ...currentState,\n    rows: updatedRows,\n    collapsedTrails: updatedCollapsedTrails,\n  };\n}\n\n// Since we've run into performance issue before traversing entire shapes, we're doing this\n// the mutative way to prevent a lot of re-alloctions for big bodies.\nfunction shapeRows(\n  shape,\n  diffTrails = [],\n  rows = [],\n  collapsedTrails = [],\n  indent = 0,\n  field = {\n    fieldName: null,\n    fieldValue: undefined,\n    seqIndex: undefined,\n    trail: [],\n  }\n) {\n  const typeString = Object.prototype.toString.call(shape);\n\n  switch (typeString) {\n    case '[object Object]':\n      // debugger;\n      objectRows(shape, diffTrails, rows, collapsedTrails, indent, field);\n      break;\n    case '[object Array]':\n      // debugger;\n      listRows(shape, diffTrails, rows, collapsedTrails, indent, field);\n      break;\n    default:\n      // debugger\n      let type = getFieldType(shape);\n      let row = createRow(\n        { type, ...field, fieldValue: field.fieldValue || shape, indent },\n        { diffTrails }\n      );\n      rows.push(createRow(row));\n      break;\n  }\n\n  return [rows, collapsedTrails];\n}\n\nfunction objectRows(\n  objectShape,\n  diffTrails,\n  rows,\n  collapsedTrails,\n  indent,\n  field\n) {\n  const { trail } = field;\n\n  rows.push(\n    createRow(\n      {\n        type: 'object_open',\n        fieldName: field.fieldName,\n        seqIndex: field.seqIndex,\n        trail,\n        indent,\n      },\n      { diffTrails }\n    )\n  );\n\n  const nestedDiffs = diffTrails.filter((diffTrail) =>\n    trail.every((trailComponent, n) => trailComponent === diffTrail[n])\n  );\n  const keysWithDiffs = nestedDiffs\n    .filter((nestedDiff) => nestedDiff.length === trail.length + 1)\n    .map((diff) => diff[diff.length - 1]);\n  const objectKeys = _uniq([...Object.keys(objectShape), ...keysWithDiffs]);\n\n  objectKeys.sort(alphabetizeCaseInsensitve).forEach((key) => {\n    const fieldName = key;\n    const value = objectShape[key];\n\n    return shapeRows(value, nestedDiffs, rows, collapsedTrails, indent + 1, {\n      fieldName,\n      fieldValue: value,\n      trail: [...trail, fieldName],\n    });\n  });\n\n  rows.push(createRow({ type: 'object_close', indent, trail }));\n}\n\nfunction alphabetizeCaseInsensitve(A, B) {\n  const a = A.toLowerCase ? A.toLowerCase() : A;\n  const b = B.toLowerCase ? B.toLowerCase() : B;\n\n  if (a > b) {\n    return 1;\n  } else if (b > a) {\n    return -1;\n  }\n\n  // return 0;\n}\n\nfunction listRows(list, diffTrails, rows, collapsedTrails, indent, field) {\n  const { trail } = field;\n\n  rows.push(\n    createRow(\n      {\n        type: 'array_open',\n        indent,\n        fieldName: field.fieldName,\n        seqIndex: field.seqIndex,\n        trail,\n      },\n      { diffTrails }\n    )\n  );\n\n  const nestedDiffs = diffTrails.filter(\n    (diffTrail) =>\n      diffTrail.length > trail.length &&\n      trail.every((trailComponent, n) => trailComponent === diffTrail[n])\n  );\n\n  const indexesWithDiffs = list\n    .map((item, index) => index)\n    .filter((index) => {\n      return nestedDiffs.some((diffTrail) => index === diffTrail[trail.length]);\n    });\n\n  list.forEach((item, index) => {\n    let itemTypeString = Object.prototype.toString.call(item);\n    let itemTrail = [...trail, index];\n    let itemIndent = indent + 1;\n\n    if (\n      (itemTypeString !== '[object Object]' &&\n        itemTypeString !== '[object Array]') ||\n      (indexesWithDiffs.length > 0 && indexesWithDiffs[0] === index) ||\n      (indexesWithDiffs.length === 0 && index === 0)\n    ) {\n      shapeRows(item, diffTrails, rows, collapsedTrails, itemIndent, {\n        seqIndex: index,\n        fieldValue: item,\n        trail: itemTrail,\n      });\n    } else {\n      rows.push(\n        createRow({\n          type: 'array_item_collapsed',\n          collapsed: true,\n          compliant: !indexesWithDiffs.includes(index),\n          seqIndex: index,\n          indent: itemIndent,\n          trail: itemTrail,\n        })\n      );\n      collapsedTrails.push(itemTrail);\n    }\n  });\n\n  rows.push(createRow({ type: 'array_close', indent, trail }));\n}\n\nfunction getFieldType(fieldValue) {\n  if (typeof fieldValue === 'undefined') {\n    return 'undefined';\n  }\n\n  const jsTypeString = Object.prototype.toString.call(fieldValue);\n\n  switch (jsTypeString) {\n    case '[object Null]':\n      return 'null';\n    case '[object String]':\n      return 'string';\n    case '[object Boolean]':\n      return 'boolean';\n    case '[object Number]':\n      return 'number';\n    default:\n      debugger;\n      throw new Error(\n        `Can not return field type for fieldValue with type string '${jsTypeString}'`\n      );\n  }\n}\n\nfunction createRow(row, options = {}) {\n  const trail = row && row.trail;\n  const type = row && row.type;\n  if (!trail || !Array.isArray(trail))\n    new TypeError('trail (array) must be known to create a row');\n  if (!type) new TypeError('type must be known to create a row');\n\n  const id = `${row.trail.join('.') || 'root'}-${row.type}`;\n\n  const isCompliant =\n    !options.diffTrails ||\n    !options.diffTrails.some((diffTrail) => _isEqual(diffTrail, trail));\n\n  return {\n    id,\n    collapsed: false,\n    compliant: isCompliant,\n    ...row,\n  };\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SpecServiceClient = exports.Client = void 0;\n\nvar client_1 = require(\"./client\");\n\nObject.defineProperty(exports, \"Client\", {\n  enumerable: true,\n  get: function get() {\n    return client_1.Client;\n  }\n});\n\nvar spec_service_client_1 = require(\"./spec-service-client\");\n\nObject.defineProperty(exports, \"SpecServiceClient\", {\n  enumerable: true,\n  get: function get() {\n    return spec_service_client_1.Client;\n  }\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.JavascriptErrorDetectedInFrontend = exports.RequirementForDiffsToHaveASuggestionFailed = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar RegisterEvent_1 = require(\"../interfaces/RegisterEvent\");\n\nvar Events_1 = require(\"../interfaces/Events\"); // @ts-ignore\n\n\nvar Joi = tslib_1.__importStar(require(\"@hapi/joi\"));\n\nrequire(\"joi-extract-type\");\n\nvar RequirementForDiffsToHaveASuggestionFailedSchema = Joi.object({\n  diff: Joi.string().required()\n});\nexports.RequirementForDiffsToHaveASuggestionFailed = RegisterEvent_1.DescribeEvent(Events_1.Events.RequirementForDiffsToHaveASuggestionFailed, RequirementForDiffsToHaveASuggestionFailedSchema, function (props) {\n  return \"Suggestions should never be empty for diff: \".concat(props.diff);\n});\nvar JavascriptErrorDetectedInFrontendSchema = Joi.object({\n  message: Joi.string().required(),\n  stack: Joi.string().required()\n});\nexports.JavascriptErrorDetectedInFrontend = RegisterEvent_1.DescribeEvent(Events_1.Events.JavascriptErrorDetectedInFrontend, JavascriptErrorDetectedInFrontendSchema, function (props) {\n  return \"Error on Frontend: \".concat(props.message);\n});","import { RfcCommands } from '@useoptic/domain';\n\nexport function commandsForUpdatingContribution(id, key, value) {\n  return [RfcCommands.AddContribution(id, key, value)];\n}\n","import React, { useContext, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport { DocDivider } from '../../docs/DocConstants';\nimport Typography from '@material-ui/core/Typography';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Button from '@material-ui/core/Button';\nimport { DiffContext } from './DiffContext';\nimport { CompareEquality, mapScala } from '@useoptic/domain';\nimport { IgnoreDiffContext } from './DiffPageNew';\nimport { useDiffDescription, useSuggestionsForDiff } from './DiffHooks';\nimport { diff } from 'react-ace';\nimport { DiffCopy } from './DiffCopy';\nimport { trackUserEvent, track } from '../../../Analytics.js';\nimport { SuggestionDisplayed } from '@useoptic/analytics/lib/events/diffs';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    position: 'sticky',\n    top: 120,\n  },\n  header: {\n    display: 'flex',\n    alignItem: 'center',\n    justifyContent: 'center',\n    paddingLeft: 11,\n    paddingTop: 14,\n    paddingBottom: 9,\n  },\n  font: {\n    fontSize: 13,\n    fontWeight: 800,\n    fontFamily: \"'Source Code Pro', monospace\",\n  },\n  icon: {\n    paddingRight: 0,\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    marginLeft: theme.spacing(1) + 7,\n    marginBottom: 7,\n  },\n  suggestion: {\n    fontWeight: 400,\n    marginLeft: -5,\n    fontSize: 12,\n  },\n  buttons: {\n    textAlign: 'right',\n    padding: 8,\n  },\n}));\n\nexport const DiffHelperCard = (props) => {\n  const classes = useStyles();\n  const {\n    inRequest,\n    inResponse,\n    description,\n    currentInteraction,\n    selectedInterpretation,\n    setSelectedInterpretation,\n    setSelectedDiff,\n    selectedDiff,\n  } = props;\n  const { acceptSuggestion, clearPreview } = useContext(DiffContext);\n\n  const suggestions = useSuggestionsForDiff(selectedDiff, currentInteraction);\n\n  const showIt =\n    (selectedDiff && selectedDiff.inRequest && inRequest) ||\n    (selectedDiff.inResponse && inResponse);\n\n  useEffect(() => {\n    if (!showIt) {\n      return;\n    }\n    const suggestion = mapScala(description.summary)((i) => {\n      return i.value;\n    }).join(' ');\n    trackUserEvent(\n      SuggestionDisplayed.withProps({\n        suggestion,\n      })\n    );\n  }, [showIt, description.summary]);\n\n  if (!showIt) {\n    return null;\n  }\n\n  return (\n    <div className={classes.root}>\n      <Card elevation={3}>\n        <div className={classes.header}>\n          <DiffCopy copy={description.summary} />\n          <div style={{ flex: 1, minWidth: 20 }} />\n          <PulsingOptic />\n        </div>\n\n        <DocDivider />\n\n        <FormControl component=\"fieldset\" className={classes.formControl}>\n          <RadioGroup>\n            {suggestions.map((suggestion, n) => {\n              return (\n                <FormControlLabel\n                  key={n}\n                  onClick={(e) => {\n                    e.preventDefault();\n                    // track(\"Demo - Previewing Suggestion\", {suggestion: suggestion.action})\n                    setSelectedInterpretation(suggestion);\n                  }}\n                  control={\n                    <Radio\n                      size=\"small\"\n                      color=\"primary\"\n                      value={suggestion}\n                      checked={Boolean(\n                        selectedInterpretation &&\n                          CompareEquality.betweenWithoutCommands(\n                            suggestion,\n                            selectedInterpretation\n                          )\n                      )}\n                    />\n                  }\n                  label={<DiffCopy copy={suggestion.copyPair.action} />}\n                />\n              );\n            })}\n          </RadioGroup>\n        </FormControl>\n\n        <DocDivider />\n\n        <div className={classes.buttons}>\n          <IgnoreDiffContext.Consumer>\n            {({ ignoreDiff }) => {\n              return (\n                <Button\n                  size=\"small\"\n                  onClick={() => {\n                    const toIgnore = selectedDiff.diff;\n                    setSelectedDiff(null);\n                    ignoreDiff(toIgnore);\n                  }}\n                >\n                  Ignore\n                </Button>\n              );\n            }}\n          </IgnoreDiffContext.Consumer>\n          <Button\n            color=\"primary\"\n            size=\"small\"\n            disabled={!selectedInterpretation}\n            onClick={() => {\n              setSelectedDiff(null);\n              acceptSuggestion(selectedInterpretation);\n            }}\n          >\n            Approve\n          </Button>\n        </div>\n      </Card>\n    </div>\n  );\n};\n\nexport const PulsingOptic = () => (\n  <div className={'blob'} style={{ marginRight: 9 }}>\n    <img src=\"/optic-logo.svg\" width={32} height={32} />\n  </div>\n);\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useCaptureContext } from '../../../contexts/CaptureContext';\nimport { DocDarkGrey } from '../../docs/DocConstants';\nimport {\n  AddedDarkGreen,\n  AddedGreen,\n  AddedGreenBackground,\n  primary,\n} from '../../../theme';\nimport Fade from '@material-ui/core/Fade';\n\nexport function DiffStats(props) {\n  const { showSkipped } = props;\n  const classes = useStyles();\n\n  const { processed, skipped, completed } = useCaptureContext();\n\n  return (\n    <div className={classes.statsSection}>\n      <div style={{ marginTop: 7 }}>\n        <Fade in={!completed}>\n          <CircularProgress size={12} variant=\"indeterminate\" />\n        </Fade>\n      </div>\n      <Typography\n        component=\"div\"\n        variant=\"overline\"\n        style={{ fontSize: 12 }}\n        className={classes.progressStats}\n      >\n        {processed} processed {showSkipped && ` | ${skipped} skipped`}\n      </Typography>\n    </div>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  progressStats: {\n    paddingLeft: theme.spacing(1),\n    color: DocDarkGrey,\n    flex: 1,\n  },\n  statsSection: {\n    display: 'flex',\n    flexDirection: 'row',\n    paddingLeft: theme.spacing(2),\n  },\n}));\n","import React, { useContext, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport isEqual from 'lodash.isequal';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport { createStyles, makeStyles } from '@material-ui/styles';\nimport DoneIcon from '@material-ui/icons/Done';\nimport Button from '@material-ui/core/Button';\nimport Collapse from '@material-ui/core/Collapse';\nimport { LearnAPIPageContext } from './v2/learn-api/LearnAPIPageContext';\nimport { useHover } from '../utilities/useHoverHook';\n\nexport function urlStringToPathComponents(url) {\n  const components = url.split('/').map((name, index) => {\n    const isParameter = name.charAt(0) === ':' || name.charAt(0) === '{';\n    return { index, name, originalName: name, isParameter };\n  });\n  const [root, ...rest] = components;\n  if (root.name === '') {\n    return rest;\n  }\n  return components;\n}\n\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    thin: {\n      fontWeight: 100,\n    },\n    component: {\n      '&:hover': {\n        color: '#cb5a77',\n      },\n      '&:focus': {\n        color: '#cb5a77',\n      },\n    },\n    thick: {\n      fontWeight: 600,\n    },\n  })\n);\n\nfunction PathComponentItem(props) {\n  const classes = useStyles();\n  const { item, updateItem, index, pathComponents } = props;\n  const [hoverRef, isHovered] = useHover();\n\n  function PathComponentButton({ onClick }) {\n    return (\n      <ButtonBase className={classes.component} onClick={onClick}>\n        {item.isParameter ? (\n          <Typography className={classes.thick}>{`{${\n            item.name || '   '\n          }}`}</Typography>\n        ) : (\n          <Typography className={classes.thin}>{item.name}</Typography>\n        )}\n      </ButtonBase>\n    );\n  }\n\n  if (item.isParameter) {\n    return (\n      <PathComponentButton\n        onClick={() =>\n          updateItem({ ...item, name: item.originalName, isParameter: false })\n        }\n      />\n    );\n  }\n\n  function ClickToMakeParam({ updateItem, classes, item }) {\n    const { toDocument = [], pathExpressions = [] } = useContext(\n      LearnAPIPageContext\n    );\n\n    function inferDefaultParamName() {\n      if (pathComponents.length === 0) {\n        return '';\n      }\n\n      const otherPathComponents = toDocument //qualifier, naive\n        .map((doc) => {\n          const expressions = pathExpressions[doc.id];\n          return expressions.pathComponents;\n        })\n        .filter((i) => {\n          const a = i\n            .slice(0, index - 1)\n            .map((c) => ({ name: c.name, isParameter: c.isParameter }));\n          const b = pathComponents\n            .slice(0, index - 1)\n            .map((c) => ({ name: c.name, isParameter: c.isParameter }));\n\n          return isEqual(a, b);\n        });\n\n      if (otherPathComponents.length === 0) {\n        return '';\n      } else {\n        const firstMatchingParamName = otherPathComponents\n          .map((i) => i.find((param) => param.index === index))\n          .filter((param) => {\n            if (param && param.isParameter) {\n              return true;\n            }\n          })[0];\n\n        return firstMatchingParamName ? firstMatchingParamName.name : '';\n      }\n    }\n\n    return (\n      <PathComponentButton\n        onClick={() =>\n          updateItem({\n            ...item,\n            isParameter: true,\n            name: inferDefaultParamName(),\n          })\n        }\n      />\n    );\n  }\n\n  return (\n    <span ref={hoverRef}>\n      {isHovered ? ( // when hovered bring in context aware variant\n        <ClickToMakeParam\n          item={item}\n          classes={classes}\n          updateItem={updateItem}\n        />\n      ) : (\n        <PathComponentButton onClick={() => {}} /> // when not hovered, keep dumb\n      )}\n    </span>\n  );\n}\n\nfunction UrlToPath(props) {\n  const { url, onAccept, onUserCompleted } = props;\n  const [pathComponents, setPathComponentsInternal] = useState(\n    urlStringToPathComponents(url)\n  );\n  const [lastInteractedIndex, setLastInteractedIndex] = useState(null);\n  const [collapseParams, setCollapseParams] = useState(false);\n\n  function setPathComponents(pathComponents) {\n    setPathComponentsInternal(pathComponents);\n    onAccept(pathComponents);\n  }\n\n  useEffect(() => {\n    onAccept(pathComponents);\n  }, []);\n\n  function setItemAt(index) {\n    return function (newItem) {\n      setCollapseParams(false);\n      setLastInteractedIndex(index);\n\n      setPathComponents(\n        pathComponents.map((item) => {\n          if (item.index === index) {\n            return newItem;\n          }\n          return item;\n        })\n      );\n    };\n  }\n\n  const parameters = pathComponents.filter((x) => x.isParameter);\n  return (\n    <div>\n      <div style={{ display: 'flex', alignItems: 'center' }}>\n        {pathComponents.flatMap((item) => [\n          <ButtonBase key={`${item.index}-1`} disabled>\n            <Typography\n              style={{ marginRight: 2, marginLeft: 2, fontWeight: 200 }}\n            >\n              /\n            </Typography>\n          </ButtonBase>,\n          <PathComponentItem\n            key={`${item.index}-2`}\n            item={item}\n            index={item.index}\n            pathComponents={pathComponents}\n            updateItem={setItemAt(item.index)}\n          />,\n        ])}\n      </div>\n      {parameters.length > 0 ? (\n        <Collapse in={!collapseParams}>\n          <div>\n            <br />\n            <div>\n              <Typography variant=\"overline\">Parameter Names:</Typography>\n            </div>\n            {parameters.map((item, index) => {\n              const updater = setItemAt(item.index);\n              return (\n                <div\n                  style={{ marginBottom: 11 }}\n                  key={'name-param-' + index.toString()}\n                >\n                  <TextField\n                    key={item.index}\n                    autoFocus={item.index === lastInteractedIndex}\n                    fullWidth\n                    value={item.name}\n                    label={`\"${item.originalName}\" is an example of a...`}\n                    onChange={(e) =>\n                      updater({ ...item, name: e.target.value.trim() })\n                    }\n                  >\n                    {item.name}\n                  </TextField>\n                </div>\n              );\n            })}\n            <Button\n              startIcon={<DoneIcon />}\n              color=\"primary\"\n              size=\"small\"\n              variant=\"contained\"\n              onClick={() => {\n                setCollapseParams(true);\n                onUserCompleted && onUserCompleted();\n              }}\n            >\n              Done\n            </Button>\n          </div>\n        </Collapse>\n      ) : null}\n    </div>\n  );\n}\n\nUrlToPath.propTypes = {\n  url: PropTypes.string.isRequired,\n  onAccept: PropTypes.func.isRequired,\n};\n\nexport default UrlToPath;\n","import { useRef, useState, useEffect } from 'react';\n\n// Hook\nexport function useHover() {\n  const [value, setValue] = useState(false);\n\n  const ref = useRef(null);\n\n  const handleMouseOver = () => setValue(true);\n  const handleMouseOut = () => setValue(false);\n\n  useEffect(\n    () => {\n      const node = ref.current;\n      if (node) {\n        node.addEventListener('mouseover', handleMouseOver);\n        node.addEventListener('mouseout', handleMouseOut);\n\n        return () => {\n          node.removeEventListener('mouseover', handleMouseOver);\n          node.removeEventListener('mouseout', handleMouseOut);\n        };\n      }\n    },\n    [ref.current] // Recall only if ref changes\n  );\n\n  return [ref, value];\n}\n","import React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport UrlToPath from './UrlToPath';\nimport { pathComponentsToString } from './v2/AddUrlModal';\nimport isEqual from 'lodash.isequal';\n\nconst styles = (theme) => ({\n  pathWrapper: {\n    padding: 7,\n    fontWeight: 400,\n    backgroundColor: '#f6f6f6',\n  },\n});\n\nclass PathMatcher extends React.Component {\n  handlePathComponentsChange = (pathComponents) => {\n    const pathExpression = pathComponentsToString(pathComponents);\n    this.props.onChange({\n      pathExpression,\n      pathComponents,\n      hasParameters: pathComponents.some((i) => i.isParameter),\n    });\n  };\n\n  render() {\n    const {\n      classes,\n      url,\n      rowId,\n      onUserCompleted,\n      toDocument,\n      pathExpressions,\n    } = this.props;\n    return (\n      <div>\n        <UrlToPath\n          url={url}\n          key={'path-match' + rowId}\n          onUserCompleted={onUserCompleted}\n          onAccept={(pathComponents) => {\n            this.handlePathComponentsChange(pathComponents);\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(PathMatcher);\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UpdateContribution = exports.ShowInitialDocumentingView = exports.AddUrlModalIdentifyingPathComponents = exports.AddUrlModalNaming = exports.UserCommittedChanges = exports.ShowCommitCard = exports.UserResetDiff = exports.UserPreviewedSuggestion = exports.UserAcceptedSuggestion = exports.SuggestionDisplayed = exports.UserFinishedAddingNewUrl = exports.UserBeganAddingNewUrl = exports.UserEnabledInferPolymorphism = exports.NewBodyDiffRendered = exports.UserChangedCaptureOverviewTab = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar RegisterEvent_1 = require(\"../interfaces/RegisterEvent\");\n\nvar Events_1 = require(\"../interfaces/Events\"); // @ts-ignore\n\n\nvar Joi = tslib_1.__importStar(require(\"@hapi/joi\"));\n\nrequire(\"joi-extract-type\"); // Sent whenever an API is created\n\n\nvar UserChangedCaptureOverviewTabSchema = Joi.object({\n  currentTab: Joi.string().required(),\n  diffCount: Joi.number().required(),\n  undocumentedUrlCount: Joi.number().required()\n});\nexports.UserChangedCaptureOverviewTab = RegisterEvent_1.DescribeEvent(Events_1.Events.UserChangedCaptureOverviewTab, UserChangedCaptureOverviewTabSchema, function (props) {\n  return \"User changed to \".concat(props.currentTab, \" and there are \").concat(props.diffCount, \" diffs + \").concat(props.undocumentedUrlCount, \" undocumented urls\");\n});\nvar NewBodyDiffRenderedSchema = Joi.object({\n  requestCount: Joi.number().required(),\n  responseCount: Joi.number().required(),\n  regions: Joi.array().required().items(Joi.string())\n});\nexports.NewBodyDiffRendered = RegisterEvent_1.DescribeEvent(Events_1.Events.NewBodyDiffRendered, NewBodyDiffRenderedSchema, function (props) {\n  return \"Diff was rendered in regions \".concat(props.regions.join(', \\n'));\n});\nvar InferPolymorphismEnabledSchema = Joi.object({\n  captureId: Joi.string().required(),\n  endpointId: Joi.string().required()\n});\nexports.UserEnabledInferPolymorphism = RegisterEvent_1.DescribeEvent(Events_1.Events.UserEnabledInferPolymorphism, InferPolymorphismEnabledSchema, function (props) {\n  return \"Infer Polymorphism was turned on for \".concat(props.captureId, \", endpoint \").concat(props.endpointId);\n});\nvar UserBeganAddingNewUrlSchema = Joi.object({\n  captureId: Joi.string().required(),\n  method: Joi.string().required(),\n  path: Joi.string().required(),\n  knownPathId: Joi.string().optional()\n});\nexports.UserBeganAddingNewUrl = RegisterEvent_1.DescribeEvent(Events_1.Events.UserBeganAddingNewUrl, UserBeganAddingNewUrlSchema, function (props) {\n  return \"User Began Adding New Url \".concat(props.method, \" \").concat(props.path, \" in \").concat(props.captureId);\n});\nvar UserFinishedAddingNewUrlSchema = Joi.object({\n  purpose: Joi.string().required(),\n  captureId: Joi.string().required(),\n  method: Joi.string().required(),\n  pathExpression: Joi.string().optional()\n});\nexports.UserFinishedAddingNewUrl = RegisterEvent_1.DescribeEvent(Events_1.Events.UserFinishedAddingNewUrl, UserFinishedAddingNewUrlSchema, function (props) {\n  return \"User Added New Url \".concat(props.method, \" \").concat(props.pathExpression, \" in \").concat(props.captureId, \" with purpose '\").concat(props.pathExpression, \"'\");\n});\nvar SuggestionDisplayedSchema = Joi.object({\n  suggestion: Joi.string().required()\n});\nexports.SuggestionDisplayed = RegisterEvent_1.DescribeEvent(Events_1.Events.SuggestionDisplayed, SuggestionDisplayedSchema, function (props) {\n  return \"Summary: '\".concat(props.suggestion, \"' \");\n});\nvar SuggestionAcceptedSchema = Joi.object({\n  captureId: Joi.string().required(),\n  suggestion: Joi.string().required()\n});\nexports.UserAcceptedSuggestion = RegisterEvent_1.DescribeEvent(Events_1.Events.UserAcceptedSuggestion, SuggestionAcceptedSchema, function (props) {\n  return \"Suggestion to '\".concat(props.suggestion, \"' was accepted\");\n});\nvar UserPreviewedSuggestionSchema = Joi.object({\n  captureId: Joi.string().required(),\n  diff: Joi.string().required(),\n  diffAssertion: Joi.string().required(),\n  suggestion: Joi.string().required()\n});\nexports.UserPreviewedSuggestion = RegisterEvent_1.DescribeEvent(Events_1.Events.UserPreviewedSuggestion, UserPreviewedSuggestionSchema, function (props) {\n  return \"Suggestion to '\".concat(props.suggestion, \"' was previewed in response to diff: \").concat(props.diff);\n});\nvar UserResetDiffSchema = Joi.object({});\nexports.UserResetDiff = RegisterEvent_1.DescribeEvent(Events_1.Events.UserResetDiff, UserResetDiffSchema, function (props) {\n  return \"The Diff Was Reset\";\n});\nvar ShowCommitCardSchema = Joi.object({\n  message: Joi.string().required(),\n  captureId: Joi.string().required(),\n  suggestions: Joi.number().required()\n});\nexports.ShowCommitCard = RegisterEvent_1.DescribeEvent(Events_1.Events.ShowCommitCard, ShowCommitCardSchema, function (props) {\n  return \"Commit Card Rendered\";\n});\nvar UserCommittedChangesSchema = Joi.object({\n  message: Joi.string().required(),\n  captureId: Joi.string().required(),\n  suggestions: Joi.number().required()\n});\nexports.UserCommittedChanges = RegisterEvent_1.DescribeEvent(Events_1.Events.UserCommittedChanges, UserCommittedChangesSchema, function (props) {\n  return \"The Diff Was Reset\";\n});\nvar AddUrlModalNamingSchema = Joi.object({\n  method: Joi.string().required(),\n  path: Joi.string().required()\n});\nexports.AddUrlModalNaming = RegisterEvent_1.DescribeEvent(Events_1.Events.AddUrlModalNaming, AddUrlModalNamingSchema, function (props) {\n  return \"Currently naming \".concat(props.method, \" \").concat(props.path);\n});\nvar AddUrlModalIdentifyingPathComponentsSchema = Joi.object({\n  method: Joi.string().required(),\n  path: Joi.string().required()\n});\nexports.AddUrlModalIdentifyingPathComponents = RegisterEvent_1.DescribeEvent(Events_1.Events.AddUrlModalIdentifyingPathComponents, AddUrlModalIdentifyingPathComponentsSchema, function (props) {\n  return \"Currently identifying path components for \".concat(props.method, \" \").concat(props.path);\n});\nvar ShowInitialDocumentingViewSchema = Joi.object({});\nexports.ShowInitialDocumentingView = RegisterEvent_1.DescribeEvent(Events_1.Events.ShowInitialDocumentingView, ShowInitialDocumentingViewSchema, function () {\n  return \"Showing initial documenting view\";\n});\nvar UpdateContributionSchema = Joi.object({\n  id: Joi.string().required(),\n  purpose: Joi.string().required(),\n  value: Joi.string().required()\n});\nexports.UpdateContribution = RegisterEvent_1.DescribeEvent(Events_1.Events.UpdateContribution, UpdateContributionSchema, function (_ref) {\n  var id = _ref.id,\n      purpose = _ref.purpose,\n      value = _ref.value;\n  return \"Updated \".concat(id, \" - \").concat(purpose, \" to be \").concat(value);\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DescribeEvent = exports.AllEvents = void 0;\n\nrequire(\"joi-extract-type\");\n\nfunction RegisterEvent(type, schema, propsToSentence) {\n  var event = {\n    withProps: function withProps(properties) {\n      return {\n        type: type,\n        context: {\n          clientAgent: '',\n          clientId: '',\n          clientSessionInstanceId: '',\n          clientTimestamp: ''\n        },\n        data: properties\n      };\n    },\n    toSentence: function toSentence(example) {\n      return propsToSentence(example.data);\n    },\n    eventName: type\n  };\n  exports.AllEvents.push(event);\n  return event;\n}\n\nexports.AllEvents = [];\n\nfunction DescribeEvent(name, joiSchema, propsToSentence) {\n  var event = RegisterEvent(name, joiSchema, propsToSentence);\n  return event;\n}\n\nexports.DescribeEvent = DescribeEvent;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Events = void 0;\n\nvar tslib_1 = require(\"tslib\"); //@ts-ignore\n\n\nvar keymirror_1 = tslib_1.__importDefault(require(\"keymirror\"));\n\nexports.Events = keymirror_1.default({\n  //on-boarding\n  UserLoggedInFromCLI: null,\n  ApiCreated: null,\n  ApiInitializedInProject: null,\n  ApiCheckCompleted: null,\n  //Errors\n  JavascriptErrorDetectedInFrontend: null,\n  RequirementForDiffsToHaveASuggestionFailed: null,\n  //running tasks\n  StartedTaskWithLocalCli: null,\n  ExitedTaskWithLocalCli: null,\n  //diffs\n  NewBodyDiffRendered: null,\n  BodyDiffRendered: null,\n  UserChangedCaptureOverviewTab: null,\n  UserEnabledInferPolymorphism: null,\n  UserBeganAddingNewUrl: null,\n  UserFinishedAddingNewUrl: null,\n  UserResetDiff: null,\n  ShowInitialDocumentingView: null,\n  UpdateContribution: null,\n  AddUrlModalNaming: null,\n  AddUrlModalIdentifyingPathComponents: null,\n  ShowCommitCard: null,\n  UserPreviewedSuggestion: null,\n  UserAcceptedSuggestion: null,\n  SuggestionDisplayed: null,\n  UserCommittedChanges: null\n});","import React from 'react';\nimport {Typography} from '@material-ui/core';\nimport {DocDivider, DocSubGroupHeadingBigStyles, DocSubGroupHeadingStyles} from './DocConstants';\n\nexport function DocSubGroup({title, children, style, innerStyle}) {\n  return (\n    <div style={{marginTop: 11, ...style}}>\n      <div>\n      <Typography variant=\"overline\" style={DocSubGroupHeadingStyles}>{title}</Typography>\n      <DocDivider />\n      </div>\n      <div style={innerStyle}>\n      {children}\n      </div>\n    </div>\n  )\n}\n\nexport function DocSubGroupBig({title, children, disabled, style, innerStyle}) {\n    return (\n        <div style={{marginTop: 11, ...style}}>\n            <div style={{maxWidth: 650}}>\n                <Typography variant=\"overline\" style={DocSubGroupHeadingBigStyles}>{title}</Typography>\n                <DocDivider />\n            </div>\n            <div style={{maxWidth: 650}} style={innerStyle}>\n                {children}\n            </div>\n        </div>\n    )\n}\n","import { Client } from '@useoptic/cli-client';\nimport packageJson from '../package.json';\nimport { newAnalyticsEventBus } from '@useoptic/analytics/lib/eventbus';\nimport niceTry from 'nice-try';\n\nconst clientId = `local_cli_${packageJson.version}`;\n\nlet isAnalyticsEnabled = window.opticAnalyticsEnabled;\nif (!isAnalyticsEnabled) {\n  window.FS && window.FS.shutdown();\n}\nconst client = new Client('/api');\n\nconst userPromise = new Promise(async (resolve) => {\n  const anonymousId = await niceTry(async () => {\n    const response = await client.getIdentity();\n    if (response.ok) {\n      const { user, anonymousId } = await response.json();\n      if (isAnalyticsEnabled) {\n        window.FS.identify(anonymousId, {\n          email: user && user.email,\n        });\n        window.Intercom('update', {\n          user_id: anonymousId,\n          id: user && user.sub,\n          email: user && user.email,\n        });\n      }\n      return anonymousId;\n    }\n\n    return 'anon_id';\n  });\n\n  resolve(anonymousId);\n});\n\nexport const analyticsEvents = newAnalyticsEventBus(async (batchId) => {\n  const clientAgent = await userPromise;\n\n  const clientContext = {\n    clientAgent: clientAgent,\n    clientId: clientId,\n    clientSessionInstanceId: batchId,\n    clientTimestamp: new Date().toISOString(),\n  };\n  return clientContext;\n});\n\n//forward analytics to central CLI server bus\nanalyticsEvents.listen((event) => {\n  if (isAnalyticsEnabled) {\n    try {\n      if (window.FS) {\n        window.FS.event(event.type, { ...event.data, ...event.context });\n      }\n      client.postTrackingEvents([event]);\n    } catch (e) {}\n  }\n});\n\nexport function trackUserEvent(event) {\n  analyticsEvents.emit(event);\n}\n\nexport async function track(event, props) {\n  console.group(`Deprecated Event Called ${event}`);\n  console.groupEnd();\n}\n\n// class EventTrackingEmitter extends EventEmitter {}\n//\n// export const trackEmitter = new EventTrackingEmitter();\n//\n// export async function track(event, props) {\n//   await readyPromise;\n//   if (isAnalyticsEnabled) {\n//     const allProps = { ...props, opticVersion };\n//     window.analytics.track(event, allProps);\n//     window.FS.event(event, allProps);\n//   }\n//   trackEmitter.emit('event', event, props || {});\n// }\n","import React, { useContext, useEffect, useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport { useHistory } from 'react-router-dom';\nimport uuidv4 from 'uuid/v4';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport Typography from '@material-ui/core/Typography';\nimport { IgnoreDiffContext, SuggestionsContext } from './DiffPageNew';\nimport { TextField } from '@material-ui/core';\nimport { UserCommittedChanges } from '@useoptic/analytics/lib/events/diffs';\nimport { trackUserEvent } from '../../../Analytics';\nimport {\n  Facade,\n  JsonHelper,\n  opticEngine,\n  RfcCommandContext,\n} from '@useoptic/domain';\nimport { RfcContext } from '../../../contexts/RfcContext';\nimport { useServices } from '../../../contexts/SpecServiceContext';\nimport { useBaseUrl } from '../../../contexts/BaseUrlContext';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { DiffContext } from './DiffContext';\nimport { EndpointsContext } from '../../../contexts/EndpointContext';\nimport { PathAndMethod } from './PathAndMethod';\nimport { PURPOSE } from '../../../ContributionKeys';\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport default function FinalizeDialog(props) {\n  const { open, close, canOnlyReset, captureId } = props;\n  const [commitMessage, setCommitMessage] = useState('');\n  const [saving, setSaving] = useState(false);\n\n  const { acceptedSuggestions } = useContext(SuggestionsContext);\n  const { ignoredDiffs } = useContext(IgnoreDiffContext);\n  const { endpointDescriptor, endpointId } = useContext(EndpointsContext);\n  const [endpointName, setEndpointName] = useState(\n    endpointDescriptor.endpointPurpose\n  );\n  const { specService } = useServices();\n  const { reset } = useContext(DiffContext);\n  const baseUrl = useBaseUrl();\n\n  const history = useHistory();\n\n  const { initialEventStore, rfcId, clientSessionId, clientId } = useContext(\n    RfcContext\n  );\n\n  const backToHome = () => {\n    history.push(`${baseUrl}/diffs/${captureId}`);\n  };\n  const commit = async () => {\n    const newEventStore = initialEventStore.getCopy(rfcId);\n    const {\n      StartBatchCommit,\n      EndBatchCommit,\n      AddContribution,\n    } = opticEngine.com.useoptic.contexts.rfc.Commands;\n    const batchId = uuidv4();\n    const specContext = withSpecContext(\n      newEventStore,\n      rfcId,\n      clientId,\n      clientSessionId\n    );\n    specContext.applyCommands(\n      JsonHelper.jsArrayToVector([StartBatchCommit(batchId, commitMessage)])\n    );\n\n    //user specified a new name for th endpoint\n    if (endpointDescriptor.endpointPurpose !== endpointName) {\n      const addContribution = AddContribution(\n        endpointId,\n        PURPOSE,\n        endpointName\n      );\n      specContext.applyCommands(JsonHelper.jsArrayToVector([addContribution]));\n    }\n\n    acceptedSuggestions.forEach((suggestion) => {\n      specContext.applyCommands(JsonHelper.seqToVector(suggestion.commands));\n    });\n    specContext.applyCommands(\n      JsonHelper.jsArrayToVector([EndBatchCommit(batchId)])\n    );\n    await specService.saveEvents(newEventStore, rfcId);\n\n    history.push(`${baseUrl}/diffs/${captureId}`);\n\n    // Delay sending commit event to ensure that event happens after switch to diffs page\n    // neccesary for demo flow\n    // TODO: Switch demo implementation to use better state machine to mitigate this problem\n    setTimeout(() => {\n      trackUserEvent(\n        UserCommittedChanges.withProps({\n          message: commitMessage,\n          captureId,\n          suggestions: acceptedSuggestions.length,\n        })\n      );\n    }, 500);\n  };\n\n  useEffect(() => {\n    const pastTenseChanges = acceptedSuggestions\n      .map((i) => `- ${i.pastTenseAction}`)\n      .join('\\n');\n    setCommitMessage(`\\n\\nChanges:\\n${pastTenseChanges}`);\n  }, [open, acceptedSuggestions.length, ignoredDiffs.length]);\n\n  const pluralIf = (collection) => (collection.length !== 1 ? 's' : '');\n  const pluralIfI = (i) => (i !== 1 ? 's' : '');\n\n  const hasChanges = acceptedSuggestions.length > 0;\n  return (\n    <Dialog\n      open={open}\n      TransitionComponent={Transition}\n      keepMounted\n      onClose={close}\n    >\n      <DialogTitle>{'Commit changes to API specification'}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          {!endpointDescriptor.endpointPurpose && hasChanges ? (\n            <div style={{ paddingBottom: 18 }}>\n              <PathAndMethod\n                path={endpointDescriptor.fullPath}\n                method={endpointDescriptor.httpMethod}\n              />\n              <TextField\n                style={{ marginTop: 12 }}\n                value={endpointName}\n                onChange={(e) => setEndpointName(e.target.value)}\n                placeholder=\"Endpoint Name\"\n                fullWidth\n                error={!endpointName}\n                helperText={!endpointName && 'What does this endpoint do?'}\n                required\n              />\n            </div>\n          ) : null}\n          You have accepted {acceptedSuggestions.length} suggestion\n          {pluralIf(acceptedSuggestions)}, and ignored {ignoredDiffs.length}{' '}\n          diff{pluralIf(ignoredDiffs)}\n          {hasChanges && (\n            <TextField\n              multiline\n              label=\"Commit Message:\"\n              style={{ marginTop: 15 }}\n              value={commitMessage}\n              fullWidth\n              autoFocus\n              onFocus={(e) => e.currentTarget.setSelectionRange(0, 0)}\n              onChange={(e) => setCommitMessage(e.target.value)}\n            />\n          )}\n        </DialogContentText>\n      </DialogContent>\n      {!hasChanges && (\n        <DialogActions>\n          <Button size=\"small\" onClick={backToHome}>\n            Return to Capture\n          </Button>\n        </DialogActions>\n      )}\n      {saving && <LinearProgress variant=\"indeterminate\" />}\n      {hasChanges && !saving && (\n        <DialogActions>\n          {canOnlyReset ? (\n            <Button size=\"small\" onClick={reset} color=\"default\">\n              Reset\n            </Button>\n          ) : (\n            <Button size=\"small\" onClick={close} color=\"default\">\n              Close\n            </Button>\n          )}\n          <Button\n            size=\"small\"\n            variant=\"contained\"\n            disabled={!endpointName}\n            onClick={async () => {\n              setSaving(true);\n              await commit();\n            }}\n            color=\"primary\"\n          >\n            Commit Changes\n          </Button>\n        </DialogActions>\n      )}\n    </Dialog>\n  );\n}\n\nexport function withSpecContext(eventStore, rfcId, clientId, clientSessionId) {\n  return {\n    applyCommands(commands) {\n      try {\n        const batchId = uuidv4();\n        const commandContext = new RfcCommandContext(\n          clientId,\n          clientSessionId,\n          batchId\n        );\n        Facade.fromCommands(eventStore, rfcId, commands, commandContext);\n      } catch (e) {\n        console.error(e);\n      }\n    },\n  };\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ApiCheckCompleted = exports.ApiInitializedInProject = exports.UserLoggedInFromCLI = exports.ApiCreated = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar RegisterEvent_1 = require(\"../interfaces/RegisterEvent\");\n\nvar Events_1 = require(\"../interfaces/Events\"); // @ts-ignore\n\n\nvar Joi = tslib_1.__importStar(require(\"@hapi/joi\"));\n\nrequire(\"joi-extract-type\"); // Sent whenever an API is created\n\n\nvar ApiCreatedSchema = Joi.object({\n  apiName: Joi.string().required()\n});\nexports.ApiCreated = RegisterEvent_1.DescribeEvent(Events_1.Events.ApiCreated, ApiCreatedSchema, function (props) {\n  return \"An API called \".concat(props.apiName, \" was created\");\n});\nvar UserLoggedInFromCLISchema = Joi.object({\n  userId: Joi.string().required()\n});\nexports.UserLoggedInFromCLI = RegisterEvent_1.DescribeEvent(Events_1.Events.UserLoggedInFromCLI, UserLoggedInFromCLISchema, function (props) {\n  return \"User \".concat(props.userId, \" logged in\");\n});\nvar ApiInitializedInProjectSchema = Joi.object({\n  apiName: Joi.string().required(),\n  source: Joi.string().required(),\n  cwd: Joi.string().required()\n});\nexports.ApiInitializedInProject = RegisterEvent_1.DescribeEvent(Events_1.Events.ApiInitializedInProject, ApiInitializedInProjectSchema, function (props) {\n  return \"An API called \".concat(props.apiName, \" was initialized in \").concat(props.cwd);\n});\nvar ApiCheckCompletedSchema = Joi.any();\nexports.ApiCheckCompleted = RegisterEvent_1.DescribeEvent(Events_1.Events.ApiCheckCompleted, ApiCheckCompletedSchema, function (props) {\n  return \"API Check for \".concat(props.mode, \" task: \").concat(props.taskName, \" \").concat(props.passed ? 'passed' : 'failed', \" \");\n});","import {asAbsolutePath, asPathTrailComponents} from '../components/utilities/PathUtilities.js';\n\nclass RequestUtilities {\n    static hasBody(bodyDescriptor) {\n        return RequestUtilities.hasNormalizedBody(getNormalizedBodyDescriptor(bodyDescriptor))\n    }\n\n    static hasNormalizedBody(normalizedBodyDescriptor) {\n        const {shapeId, isRemoved} = normalizedBodyDescriptor\n        if (shapeId && !isRemoved) {\n            return true\n        }\n        return false\n    }\n\n    static canAddBody(request) {\n        const {requestDescriptor} = request\n        const {httpMethod, bodyDescriptor} = requestDescriptor\n        const hasBody = RequestUtilities.hasBody(bodyDescriptor)\n        const httpAllowsBodyForMethod = httpMethod.toLowerCase() !== 'get'\n        return !hasBody && httpAllowsBodyForMethod\n    }\n\n    static absolutePath(pathId, pathsById) {\n        return asAbsolutePath(asPathTrailComponents(pathId, pathsById))\n    }\n\n    static requestName(request, pathsById) {\n        const {requestDescriptor} = request;\n        const {httpMethod, pathComponentId} = requestDescriptor\n        return `${httpMethod} ${RequestUtilities.absolutePath(pathComponentId, pathsById)}`\n    }\n}\n\nexport {\n    RequestUtilities\n}\n\n\nexport function getNormalizedBodyDescriptor(value) {\n  if (value && value.ShapedBodyDescriptor) {\n    return value.ShapedBodyDescriptor;\n  }\n  return {};\n}\n","import {\n  asPathTrail,\n  getNameWithFormattedParameters,\n  isPathParameter,\n} from '../components/utilities/PathUtilities';\n\nimport {\n  DESCRIPTION,\n  pathMethodKeyBuilder,\n  PURPOSE,\n} from '../ContributionKeys';\n\nimport { getNormalizedBodyDescriptor } from './RequestUtilities';\nimport sortBy from 'lodash.sortby';\n\nexport interface EndpointDescriptor {\n  httpMethod: string;\n  method: string;\n  pathId: string;\n  fullPath: string;\n  pathParameters: Array<{\n    pathId: string;\n    name: string;\n    description: string;\n  }>;\n  requestBodies: Array<{\n    requestId: string;\n    requestBody: any; // replace with RequestBodyDescriptor\n  }>;\n  responses: Array<{\n    responseId: string;\n    responseBody: any; // replace with ResponseBodyDescriptor\n    statusCode: number; // replace with HttpStatusCode enum?\n  }>;\n  endpointPurpose?: string;\n  endpointDescription?: string;\n  isEmpty: boolean;\n}\n\nexport function getEndpointId({ method, pathId }) {\n  return pathMethodKeyBuilder(pathId, method);\n}\n\nexport function createEndpointDescriptor(\n  { method, pathId }: { method: string; pathId: string },\n  cachedQueryResults: {\n    requests: any[];\n    pathsById: { [id: string]: any };\n    requestIdsByPathId: { [id: string]: any };\n    responsesArray: any[];\n    contributions: any;\n  }\n): EndpointDescriptor {\n  const {\n    requests,\n    pathsById,\n    requestIdsByPathId,\n    responsesArray,\n    contributions,\n  } = cachedQueryResults;\n\n  const endpointId = getEndpointId({ pathId, method });\n  const requestIdsOnPath = (requestIdsByPathId[pathId] || []).map(\n    (requestId) => requests[requestId]\n  );\n  const requestsOnPathAndMethod = requestIdsOnPath.filter(\n    (request) => request.requestDescriptor.httpMethod === method.toUpperCase()\n  );\n\n  let fullPath;\n  let pathParameters = [];\n\n  //try to resolve this path\n  try {\n    const pathTrail = asPathTrail(pathId, pathsById);\n    const pathTrailComponents = pathTrail.map((pathId) => pathsById[pathId]);\n\n    const pathTrailWithNames = pathTrailComponents.map((pathComponent) => {\n      const pathComponentName = getNameWithFormattedParameters(pathComponent);\n      const pathComponentId = pathComponent.pathId;\n      return {\n        pathComponentName,\n        pathComponentId,\n      };\n    });\n\n    fullPath = pathTrailWithNames\n      .map(({ pathComponentName }) => pathComponentName)\n      .join('/');\n\n    pathParameters = pathTrail\n      .map((pathId) => pathsById[pathId])\n      .filter((p) => isPathParameter(p))\n      .map((p) => ({\n        pathId: p.pathId,\n        name: p.descriptor.ParameterizedPathComponentDescriptor.name,\n        description: contributions.getOrUndefined(p.pathId, DESCRIPTION),\n      }));\n  } catch (e) {\n    // TODO figure out what error we would expect for method / pathId we can't find, so\n    // we can deal with that explicitly and stop swallowing other errors\n    console.error(e);\n  }\n\n  if (!fullPath) return null; // can not find endpoint requests\n\n  const requestBodies = requestsOnPathAndMethod.map(\n    ({ requestId, requestDescriptor }) => {\n      const requestBody = getNormalizedBodyDescriptor(\n        requestDescriptor.bodyDescriptor\n      );\n      return {\n        requestId,\n        requestBody,\n      };\n    }\n  );\n\n  const responsesForPathAndMethod = sortBy(\n    responsesArray\n      .filter(\n        (response) =>\n          response.responseDescriptor.httpMethod === method.toUpperCase() &&\n          response.responseDescriptor.pathId === pathId\n      )\n      .map(({ responseId, responseDescriptor }) => {\n        const responseBody = getNormalizedBodyDescriptor(\n          responseDescriptor.bodyDescriptor\n        );\n        return {\n          responseId,\n          responseBody,\n          statusCode: responseDescriptor.httpStatusCode,\n        };\n      }),\n    ['statusCode']\n  );\n\n  return {\n    httpMethod: method,\n    method,\n    pathId,\n    fullPath,\n    pathParameters,\n    requestBodies,\n    responses: responsesForPathAndMethod,\n    endpointPurpose: contributions.getOrUndefined(endpointId, PURPOSE),\n    endpointDescription: contributions.getOrUndefined(endpointId, DESCRIPTION),\n    isEmpty:\n      requestBodies.length === 0 && responsesForPathAndMethod.length === 0,\n  };\n}\n","import * as React from 'react';\nimport {\n  commandsToJson,\n  Facade,\n  Queries,\n  RfcCommandContext,\n} from '@useoptic/domain';\nimport { GenericContextFactory } from './GenericContextFactory.js';\nimport { withInitialRfcCommandsContext } from './InitialRfcCommandsContext.js';\nimport debounce from 'lodash.debounce';\nimport { useSnackbar, VariantType, withSnackbar } from 'notistack';\nimport uuidv4 from 'uuid/v4';\nimport { CommandContext, withCommandContext } from './CommandContext';\nimport memoize from 'memoize-weak';\nimport { InitialRfcCommandsContext } from './InitialRfcCommandsContext';\nimport { useContext, useEffect, useState } from 'react';\n\nconst {\n  Context: RfcContext,\n  withContext: withRfcContext,\n} = GenericContextFactory(null);\n\nglobal.commands = [];\nglobal.getCommandsAsJson = function () {\n  return commandsToJson(global.commands);\n};\n\nexport function stuffFromQueries(queries) {\n  const contributions = queries.contributions();\n\n  const {\n    requests,\n    pathComponents,\n    responses,\n    requestParameters,\n  } = queries.requestsState();\n  const pathIdsByRequestId = queries.pathsWithRequests();\n  const pathsById = pathComponents;\n  // const absolutePaths = Object.keys(pathsById).map(pathId => ({ [pathId]: queries.absolutePath(pathId) })).reduce((acc, value) => Object.assign(acc, value), {})\n  // console.log({ absolutePaths })\n  const pathIdsWithRequests = new Set(Object.values(pathIdsByRequestId));\n\n  const endpoints = queries.endpoints();\n  const shapesState = queries.shapesState();\n  const shapesResolvers = queries.shapesResolvers();\n  const requestIdsByPathId = Object.entries(pathIdsByRequestId).reduce(\n    (acc, entry) => {\n      const [requestId, pathId] = entry;\n      const value = acc[pathId] || [];\n      value.push(requestId);\n      acc[pathId] = value;\n      return acc;\n    },\n    {}\n  );\n  const cachedQueryResults = {\n    contributions,\n    requests,\n    requestParameters,\n    responses,\n    responsesArray: Object.values(responses),\n    pathIdsByRequestId,\n    requestIdsByPathId,\n    pathsById,\n    endpoints,\n    pathIdsWithRequests,\n    shapesState,\n    shapesResolvers,\n  };\n  return cachedQueryResults;\n}\n\nfunction BaseRfcStore(props) {\n  const { clientId, clientSessionId } = useContext(CommandContext);\n  const initialRfcInput = useContext(InitialRfcCommandsContext);\n  const [error, setError] = useState(null);\n  const [x, setX] = useState(null);\n  const [updateCount, setUpdateCount] = useState(0);\n  const { initialCommandsString, initialEventsString, rfcId } = initialRfcInput;\n\n  useEffect(\n    function () {\n      try {\n        const eventStore = Facade.makeEventStore();\n        global.eventStore = eventStore;\n        if (initialEventsString) {\n          eventStore.bulkAdd(rfcId, initialEventsString);\n        }\n        const batchId = 'initial-batch';\n        const commandContext = new RfcCommandContext(\n          clientId,\n          clientSessionId,\n          batchId\n        );\n        const rfcService = Facade.fromJsonCommands(\n          eventStore,\n          rfcId,\n          initialCommandsString || '[]',\n          commandContext\n        );\n        setX({ rfcService, eventStore });\n      } catch (e) {\n        setError(e);\n      }\n    },\n    [initialCommandsString, initialEventsString]\n  );\n  if (!x) {\n    return null;\n  }\n\n  if (error) {\n    console.error(error);\n    return <div>Error! :(</div>;\n  }\n  const { rfcService, eventStore } = x;\n  const initialEventStore = (props.initialEventStore || eventStore).getCopy(\n    rfcId\n  );\n\n  function handleCommands(...commands) {\n    const batchId = uuidv4();\n    const commandContext = new RfcCommandContext(\n      clientId,\n      clientSessionId,\n      batchId\n    );\n\n    try {\n      rfcService.handleCommands(rfcId, commandContext, ...commands);\n      setUpdateCount((c) => c + 1);\n      if (props.onChange) {\n        props.onChange({\n          rfcId,\n          eventStore,\n          rfcService,\n        });\n      }\n    } catch (e) {\n      setError(e);\n    }\n  }\n\n  const handleCommand = handleCommands;\n\n  const queries = Queries(eventStore, rfcService, rfcId);\n  const cachedQueryResults = stuffFromQueries(queries);\n  const { specService } = props;\n  const value = {\n    rfcId,\n    clientSessionId,\n    clientId,\n    rfcService,\n    initialEventStore,\n    eventStore,\n    queries,\n    cachedQueryResults,\n    handleCommand,\n    handleCommands,\n  };\n  return (\n    <RfcContext.Provider value={value}>{props.children}</RfcContext.Provider>\n  );\n}\n\nconst RfcStore = BaseRfcStore;\n\nfunction LocalRfcStore(props) {\n  const { enqueueSnackbar } = useSnackbar();\n  const { specService } = props;\n\n  async function handleChange({ eventStore, rfcId }) {\n    try {\n      await specService.saveEvents(eventStore, rfcId);\n    } catch (e) {\n      debugger;\n      enqueueSnackbar(\n        'Unable to save changes. Please make sure the CLI is still running.',\n        { variant: 'error' }\n      );\n    }\n  }\n\n  return (\n    <RfcStore\n      onChange={debounce(handleChange, 4000, { leading: true, trailing: true })}\n    >\n      {props.children}\n    </RfcStore>\n  );\n}\n\nconst LocalDiffRfcStore = BaseRfcStore;\n\nexport {\n  RfcStore,\n  LocalRfcStore,\n  LocalDiffRfcStore,\n  RfcContext,\n  withRfcContext,\n};\n\n// function commandNameFor(command) {\n//     const name = command.$classData.name\n//     const split = name.split('$')\n//     return split[1]\n// }\n","export const PURPOSE = 'purpose'\nexport const DESCRIPTION = 'description'\nexport const BODY_DESCRIPTION = 'body_description'\n\nexport const pathMethodKeyBuilder = (path, method) => `${path}.${method.toUpperCase()}`\nexport const requestBodyKeyBuilder = (path, method) => `${pathMethodKeyBuilder(path, method)}.requestBody`\nexport const responseKeyBuilder = (path, method) => `${pathMethodKeyBuilder(path, method)}.response`\n","import React, { useContext, useState } from 'react';\nimport { GenericContextFactory } from '../../../../contexts/GenericContextFactory';\n\nconst {\n  Context: ShapeRenderContext,\n  withContext: withShapeRenderContext,\n} = GenericContextFactory(null);\n\nfunction ShapeRenderStore(props) {\n  const [compassState, setCompassState] = useState({\n    isAbove: false,\n    isBelow: false,\n    x: null,\n    width: null,\n  });\n\n  const context = {\n    shapeRender: props.shape,\n    rootId: props.shape.rootId,\n    diffDescription: props.diffDescription,\n    suggestion: props.suggestion,\n    diff: props.diff,\n    exampleOnly: props.exampleOnly,\n    hideDivider: props.hideDivider,\n    compassState,\n    setCompassState,\n  };\n\n  return (\n    <ShapeRenderContext.Provider value={context}>\n      {props.children}\n    </ShapeRenderContext.Provider>\n  );\n}\n\nexport { ShapeRenderStore, ShapeRenderContext, withShapeRenderContext };\n\nexport function useDiff() {\n  const context = useContext(ShapeRenderContext);\n\n  if (!context)\n    throw Error('useDiff can only be used inside provided ShapeRenderContext');\n\n  return {\n    diff: context.diff,\n    diffDescription: context.diffDescription,\n  };\n}\n\n// Expand and Show States\nconst {\n  Context: ShapeExpandedContext,\n  withContext: withShapeExpandedContext,\n} = GenericContextFactory(null);\n\nclass ShapeExpandedStore extends React.Component {\n  state = {\n    collapsedIds: new Set(),\n    showAllLists: new Set(),\n  };\n\n  render() {\n    const context = {\n      collapsedIds: Array.from(this.state.collapsedIds),\n      showAllLists: Array.from(this.state.showAllLists),\n\n      setCollapsedIds: (id, include) => {\n        if (include) {\n          this.state.collapsedIds.add(id);\n        } else {\n          this.state.collapsedIds.delete(id);\n        }\n        this.setState({ collapsedIds: this.state.collapsedIds });\n      },\n      setShowAllLists: (id, include) => {\n        if (include) {\n          this.state.showAllLists.add(id);\n        } else {\n          this.state.showAllLists.delete(id);\n        }\n        this.setState({ showAllLists: this.state.showAllLists });\n      },\n    };\n\n    return (\n      <ShapeExpandedContext.Provider value={context}>\n        {this.props.children}\n      </ShapeExpandedContext.Provider>\n    );\n  }\n}\n\nexport { ShapeExpandedStore, ShapeExpandedContext, withShapeExpandedContext };\n","import React, {useContext} from 'react';\n\nconst BaseUrlContext = React.createContext(null);\nBaseUrlContext.displayName = 'BaseUrlContext';\n\n// only expose the Provider component, but hide the Consumer in favour of hooks\nexport const { Provider } = BaseUrlContext;\n\n\nexport function useBaseUrl() {\n  const context = useContext(BaseUrlContext);\n  return context.url;\n}\n","import React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst styles = theme => ({\n\troot: {\n\t\tbackgroundColor: '#fafafa',\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n\t\twidth: '100%',\n\t\theight: '100%',\n\t\talignItems: 'center',\n\t},\n\tloaderCenter: {\n\t\twidth: 320,\n\t\theight: 120,\n\t\tmarginTop: 200,\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'row',\n\t\talignItems: 'center',\n\t\tjustifyContent: 'center'\n\t}\n});\n\nclass Loading extends React.Component {\n\trender() {\n\n\t\tconst {classes} = this.props\n\n\t\treturn <div className={classes.root}>\n\n\t\t\t<Paper elevation={2} className={classes.loaderCenter}>\n\t\t\t\t<CircularProgress disableShrink={true} thickness={5} style={{marginRight: 22}} size={25} />\n\t\t\t\t<Typography variant=\"h4\" color=\"primary\">Loading API...</Typography>\n\t\t\t</Paper>\n\n\t\t</div>\n\t}\n}\n\nexport default withStyles(styles)(Loading)\n","import React, { useCallback, useEffect } from 'react';\nimport './App.css';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { appTheme } from './theme';\nimport { BrowserRouter, Route, useLocation } from 'react-router-dom';\nimport { SnackbarProvider } from 'notistack';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport { trackUserEvent } from './Analytics';\nimport { JavascriptErrorDetectedInFrontend } from '@useoptic/analytics/lib/events/errors';\nimport * as SupportLinks from './components/support/Links';\n\nclass App extends React.Component {\n  state = { hasError: false };\n\n  render() {\n    const { hasError, error } = this.state;\n\n    if (hasError) return <AppError error={error} />;\n\n    return (\n      <React.Fragment>\n        <CssBaseline />\n        <ThemeProvider theme={appTheme}>\n          <SnackbarProvider maxSnack={1}>\n            <BrowserRouter>\n              <>\n                <Route path=\"/\" component={this.props.topLevelRoutes} />\n              </>\n            </BrowserRouter>\n          </SnackbarProvider>\n        </ThemeProvider>\n      </React.Fragment>\n    );\n  }\n  // Life cycle methods\n  // ------------------\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true, error: error };\n  }\n}\n\nfunction AppError(props) {\n  const onClickRefresh = useCallback((e) => {\n    e.preventDefault();\n    window && window.location && window.location.reload(true);\n  });\n\n  useEffect(() => {\n    trackUserEvent(\n      JavascriptErrorDetectedInFrontend.withProps({\n        message: props.error.message,\n        stack: props.error.stack,\n      })\n    );\n  });\n\n  // we have to be as conservative as possible here and only use styles from App.css, as we're not sure what subsystems this error has touched\n  return (\n    <div className=\"app-error-container\">\n      <div className=\"app-error\">\n        <h1>There was a problem in displaying the Optic app.</h1>\n\n        <h4>\n          Something that we didn't anticipate happened, and we can't recover\n          from it automatically.\n        </h4>\n\n        <h5>\n          Please feel free to{' '}\n          <a href={SupportLinks.Contact('Optic App crash report')}>\n            contact us about it.\n          </a>\n        </h5>\n\n        <p>Meanwhile, you could try the following:</p>\n\n        <ul>\n          <li>\n            Create a debug file and{' '}\n            <a href={SupportLinks.Contact('Optic App crash report')}>\n              {' '}\n              email it to our team\n            </a>{' '}\n            or <a href={SupportLinks.GithubIssues}> open a GitHub issue</a>\n            {': '}\n            <ul>\n              <li>Open Developer Tools</li>\n              <li>\n                Type <code>debugOptic()</code> in the console\n              </li>\n            </ul>\n          </li>\n          <li>\n            <a href=\"#\" onClick={onClickRefresh}>\n              Refresh the page\n            </a>{' '}\n            in your browser.\n          </li>\n          <li>\n            Try <a href=\"https://browsehappy.com/\">a different browser</a>, if\n            you can.\n          </li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/home/runner/work/optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/home/runner/work/optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.newAnalyticsEventBus = void 0;\n\nvar events_1 = require(\"events\");\n\nvar uuid_1 = require(\"uuid\");\n\nfunction newAnalyticsEventBus(getContext) {\n  var eventEmitter = new events_1.EventEmitter();\n  return {\n    emit: function () {\n      var _emit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var batchId,\n            context,\n            _len,\n            events,\n            _key,\n            _args = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                batchId = uuid_1.v4();\n                _context.next = 3;\n                return getContext(batchId);\n\n              case 3:\n                context = _context.sent;\n\n                for (_len = _args.length, events = new Array(_len), _key = 0; _key < _len; _key++) {\n                  events[_key] = _args[_key];\n                }\n\n                events.forEach(function (event) {\n                  eventEmitter.emit('event', Object.assign(Object.assign({}, event), {\n                    context: context\n                  }));\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function emit() {\n        return _emit.apply(this, arguments);\n      }\n\n      return emit;\n    }(),\n    eventEmitter: eventEmitter,\n    listen: function listen(callback) {\n      eventEmitter.on('event', callback);\n    }\n  };\n}\n\nexports.newAnalyticsEventBus = newAnalyticsEventBus;","import React from 'react';\nimport {GenericContextFactory} from './GenericContextFactory';\nimport uuidv4 from 'uuid/v4';\n\nconst clientSessionId = uuidv4()\nconst clientId = 'anonymous'\n\nconst {\n    Context: CommandContext,\n    withContext: withCommandContext\n} = GenericContextFactory({ clientSessionId, clientId })\n\n\nclass CommandContextStore extends React.Component {\n    render() {\n        const {\n            clientSessionId,\n            clientId\n        } = this.props;\n\n        const context = {\n            clientSessionId,\n            clientId\n        };\n\n        return (\n            <CommandContext.Provider value={context}>\n                {this.props.children}\n            </CommandContext.Provider>\n        )\n    }\n}\n\nexport {\n    CommandContext,\n    withCommandContext,\n    CommandContextStore\n}\n","export function dumpSpecServiceState(specService) {\n  return async function (options) {\n    const {\n      outputFileName,\n      downloadSourcePath,\n      downloadDestinationPath\n    } = options;\n\n    const events = await specService.listEvents();\n    const captures = await specService.listCaptures();\n    const { captureId } = captures.captures[0];\n    const session = await specService.listCapturedSamples(captureId);\n\n    const output = JSON.stringify({\n      events: JSON.parse(events),\n      session,\n      examples: {}\n    }, null, 2);\n\n    const blob = new Blob([output], {type: 'application/json'});\n\n    const url = window.URL.createObjectURL(blob);\n\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = outputFileName;\n    console.log(link);\n    link.click()\n    return `mv \"${downloadSourcePath}/${outputFileName}\" \"${downloadDestinationPath}/${outputFileName}\"`\n  };\n}","import React, { useContext, useEffect, useState } from 'react';\nimport { GenericContextFactory } from './GenericContextFactory';\n\nconst {\n  Context: SpecServiceContext,\n  withContext: withSpecServiceContext,\n} = GenericContextFactory(null);\n\nclass SpecServiceStore extends React.Component {\n  state = { enabledFeatures: null };\n\n  componentDidMount() {\n    const { specService, specServiceEvents } = this.props;\n    if (!specServiceEvents) {\n      console.warn('I need specServiceEvents');\n      debugger;\n    } else {\n      specServiceEvents.on('events-updated', () => {\n        this.forceUpdate();\n      });\n    }\n\n    const determineEnabledFeatures = async () => {\n      const enabledFeatures = await specService.getEnabledFeatures();\n\n      this.setState({ enabledFeatures });\n    };\n\n    determineEnabledFeatures();\n  }\n\n  render() {\n    const {\n      specService,\n      captureServiceFactory,\n      diffServiceFactory,\n    } = this.props;\n    const { enabledFeatures } = this.state;\n    const value = {\n      specService,\n      captureServiceFactory,\n      diffServiceFactory,\n      enabledFeatures,\n    };\n    return (\n      <SpecServiceContext.Provider value={value}>\n        {this.props.children}\n      </SpecServiceContext.Provider>\n    );\n  }\n}\n\nfunction useSpecService() {\n  const { specService } = useContext(SpecServiceContext);\n  return specService;\n}\n\nfunction useServices() {\n  const { specService, diffServiceFactory, captureServiceFactory } = useContext(\n    SpecServiceContext\n  );\n\n  return {\n    specService,\n    diffServiceFactory,\n    captureServiceFactory,\n  };\n}\n\nfunction useEnabledFeatures() {\n  const specContext = useContext(SpecServiceContext);\n\n  if (!specContext)\n    throw Error(\n      'useEnabledFeatures can only be used inside SpecServiceContext'\n    );\n\n  return specContext.enabledFeatures;\n}\n\nexport {\n  withSpecServiceContext,\n  SpecServiceContext,\n  SpecServiceStore,\n  useSpecService,\n  useServices,\n  useEnabledFeatures,\n};\n","export function debugDump(specService, captureId) {\n  return async function () {\n\n    const events = await specService.listEvents();\n    const session = await specService.listCapturedSamples(captureId);\n    const sessionCleaned = JSON.parse(JSON.stringify(session));\n\n    console.log('sanitizing data...');\n    sessionCleaned.samples.forEach((i) => {\n      i.request.body.value.asJsonString = null;\n      i.request.body.value.asText = null;\n\n      i.response.body.value.asJsonString = null;\n      i.response.body.value.asText = null;\n    });\n\n    const output = JSON.stringify(\n      {\n        events: JSON.parse(events),\n        session: sessionCleaned,\n        examples: {},\n      },\n      null,\n      2\n    );\n\n    const blob = new Blob([output], { type: 'application/json' });\n    const url = window.URL.createObjectURL(blob);\n\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `debug-capture-${captureId}-${Math.floor(\n      Date.now() / 1000\n    )}.json`;\n    console.log(link);\n    link.click();\n  };\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport {Typography} from '@material-ui/core';\nimport {ParametersStyles} from './DocConstants';\nimport {MarkdownContribution} from './DocContribution';\nimport {DESCRIPTION} from '../../ContributionKeys';\n\nexport function DocParameter({title, description, typeName, children, paramId, updateContribution = () => {}}) {\n  return (\n    <div>\n      <div style={{paddingTop: 6, paddingBottom: 6, paddingLeft: 2}}>\n        <div>\n          <Typography variant=\"subtitle1\" component=\"span\" style={ParametersStyles}>{title}</Typography>\n          <Typography component=\"span\" style={{marginLeft: 6, fontSize: 12}}>{typeName || 'String'}</Typography>\n        </div>\n        <MarkdownContribution value={description}\n                              label=\"Description\"\n                              onChange={(value) => {\n                                updateContribution(paramId, DESCRIPTION, value)\n                              }}\n        />\n      </div>\n      {/*<DocDivider/>*/}\n    </div>\n  );\n}\n","import React, { useContext } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useRouterPaths } from '../../RouterPaths';\nimport Page, { usePageTitle } from '../Page';\nimport { Link, Route, Switch, useParams } from 'react-router-dom';\nimport { RfcContext } from '../../contexts/RfcContext';\nimport { DiffPreviewer, getOrUndefined, toOption } from '@useoptic/domain';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Button } from '@material-ui/core';\nimport {\n  EndpointsContext,\n  EndpointsContextStore,\n} from '../../contexts/EndpointContext';\nimport { PathAndMethodLarge, SquareChip } from '../diff/v2/PathAndMethod';\nimport Typography from '@material-ui/core/Typography';\nimport { DocDivider } from './DocConstants';\nimport { DocParameter } from './DocParameter';\nimport { HeadingContribution, MarkdownContribution } from './DocContribution';\nimport { DESCRIPTION, PURPOSE } from '../../ContributionKeys';\nimport groupBy from 'lodash.groupby';\nimport ContentTabs, { RequestTabsContextStore } from './ContentTabs';\nimport { BreadcumbX } from '../diff/v2/DiffNewRegions';\nimport { ShapeExpandedStore } from '../diff/v2/shape_viewers/ShapeRenderContext';\nimport { ShapeOnlyViewer } from '../diff/v2/shape_viewers/ShapeOnlyShapeRows';\nimport { ShapeBox } from '../diff/v2/DiffReviewExpanded';\nimport Paper from '@material-ui/core/Paper';\nimport EmptyState from '../support/EmptyState';\nimport { AddOpticLink, DocumentingYourApi } from '../support/Links';\nimport { trackUserEvent } from '../../Analytics'\nimport { UpdateContribution } from '@useoptic/analytics/lib/events/diffs'\nconst useStyles = makeStyles((theme) => ({\n  maxWidth: {\n    width: '100%',\n    paddingTop: 60,\n    maxWidth: 750,\n    alignSelf: 'center',\n  },\n  paper: {\n    marginTop: 22,\n    marginBottom: 30,\n  },\n  header: {\n    display: 'flex',\n    flexDirection: 'column',\n    // backgroundColor: 'red',\n    alignItems: 'flex-start',\n    paddingTop: 10,\n    flex: 1,\n    paddingBottom: 5,\n  },\n  contributions: {\n    display: 'flex',\n    flexDirection: 'column',\n    paddingRight: 20,\n    width: '60%',\n  },\n  overviewSection: {\n    paddingTop: 15,\n    paddingBottom: 15,\n  },\n  expand: {\n    display: 'flex',\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    paddingRight: 10,\n    marginTop: 37,\n    backgroundColor: 'rgba(241,241,241,0.69)',\n  },\n  specPreview: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n  },\n}));\n\nexport const DocsPage = ({ match, specService }) => {\n  const routerPaths = useRouterPaths();\n  return (\n    <Page title=\"Documentation\" scrollToTop={true}>\n      <Page.Navbar mini={true} />\n      <Page.Body>\n        <Switch>\n          <Route\n            exact\n            path={routerPaths.docsRoot}\n            component={DocumentationToc}\n          />\n          <Route\n            path={routerPaths.requestDocsRoot}\n            component={EndpointDocumentationWrapper}\n          />\n        </Switch>\n      </Page.Body>\n    </Page>\n  );\n};\n\nexport const DocumentationToc = () => {\n  const classes = useStyles();\n  const { cachedQueryResults } = useContext(RfcContext);\n  const { endpoints } = cachedQueryResults;\n\n  return (\n    <div className={classes.maxWidth}>\n      {endpoints.length === 0 && (\n        <EmptyState\n          title=\"Document your First Endpoint\"\n          content={`\n1. Follow the [Getting Started Tutorial](${AddOpticLink})\n2. Run \\`api start\\` and send the API some traffic\n3. Use [Optic to document your API](${DocumentingYourApi})\n`.trim()}\n        />\n      )}\n      {endpoints.length > 0 && (\n        <>\n          <Typography variant=\"h5\" color=\"primary\">\n            Documentation\n          </Typography>\n          <DocDivider />\n        </>\n      )}\n      <div>\n        {endpoints.map((i) => {\n          return (\n            <EndpointsContextStore method={i.method} pathId={i.pathId}>\n              <EndpointsContext.Consumer>\n                {({\n                  endpointDescriptor,\n                  updateContribution,\n                  getContribution,\n                  endpointId,\n                }) => {\n                  const hasRequestBody = Boolean(\n                    endpointDescriptor.requestBodies.find(\n                      (i) => i.requestBody.httpContentType\n                    )\n                  );\n\n                  return (\n                    <div className={classes.paper}>\n                      <div>\n                        <div className={classes.header}>\n                          <HeadingContribution\n                            value={getContribution(endpointId, PURPOSE)}\n                            label=\"What does this endpoint do?\"\n                            onChange={(value) => {\n                              updateContribution(endpointId, PURPOSE, value);\n                              trackUserEvent(UpdateContribution.withProps({ id: endpointId, purpose: PURPOSE, value}))\n                            }}\n                          />\n\n                          <div style={{ flex: 1 }} />\n\n                          <PathAndMethodLarge\n                            path={endpointDescriptor.fullPath}\n                            method={endpointDescriptor.method}\n                          />\n                        </div>\n\n                        <div className={classes.contributions}>\n                          <MarkdownContribution\n                            value={getContribution(endpointId, DESCRIPTION)}\n                            label=\"Detailed Description\"\n                            onChange={(value) => {\n                              updateContribution(\n                                endpointId,\n                                DESCRIPTION,\n                                value\n                              );\n                              trackUserEvent(UpdateContribution.withProps({ id: endpointId, purpose: DESCRIPTION, value}));\n                            }}\n                          />\n                        </div>\n\n                        <div className={classes.specPreview}>\n                          <div style={{ flex: 1 }} />\n\n                          <Paper className={classes.expand} elevation={0}>\n                            <Button\n                              component={Link}\n                              to={`documentation/paths/${endpointDescriptor.pathId}/methods/${endpointDescriptor.method}`}\n                              size=\"medium\"\n                              color=\"primary\"\n                              endIcon={<ExpandMoreIcon />}\n                            >\n                              Full Documentation\n                            </Button>\n                            <div style={{ flex: 1 }} />\n\n                            {hasRequestBody && (\n                              <Typography\n                                variant=\"overline\"\n                                color=\"textSecondary\"\n                                style={{ marginRight: 15 }}\n                              >\n                                Has Request Body\n                              </Typography>\n                            )}\n\n                            <Typography\n                              variant=\"overline\"\n                              color=\"textSecondary\"\n                              style={{ marginRight: 7 }}\n                            >\n                              Responses:{' '}\n                            </Typography>\n                            <div\n                              style={{\n                                marginTop: 3,\n                                display: 'flex',\n                                alignItems: 'center',\n                              }}\n                            >\n                              {endpointDescriptor.responses.map((res) => {\n                                return (\n                                  <SquareChip\n                                    label={res.statusCode}\n                                    bgColor={'#32536a'}\n                                    color=\"white\"\n                                    style={{ marginRight: 12 }}\n                                  />\n                                );\n                              })}\n                            </div>\n                          </Paper>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                }}\n              </EndpointsContext.Consumer>\n            </EndpointsContextStore>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport const EndpointDocumentationWrapper = (props) => {\n  const { pathId, method } = useParams();\n\n  return (\n    <EndpointsContextStore method={method} pathId={pathId}>\n      <EndpointsContext.Consumer>\n        {({ endpointDescriptor }) => (\n          <EndpointDocs endpointDescriptor={endpointDescriptor} />\n        )}\n      </EndpointsContext.Consumer>\n    </EndpointsContextStore>\n  );\n};\n\nexport const EndpointDocs = (props) => {\n  const { endpointDescriptor } = props;\n  const classes = useStyles();\n  const purpose = endpointDescriptor.endpointPurpose;\n  const fingerPrint = `${endpointDescriptor.httpMethod} ${endpointDescriptor.fullPath}`;\n  usePageTitle(`${purpose || fingerPrint} - API Documentation`);\n\n  const { rfcService, rfcId, cachedQueryResults } = useContext(RfcContext);\n  const { shapesResolvers } = cachedQueryResults;\n  const currentRfcState = rfcService.currentState(rfcId);\n  const diffPreviewer = new DiffPreviewer(shapesResolvers, currentRfcState);\n  return (\n    <ShapeExpandedStore>\n      <div className={classes.maxWidth} style={{ paddingTop: 30 }}>\n        <EndpointsContext.Consumer>\n          {({ updateContribution, getContribution, endpointId }) => {\n            const { requestBodies, responses } = endpointDescriptor;\n\n            const responsesGroupedByStatusCode = groupBy(\n              responses,\n              (i) => i.statusCode\n            );\n\n            const allResponses = Object.keys(responsesGroupedByStatusCode)\n              .sort()\n              .map((i) => {\n                return {\n                  statusCode: i,\n                  contentTypes: responsesGroupedByStatusCode[i.toString()]\n                    .map((res) => res.responseBody.httpContentType || 'No Body')\n                    .sort(),\n                };\n              });\n\n            return (\n              <div>\n                <HeadingContribution\n                  value={getContribution(endpointId, PURPOSE)}\n                  label=\"What does this endpoint do?\"\n                  onChange={(value) => {\n                    updateContribution(endpointId, PURPOSE, value);\n                    trackUserEvent(UpdateContribution.withProps({ id: endpointId, purpose: PURPOSE, value}))\n                  }}\n                />\n                <MarkdownContribution\n                  value={getContribution(endpointId, DESCRIPTION)}\n                  label=\"Detailed Description\"\n                  onChange={(value) => {\n                    updateContribution(endpointId, DESCRIPTION, value);\n                    trackUserEvent(UpdateContribution.withProps({ id: endpointId, purpose: DESCRIPTION, value}))\n                  }}\n                />\n\n                <DocDivider style={{ marginTop: 10, marginBottom: 10 }} />\n\n                <div className={classes.overviewSection}>\n                  <PathAndMethodLarge\n                    path={endpointDescriptor.fullPath}\n                    method={endpointDescriptor.method}\n                  />\n\n                  <div style={{ marginTop: 7 }}>\n                    {endpointDescriptor.pathParameters.map((i) => (\n                      <DocParameter\n                        title={i.name}\n                        paramId={i.pathId}\n                        updateContribution={updateContribution}\n                        description={i.description}\n                      />\n                    ))}\n                  </div>\n                </div>\n\n                <DocDivider style={{ marginTop: 10, marginBottom: 10 }} />\n\n                <RequestTabsContextStore>\n                  <ContentTabs\n                    inRequest\n                    options={{\n                      contentTypes: requestBodies\n                        .map((i) => i.requestBody.httpContentType)\n                        .filter((i) => !!i),\n                    }}\n                    renderDescription={(contentType) => {\n                      const id = `${endpointId}_request_body`;\n                      return (\n                        <MarkdownContribution\n                          value={getContribution(id, DESCRIPTION)}\n                          label=\"Request Body Description\"\n                          onChange={(value) => {\n                            updateContribution(id, DESCRIPTION, value);\n                            trackUserEvent(UpdateContribution.withProps({ id, purpose: DESCRIPTION, value}))\n                          }}\n                        />\n                      );\n                    }}\n                    renderRequest={(contentType) => {\n                      const r = requestBodies.find(\n                        (i) => i.requestBody.httpContentType === contentType\n                      );\n                      const renderedShape =\n                        r &&\n                        getOrUndefined(\n                          diffPreviewer.previewShape(\n                            toOption(r.requestBody.shapeId)\n                          )\n                        );\n\n                      return (\n                        renderedShape && (\n                          <ShapeBox\n                            header={\n                              <BreadcumbX\n                                itemStyles={{ fontSize: 13, color: 'white' }}\n                                location={['Request Body', contentType]}\n                              />\n                            }\n                          >\n                            <ShapeOnlyViewer preview={renderedShape} />\n                          </ShapeBox>\n                        )\n                      );\n                    }}\n                  />\n\n                  <ContentTabs\n                    options={allResponses}\n                    renderDescription={(statusCode, contentType) => {\n                      const id = `${endpointId}_${statusCode}_response`;\n                      return (\n                        <MarkdownContribution\n                          value={getContribution(id, DESCRIPTION)}\n                          label={`${statusCode} Response Description`}\n                          onChange={(value) => {\n                            updateContribution(id, DESCRIPTION, value);\n                            trackUserEvent(UpdateContribution.withProps({ id, purpose: DESCRIPTION, value}))\n                          }}\n                        />\n                      );\n                    }}\n                    renderResponse={(statusCode, contentType) => {\n                      const response = responses.find(\n                        (i) =>\n                          i.statusCode == statusCode &&\n                          i.responseBody.httpContentType === contentType\n                      );\n\n                      const renderedShape =\n                        response &&\n                        getOrUndefined(\n                          diffPreviewer.previewShape(\n                            toOption(response.responseBody.shapeId)\n                          )\n                        );\n\n                      return (\n                        renderedShape && (\n                          <ShapeBox\n                            header={\n                              <BreadcumbX\n                                itemStyles={{ fontSize: 13, color: 'white' }}\n                                location={[\n                                  `${statusCode} Response Body`,\n                                  contentType,\n                                ]}\n                              />\n                            }\n                          >\n                            <ShapeOnlyViewer preview={renderedShape} />\n                          </ShapeBox>\n                        )\n                      );\n                      // return <div>{statusCode} {contentType}</div>;\n                    }}\n                  />\n                </RequestTabsContextStore>\n\n                <div style={{ height: '100vh' }} />\n              </div>\n            );\n          }}\n        </EndpointsContext.Consumer>\n      </div>\n    </ShapeExpandedStore>\n  );\n};\n","import React from 'react';\nimport { Box, Paper, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { primary, UpdatedBlueBackground } from '../../theme';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport { DocDarkGrey } from '../docs/DocConstants';\n\nexport function RenderTask(props) {\n  const classes = useStyles();\n  return (\n    <Paper elevation={1} className={classes.root}>\n      <Box display=\"flex\" alignItems=\"center\">\n        <PlayArrowIcon style={{ color: primary, width: 15, height: 15 }} />\n        <Code>\n          api {props.name === 'start' ? '' : 'run'} {props.name}\n        </Code>\n      </Box>\n      <Box\n        display=\"flex\"\n        alignItems=\"flex-end\"\n        justifyContent=\"space-between\"\n        style={{ paddingLeft: 20, paddingRight: 0 }}\n      >\n        <Typography variant=\"caption\" className={classes.detail}>\n          {props.command}\n        </Typography>\n        <Typography variant=\"caption\" className={classes.detail}>\n          <Code style={{ marginRight: 0 }}>{props.inboundUrl}</Code>\n        </Typography>\n      </Box>\n    </Paper>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    paddingTop: 6,\n    paddingRight: 0,\n    marginBottom: 9,\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  detail: {\n    fontFamily: 'Ubuntu Mono',\n    color: DocDarkGrey,\n  },\n}));\n\nconst Code = (props) => {\n  const classes = codeStyles();\n  return (\n    <Typography\n      component=\"span\"\n      variant={props.variant}\n      className={classes.codeInline}\n      style={props.style}\n    >\n      {props.children}\n    </Typography>\n  );\n};\n\nconst codeStyles = makeStyles((theme) => ({\n  codeInline: {\n    padding: 3,\n    paddingLeft: 4,\n    marginLeft: 3,\n    marginRight: 3,\n    paddingRight: 4,\n    fontWeight: 700,\n    backgroundColor: UpdatedBlueBackground,\n    fontFamily: 'Ubuntu Mono',\n  },\n}));\n","import React, { useMemo } from 'react';\nimport Page from '../Page';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Grid, Typography } from '@material-ui/core';\nimport { DocDarkGrey, DocDivider } from '../docs/DocConstants';\nimport sortby from 'lodash.sortby';\nimport Button from '@material-ui/core/Button';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport ChangeHistoryIcon from '@material-ui/icons/ChangeHistory';\nimport { RenderTask } from './RenderTask';\nconst dummy = {\n  name: 'Todo API',\n  tasks: {\n    start: {\n      command: 'npm run server-start',\n      inboundUrl: 'http://localhost:3005',\n    },\n    'go-up': {\n      command:\n        'go up npm run server-start npm run server-start npm run server-start',\n      inboundUrl: 'http://localhost:3005',\n    },\n    'start-ui': {\n      command: 'npm start',\n      useTask: 'start',\n    },\n    test: {\n      command: 'mocha test1.js',\n      useTask: 'start',\n    },\n    'test-gets': {\n      command: 'mocha test2.js',\n      useTask: 'start',\n    },\n  },\n  ignoreRequests: ['OPTIONS (.*)'],\n};\n\nexport function ApiPage(props) {\n  const classes = useStyles();\n\n  const config = dummy;\n\n  const tasksAsArray = Object.entries(config.tasks).map(\n    ([name, definition]) => {\n      return { ...definition, name };\n    }\n  );\n\n  const sortedTasksAsArray = sortby(\n    tasksAsArray,\n    (i) => !i.name.startsWith('start')\n  );\n\n  return (\n    <Page title=\"Your API\">\n      <Page.Navbar mini={true} />\n      <Page.Body padded={true}>\n        <div className={classes.root}>\n          <Grid container>\n            <Grid item sm={7} style={{ paddingRight: 14 }}>\n              <Typography variant=\"h4\">{config.name}</Typography>\n              <Typography\n                variant=\"caption\"\n                style={{ color: DocDarkGrey, paddingLeft: 5 }}\n              >\n                0 endpoints, last updated 43 minutes ago\n              </Typography>\n              <div style={{ marginTop: 5 }}>\n                <Button\n                  size=\"small\"\n                  color=\"primary\"\n                  startIcon={<DescriptionIcon />}\n                >\n                  Documentation\n                </Button>\n                <Button\n                  size=\"small\"\n                  color=\"primary\"\n                  startIcon={<ChangeHistoryIcon />}\n                >\n                  Review Diffs\n                </Button>\n              </div>\n              <DocDivider style={{ marginTop: 8, marginBottom: 15 }} />\n              <Typography\n                variant=\"subtitle2\"\n                style={{ marginBottom: 6, color: DocDarkGrey }}\n              >\n                Start Commands:\n              </Typography>\n              {sortedTasksAsArray\n                .filter((i) => !i.useTask)\n                .map((i) => (\n                  <RenderTask {...i} />\n                ))}\n\n              <Typography\n                variant=\"subtitle2\"\n                style={{ marginTop: 22, marginBottom: 6, color: DocDarkGrey }}\n              >\n                Test Commands:\n              </Typography>\n              {sortedTasksAsArray\n                .filter((i) => !i.useTask)\n                .map((i) => (\n                  <RenderTask {...i} />\n                ))}\n            </Grid>\n            <Grid\n              item\n              sm={5}\n              style={{ borderLeft: '1px solid #e2e2e2', paddingLeft: 14 }}\n            >\n              Right\n            </Grid>\n          </Grid>\n        </div>\n      </Page.Body>\n    </Page>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    paddingTop: 18,\n    margin: '0 auto',\n    maxWidth: 920,\n    width: '100%',\n  },\n}));\n","import { load } from 'yaml-ast-parser';\nimport niceTry from 'nice-try';\ninterface KeyValues {\n  value: string;\n  startPosition: number;\n  endPosition: number;\n  startLine: number;\n  endLine: number;\n}\n\nexport interface RangesFromYaml {\n  isValid: boolean;\n  task?: {\n    name: string;\n    command: KeyValues | undefined;\n    inboundUrl: KeyValues | undefined;\n    targetUrl: KeyValues | undefined;\n    useTask: KeyValues | undefined;\n  };\n  taskRange?: {\n    startPosition: number;\n    endPosition: number;\n  };\n}\n\nexport function rangesFromOpticYaml(\n  yamlString: string,\n  task: string\n): RangesFromYaml {\n  const result = load(yamlString);\n\n  if (!result || !result.mappings) {\n    return {\n      isValid: false,\n    };\n  }\n  const allTasks = result.mappings.find((i) => i.key.value === 'tasks');\n\n  function stringValueOf(node, key): KeyValues | undefined {\n    const scalar =\n      node &&\n      node.value &&\n      node.value.mappings &&\n      node.value.mappings.find((i) => i.key.value === key);\n    if (scalar && scalar.value) {\n      return {\n        value: scalar.value.value,\n        startPosition: scalar.value.startPosition,\n        endPosition: scalar.value.endPosition,\n        ...computeLines(\n          yamlString,\n          scalar.value.startPosition,\n          scalar.value.endPosition\n        ),\n      };\n    } else {\n      return undefined;\n    }\n  }\n\n  if (allTasks && allTasks.value && allTasks.value.mappings) {\n    const thisTask = allTasks.value.mappings.find((i) => i.key.value === task);\n    if (thisTask) {\n      return {\n        isValid: result.errors.length === 0,\n        task: {\n          name: task,\n          command: niceTry(() => stringValueOf(thisTask, 'command')),\n          inboundUrl: niceTry(() => stringValueOf(thisTask, 'inboundUrl')),\n          targetUrl: niceTry(() => stringValueOf(thisTask, 'targetUrl')),\n          useTask: niceTry(() => stringValueOf(thisTask, 'useTask')),\n        },\n        taskRange: {\n          startPosition: thisTask.startPosition,\n          endPosition: thisTask.endPosition,\n        },\n      };\n    }\n  }\n\n  return {\n    isValid: result.errors.length === 0,\n  };\n}\n\nfunction computeLines(\n  contents: string,\n  startPosition: number,\n  endPosition: number\n): { endLine: number; startLine: number } {\n  const startLine = splitLines(contents.substr(0, startPosition)).length - 1;\n  const endLine = splitLines(contents.substr(0, endPosition)).length - 1;\n\n  return {\n    startLine,\n    endLine,\n  };\n}\n\nfunction splitLines(t): string[] {\n  return t.split(/\\r\\n|\\r|\\n/);\n}\n","export const IntegrationDocs = require('./loaded/setup.json');\nexport const CommonIssues = require('./loaded/common-issues.json');\n\nexport const integrationDocsOptions = (() => {\n  const frameworks = [];\n  Object.values(IntegrationDocs).forEach((lang) => {\n    Object.entries(lang.frameworks).forEach(([key, value]) => {\n      frameworks.push({\n        value: key,\n        label: value.pretty_name,\n        data: { ...value}, //, start_command: lang.start_command },\n        language: lang.pretty_name,\n      });\n    });\n  });\n\n  return frameworks;\n})();\n\nfunction capitalize(s) {\n  if (typeof s !== 'string') return '';\n  return s.charAt(0).toUpperCase() + s.slice(1);\n}\n","import { assign, Machine, send } from 'xstate';\nimport { ISpecService } from '@useoptic/cli-client/build/spec-service-client';\nimport { CheckAssertionsResult } from '@useoptic/analytics/lib/interfaces/ApiCheck';\nimport { rangesFromOpticYaml, RangesFromYaml } from './yaml/YamlHelper';\nimport { integrationDocsOptions } from './fetch-docs/IntegrationDocs';\n\nexport interface SetupAndCheckMachineSchema {\n  states: {\n    loading: {};\n    saving: {};\n    precheck: {};\n    passedcheck: {};\n  };\n}\n\nexport type SetupAndCheckMachineEvents =\n  | { type: 'USER_UPDATED_CONFIG'; contents: string }\n  | { type: 'USER_FINISHED_CHANGING_CONFIG' }\n  | { type: 'USER_TOGGLED_MODE'; mode: string }\n  | { type: 'USER_SELECTED_FRAMEWORK'; framework: string }\n  | { type: 'CHECK_RESULT_RECEIVED'; result: CheckAssertionsResult };\n\nexport interface SetupAndCheckMachineContext {\n  lastKnownSavedConfig: string;\n  stagedConfig: string;\n  stagedRanges: RangesFromYaml;\n  mode: string;\n  framework: string;\n  checkCount: number;\n  lastCheckResult?: CheckAssertionsResult;\n}\n\nexport const newSetupAndCheckMachine = (\n  taskName: string,\n  specService: ISpecService\n) => {\n  return Machine<\n    SetupAndCheckMachineContext,\n    SetupAndCheckMachineSchema,\n    SetupAndCheckMachineEvents\n  >({\n    id: 'setup-' + taskName,\n    context: {\n      mode: 'recommended',\n      lastKnownSavedConfig: '',\n      stagedConfig: '',\n      framework: undefined,\n      stagedRanges: {\n        isValid: false,\n      },\n      checkCount: 0,\n    },\n    initial: 'loading',\n    states: {\n      loading: {\n        invoke: {\n          src: async () => {\n            const { configRaw } = await specService.loadConfig();\n            return configRaw;\n          },\n          onDone: {\n            actions: assign({\n              lastKnownSavedConfig: (ctx, event) => event.data,\n              stagedConfig: (ctx, event) => event.data,\n              stagedRanges: (ctx, event) =>\n                rangesFromOpticYaml(event.data, taskName),\n            }),\n            target: 'precheck',\n          },\n        },\n      },\n      saving: {\n        invoke: {\n          src: async (context, event) => {\n            return await specService.saveConfig(context.stagedConfig);\n          },\n          onDone: {\n            actions: assign({\n              lastKnownSavedConfig: (ctx) => ctx.stagedConfig,\n            }),\n            target: 'precheck',\n          },\n        },\n      },\n      precheck: {\n        on: {\n          USER_FINISHED_CHANGING_CONFIG: 'saving',\n          USER_UPDATED_CONFIG: {\n            actions: assign({\n              stagedConfig: (ctx, event) => event.contents,\n              stagedRanges: (ctx, event) =>\n                rangesFromOpticYaml(event.contents, taskName),\n            }),\n          },\n          USER_TOGGLED_MODE: {\n            actions: [\n              assign({\n                mode: (_, event) => event.mode,\n              }),\n              send((ctx) => ({\n                type: 'USER_UPDATED_CONFIG',\n                contents: updateConfig(\n                  ctx.mode,\n                  ctx.framework,\n                  ctx.stagedConfig,\n                  taskName,\n                  ctx.stagedRanges\n                ),\n              })),\n            ],\n          },\n          USER_SELECTED_FRAMEWORK: {\n            actions: [\n              assign({\n                framework: (_, event) => event.framework,\n              }),\n              send((ctx) => ({\n                type: 'USER_UPDATED_CONFIG',\n                contents: updateConfig(\n                  ctx.mode,\n                  ctx.framework,\n                  ctx.stagedConfig,\n                  taskName,\n                  ctx.stagedRanges\n                ),\n              })),\n            ],\n          },\n          CHECK_RESULT_RECEIVED: [\n            {\n              cond: (_, event) => event.result.taskName === taskName,\n              actions: [\n                assign({\n                  lastCheckResult: (_, event) => event.result,\n                  lastKnownSavedConfig: (_, event) => event.result.rawConfig,\n                  stagedConfig: (_, event) => event.result.rawConfig,\n                  checkCount: (ctx) => ctx.checkCount + 1,\n                }),\n              ],\n            },\n            {\n              cond: (_, event) => event.result.passed,\n              target: 'passedcheck',\n            },\n          ],\n        },\n      },\n      passedcheck: {},\n    },\n  });\n};\n\nfunction updateConfig(\n  mode: string,\n  framework: string,\n  currentStaged: string,\n  taskName: string,\n  stagedRanges: RangesFromYaml\n) {\n  function replaceRange(\n    s: string,\n    start: number,\n    end: number,\n    substitute: string\n  ): string {\n    return s.substring(0, start) + substitute + s.substring(end);\n  }\n  if (stagedRanges.taskRange) {\n    const { taskRange } = stagedRanges;\n    const { startPosition, endPosition } = taskRange;\n\n    if (mode === 'recommended') {\n      const docs = integrationDocsOptions.find((i) => i.value === framework);\n      const startCommand = docs\n        ? docs.data.start_command\n        : 'echo \"Replace me with your start command\"';\n\n      const inboundUrl =\n        (stagedRanges.task && stagedRanges.task.inboundUrl.value!) ||\n        'http://localhost:3005';\n\n      const template =\n        `${taskName}:\\n` +\n        `    command: ${startCommand}\\n` +\n        `    inboundUrl: ${inboundUrl}`;\n\n      const replacement = replaceRange(\n        currentStaged,\n        stagedRanges.taskRange.startPosition,\n        stagedRanges.taskRange.endPosition,\n        template\n      );\n\n      return replacement;\n    } else if (mode === 'manual') {\n      const inboundUrl =\n        (stagedRanges.task && stagedRanges.task.inboundUrl.value!) ||\n        'http://localhost:3005';\n\n      const targetUrl = 'http://localhost:5000';\n\n      const template =\n        `${taskName}:\\n` +\n        `    targetUrl: ${targetUrl}\\n` +\n        `    inboundUrl: ${inboundUrl}`;\n\n      const replacement = replaceRange(\n        currentStaged,\n        stagedRanges.taskRange.startPosition,\n        stagedRanges.taskRange.endPosition,\n        template\n      );\n\n      debugger;\n\n      return replacement;\n    }\n  }\n  return currentStaged;\n}\n","import React, { useEffect, useMemo, useState } from 'react';\nimport AceEditor from 'react-ace';\n\nimport 'ace-builds/src-noconflict/mode-yaml';\nimport 'ace-builds/src-noconflict/theme-solarized_dark';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport {\n  AddedGreenBackground,\n  ChangedYellowBackground,\n  RemovedRedBackground,\n  SubtleBlueBackground,\n  UpdatedBlue,\n  UpdatedBlueBackground,\n} from '../../../theme';\nimport { Fade, Paper, Typography } from '@material-ui/core';\n\nexport function ShowCurrentOpticYml({\n  rawConfig,\n  saving,\n  hasChanges,\n  ranges,\n  result,\n  updateValue,\n}) {\n  const classes = useStyles();\n\n  const computedMarkers = (() => {\n    const markers = [];\n\n    function highlightX(keyValue, key) {\n      if (keyValue) {\n        const colorClass = (() => {\n          if (key === 'command' && result && result.recommended) {\n            const {\n              commandIsLongRunning,\n              apiProcessStartsOnAssignedHost,\n              apiProcessStartsOnAssignedPort,\n            } = result.recommended;\n\n            if (\n              !commandIsLongRunning.passed ||\n              !apiProcessStartsOnAssignedHost.passed ||\n              !apiProcessStartsOnAssignedPort.passed\n            ) {\n              return classes.highlightError;\n            } else {\n              return classes.highlightCorrect;\n            }\n          }\n\n          if (key === 'inboundUrl' && result && result.recommended) {\n            const { proxyCanStartAtInboundUrl } = result.recommended;\n\n            if (!proxyCanStartAtInboundUrl.passed) {\n              return classes.highlightError;\n            } else {\n              return classes.highlightCorrect;\n            }\n          }\n\n          if (key === 'command' && result && result.manual) {\n            return null;\n          }\n\n          if (key === 'inboundUrl' && result && result.manual) {\n            const { proxyCanStartAtInboundUrl } = result.manual;\n\n            if (!proxyCanStartAtInboundUrl.passed) {\n              return classes.highlightError;\n            } else {\n              return classes.highlightCorrect;\n            }\n          }\n          if (key === 'targetUrl' && result && result.manual) {\n            const { proxyTargetUrlResolves } = result.manual;\n\n            if (!proxyTargetUrlResolves.passed) {\n              return classes.highlightError;\n            } else {\n              return classes.highlightCorrect;\n            }\n          }\n\n          return classes.highlightRowFocus;\n        })();\n\n        markers.push({\n          startRow: keyValue.startLine,\n          startCol: 0,\n          endRow: keyValue.endLine,\n          endCol: 1000,\n          className: colorClass,\n          type: 'text',\n        });\n      }\n    }\n\n    highlightX(ranges.task && ranges.task.command, 'command');\n    highlightX(ranges.task && ranges.task.inboundUrl, 'inboundUrl');\n    highlightX(ranges.task && ranges.task.targetUrl, 'targetUrl');\n\n    return markers;\n  })();\n\n  const lineCount = splitLines(rawConfig).length;\n\n  return (\n    <Paper elevation={3} className={classes.bg}>\n      <div className={classes.header}>\n        <Typography\n          variant=\"overline\"\n          style={{ textTransform: 'none', color: SubtleBlueBackground }}\n        >\n          optic.yml\n        </Typography>\n        <div style={{ flex: 1 }} />\n\n        <Typography\n          variant=\"overline\"\n          style={{ textTransform: 'none', color: '#5e738d' }}\n        >\n          {(saving || hasChanges) && 'saving...'}\n          {!hasChanges && 'saved'}\n        </Typography>\n      </div>\n      <AceEditor\n        style={{\n          width: '100%',\n          height: lineCount < 15 ? 400 : 600,\n        }}\n        mode=\"yaml\"\n        theme=\"solarized_dark\"\n        value={rawConfig}\n        fontSize={15}\n        showPrintMargin={false}\n        readOnly={saving}\n        showGutter={true}\n        highlightActiveLine={false}\n        onChange={(value) => updateValue(value)}\n        name=\"UNIQUE_ID_OF_DIV\"\n        editorProps={{ $blockScrolling: true }}\n        markers={computedMarkers}\n      />\n    </Paper>\n  );\n}\n\nfunction splitLines(t) {\n  return t.split(/\\r\\n|\\r|\\n/);\n}\n\nconst useStyles = makeStyles((theme) => ({\n  highlightRowFocus: {\n    backgroundColor: ChangedYellowBackground,\n    position: 'absolute',\n    borderRadius: 0,\n    padding: 0,\n    width: '100% !important',\n    left: 0,\n    margin: 0,\n  },\n  highlightError: {\n    backgroundColor: RemovedRedBackground,\n    position: 'absolute',\n    borderRadius: 0,\n    padding: 0,\n    width: '100% !important',\n    left: 0,\n    margin: 0,\n  },\n  highlightCorrect: {\n    backgroundColor: AddedGreenBackground,\n    position: 'absolute',\n    borderRadius: 0,\n    padding: 0,\n    width: '100% !important',\n    left: 0,\n    margin: 0,\n  },\n  bg: {\n    backgroundColor: '#0e2a35',\n  },\n  header: {\n    paddingLeft: 9,\n    borderBottomColor: '#736d6d',\n    borderBottom: `1px solid`,\n    marginBottom: 12,\n    display: 'flex',\n    flexDirection: 'row',\n    paddingRight: 12,\n  },\n}));\n","import React from 'react';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport { dracula } from 'react-syntax-highlighter/dist/cjs/styles/hljs';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport * as copy from 'copy-to-clipboard';\nimport { UpdatedBlueBackground } from '../../../theme';\n\nconst useStyles = makeStyles((theme) => ({\n  copybtn: {\n    // position: 'absolute',\n    color: 'white',\n  },\n  root: {\n    overflow: 'none',\n    marginTop: 8,\n    display: 'flex',\n    alignItems: 'center',\n    backgroundColor: 'rgb(40, 42, 54)',\n  },\n  codeInline: {\n    padding: 3,\n    paddingLeft: 5,\n    paddingRight: 5,\n    fontWeight: 100,\n    backgroundColor: UpdatedBlueBackground,\n    fontFamily: 'Ubuntu Mono',\n  },\n}));\n\nexport const Code = (props) => {\n  const classes = useStyles();\n  return (\n    <span className={classes.codeInline} style={props.style}>\n      {props.children}\n    </span>\n  );\n};\n\nexport function CodeBlock({ code, lang, style }) {\n  const classes = useStyles();\n  return (\n    <Paper elevation={2} className={classes.root} style={style}>\n      <div style={{ flex: 1, paddingLeft: 2 }}>\n        <SyntaxHighlighter\n          language={lang}\n          style={dracula}\n          customStyle={{ whiteSpace: 'pre-wrap' }}\n        >\n          {code}\n        </SyntaxHighlighter>\n      </div>\n      <div style={{ paddingRight: 9 }}>\n        <Tooltip title=\"Copy Code to Clipboard\">\n          <IconButton\n            size=\"small\"\n            className={classes.copybtn}\n            onClick={() => copy(code)}\n          >\n            <FileCopyIcon style={{ width: 20 }} />\n          </IconButton>\n        </Tooltip>\n      </div>\n    </Paper>\n  );\n}\n","import ReactMarkdown from 'react-markdown';\nimport React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { Collapse } from '@material-ui/core';\nimport { Code, CodeBlock } from '../setup-api/CodeBlock';\n\nexport const setupTextHeader = () =>\n  `**Update your Code to use the \\`$OPTIC_API_PORT\\`**`;\nexport function setupText(data) {\n  return `${data.preamble}\\n\\n${buildCodeBlock(\n    data.before,\n    data.language\n  )}\\n\\n${buildCodeBlock(data.after, data.language)}`.trim();\n}\n\nexport function buildCodeBlock(source, lang) {\n  return `\\n\\`\\`\\`${lang}\\n${source}\\n\\`\\`\\`\\n`;\n}\n\nexport function MarkdownRender({ source, style }) {\n  return (\n    <div style={style}>\n      <ReactMarkdown\n        source={source}\n        renderers={{\n          heading: ({ level, children }) => (\n            <Typography\n              variant={`h${level}`}\n              style={{ fontWeight: 300, marginBottom: 3 }}\n            >\n              {children}\n            </Typography>\n          ),\n          inlineCode: ({ children }) => <Code>{children}</Code>,\n          code: (data) => {\n            return (\n              <CodeBlock\n                lang={data.language}\n                code={data.value}\n                style={{ marginRight: 15, marginBottom: 15 }}\n              />\n            );\n          },\n          paragraph: ({ children }) => (\n            <Typography\n              variant=\"body1\"\n              style={{\n                fontWeight: 300,\n                whiteSpace: 'pre-line',\n              }}\n            >\n              {children}\n            </Typography>\n          ),\n        }}\n      />\n    </div>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord';\nimport HelpIcon from '@material-ui/icons/Help';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport { Card, Collapse, Typography } from '@material-ui/core';\nimport {\n  AddedGreen,\n  AddedGreenBackground,\n  ChangedYellow,\n  ChangedYellowBackground,\n  RemovedRed,\n  RemovedRedBackground,\n  SubtleBlueBackground,\n  UpdatedBlueBackground,\n} from '../../theme';\nimport { Code } from './setup-api/CodeBlock';\nimport { CommonIssues } from './fetch-docs/IntegrationDocs';\nimport Box from '@material-ui/core/Box';\nimport { LightTooltip } from '../tooltips/LightTooltip';\nimport { MarkdownRender } from './fetch-docs/BuildMD';\n\nconst assertionsMap = {\n  command: [\n    {\n      assertion: CommonIssues.commandProcess,\n      getStatus: (result) =>\n        result.recommended && result.recommended.commandIsLongRunning,\n    },\n    {\n      assertion: CommonIssues.commandPort,\n      getStatus: (result) =>\n        result.recommended && result.recommended.apiProcessStartsOnAssignedPort,\n    },\n    {\n      assertion: CommonIssues.commandHost,\n      getStatus: (result) =>\n        result.recommended && result.recommended.apiProcessStartsOnAssignedHost,\n    },\n  ],\n  inboundUrl: [\n    {\n      assertion: CommonIssues.inboundUrlStart,\n      getStatus: (result) => {\n        if (result.recommended)\n          return result.recommended.proxyCanStartAtInboundUrl;\n        if (result.manual) return result.manual.proxyCanStartAtInboundUrl;\n      },\n    },\n  ],\n  targetUrl: [\n    {\n      assertion: CommonIssues.targetUrlResolve,\n      getStatus: (result) =>\n        result.manual && result.manual.proxyTargetUrlResolves,\n    },\n  ],\n};\n\nconst quickSummary = (mode) => {\n  if (mode === 'recommended') {\n    return {\n      command: 'how your API is started',\n      inboundUrl: 'where the API should listen locally',\n    };\n  } else if (mode === 'manual') {\n    return {\n      targetUrl: 'the hostname of the API ie devapi.site.com',\n      inboundUrl: 'where you want the Optic proxy to start',\n    };\n  }\n};\n\nexport function HelperCard({ setting, mode, result, noChecks, value }) {\n  const classes = useStyles();\n\n  const assertions = assertionsMap[setting] || [];\n\n  return (\n    <Card elevation={3} className={classes.root}>\n      <div\n        className={classes.header}\n        // style={{ backgroundColor: ChangedYellowBackground }}\n      >\n        <Code\n          style={{\n            color: 'white',\n            fontWeight: 800,\n            overflow: 'hidden',\n            wordWrap: 'break-word',\n          }}\n        >\n          {(value && value.value) || '________'}\n        </Code>\n        <Typography\n          variant=\"caption\"\n          style={{ color: '#999696', fontWeight: 100, paddingLeft: 2 }}\n        >\n          <span style={{ fontWeight: 800 }}>{setting}</span>:{' '}\n          {quickSummary(mode)[setting]}\n        </Typography>\n      </div>\n      <Collapse in={!noChecks}>\n        <div className={classes.assertions}>\n          <Typography variant=\"caption\" style={{ color: '#999696' }}>\n            The <strong>{setting}</strong> parameter:\n          </Typography>\n\n          {assertions.map((i, index) => (\n            <AssertionMini\n              issue={i.assertion}\n              noChecks={noChecks}\n              result={result && i.getStatus(result)}\n              key={'assertion' + index}\n            />\n          ))}\n        </div>\n      </Collapse>\n    </Card>\n  );\n}\n\nfunction AssertionMini({ issue, noChecks, result }) {\n  const { title, shortTitle, resolution } = issue;\n  const passed = result && result.passed;\n  const failed = !passed && !noChecks;\n\n  const classes = useStyles();\n  return (\n    <div>\n      <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\">\n        <DotIndicator {...{ passed, failed }} />\n        <span style={{ color: '#e2e2e2', marginLeft: 5, fontWeight: 800 }}>\n          {shortTitle}\n        </span>\n      </Box>\n      {failed && (\n        <LightTooltip\n          interactive\n          title={\n            <div>\n              <MarkdownRender source={resolution} />\n            </div>\n          }\n        >\n          <Typography\n            variant=\"overline\"\n            color=\"error\"\n            className={classes.issue}\n          >\n            Resolve Issue\n          </Typography>\n        </LightTooltip>\n      )}\n    </div>\n  );\n}\n\nexport function DotIndicator({ untested, passed, failed }) {\n  let color = ChangedYellow;\n\n  if (passed) {\n    color = AddedGreen;\n  }\n  if (failed) {\n    color = RemovedRed;\n  }\n\n  return <FiberManualRecordIcon style={{ color, width: 15, height: 15 }} />;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: '#0e2a35',\n    marginBottom: 14,\n  },\n  header: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'flex-start',\n    justifyContent: 'center',\n    paddingLeft: 9,\n    padding: 7,\n    marginBottom: 5,\n  },\n  error: {\n    backgroundColor: 'white',\n    border: `2px solid ${RemovedRed}`,\n    padding: 8,\n  },\n  issue: {\n    cursor: 'pointer',\n    marginLeft: 20,\n  },\n  headertop: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingBottom: 10,\n  },\n  assertions: {\n    padding: 8,\n    paddingTop: 0,\n    borderTopColor: '#736d6d',\n    borderTop: `1px solid`,\n  },\n}));\n","import React, { useEffect, useState } from 'react';\n\nimport Select, { createFilter } from 'react-select';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { integrationDocsOptions } from '../fetch-docs/IntegrationDocs';\n\nconst useStyles = makeStyles((theme) => ({\n  optionStyle: {\n    fontFamily: 'Ubuntu Mono',\n    padding: 8,\n    fontSize: 17,\n    fontWeight: 900,\n    paddingLeft: 12,\n  },\n  lang: {\n    fontWeight: 300,\n    color: '#2b2a2a',\n    paddingRight: 15,\n  },\n  optionRow: {\n    cursor: 'pointer',\n    '&:hover': {\n      backgroundColor: '#e2e2e2',\n    },\n  },\n  rootOption: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n}));\n\nconst options = integrationDocsOptions;\n\nconst filterConfig = {\n  ignoreCase: true,\n  trim: true,\n};\n\nconst defaultFilter = createFilter(filterConfig);\n\nconst filterOptions = (candidate, input) => {\n  if (defaultFilter(candidate, input)) {\n    return true;\n  } else {\n    console.log('hello ', candidate);\n    return candidate.value === 'generic';\n  }\n};\n\nconst Option = (props) => {\n  const {\n    children,\n    className,\n    cx,\n    data,\n    getStyles,\n    isDisabled,\n    isFocused,\n    isSelected,\n    innerRef,\n    innerProps,\n  } = props;\n\n  const classes = useStyles();\n\n  return (\n    <div\n      ref={innerRef}\n      css={getStyles('option', props)}\n      {...innerProps}\n      className={classes.optionRow}\n    >\n      <div className={classes.rootOption}>\n        <div className={classes.optionStyle}>{children}</div>\n        <div style={{ flex: 1 }} />\n        <div className={classes.lang}>{data.language}</div>\n      </div>\n    </div>\n  );\n};\n\nconst customStyles = {\n  singleValue: (provided, state) => {\n    const opacity = state.isDisabled ? 0.5 : 1;\n    const transition = 'opacity 300ms';\n\n    return { ...provided, opacity, transition };\n  },\n};\n\nexport default ({ onChoose, setStartCommand, touchEmpty, value }) => {\n  const classes = useStyles();\n\n  const [hasShownEmpty, setHasShownEmpty] = useState(false);\n\n  useEffect(() => {\n    if (hasShownEmpty) touchEmpty();\n  }, [hasShownEmpty]);\n\n  return (\n    <Select\n      autoFocus\n      placeholder=\"Select Framework...\"\n      value={options.find((i) => i.value === value)}\n      onChange={({ value, data }) => {\n        onChoose(value);\n      }}\n      isSearchable\n      options={options}\n      filterOption={filterOptions}\n      components={{ Option }}\n      styles={customStyles}\n    />\n  );\n};\n","import React from 'react';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport { DocDarkGrey } from '../docs/DocConstants';\nimport { LightTooltip } from '../tooltips/LightTooltip';\nimport { ContentStyledTab, ContentStyledTabs } from '../docs/ContentTabs';\nimport FrameworkSelect from './setup-api/FrameworkSelect';\nimport { Collapse } from '@material-ui/core';\nimport { MarkdownRender } from './fetch-docs/BuildMD';\nimport Chip from '@material-ui/core/Chip';\n\nexport function FrameworkHelper({\n  mode,\n  framework,\n  onModeChange,\n  onChooseFramework,\n}) {\n  const handleChange = (event, newValue) => {\n    onModeChange(newValue);\n  };\n  return (\n    <>\n      <div style={{ paddingBottom: 10 }}>\n        <Typography variant=\"overline\" style={{ color: DocDarkGrey }}>\n          Choose Integration:\n        </Typography>\n        <ContentStyledTabs value={mode} onChange={handleChange}>\n          <ContentStyledTab\n            value=\"recommended\"\n            label={\n              <LightTooltip\n                title={\n                  <InnerToolTip\n                    recommended\n                    children={`Alias your start command with Optic. Use \\`api start\\` to:\n- start your API process\n- check your local traffic for API diffs\n\nRecommended for most local development flows\n                    `}\n                  />\n                }\n              >\n                <span>Start Command</span>\n              </LightTooltip>\n            }\n          />\n          <ContentStyledTab\n            value=\"manual\"\n            label={\n              <LightTooltip\n                title={\n                  <InnerToolTip\n                    children={`Manually configure a proxy where Optic monitors traffic. Use when you are developing against:\n- a remote service\n- a hosted development environment\n- a development environment where you need more control\n                    `}\n                  />\n                }\n              >\n                <span>Proxy</span>\n              </LightTooltip>\n            }\n          />\n        </ContentStyledTabs>\n      </div>\n      <Collapse in={mode === 'recommended'}>\n        <FrameworkSelect value={framework} onChoose={onChooseFramework} />\n      </Collapse>\n    </>\n  );\n}\n\nfunction InnerToolTip(props) {\n  const { children } = props;\n  return (\n    <div style={{ width: 300 }}>\n      {props.recommended && (\n        <Chip color=\"primary\" label=\"Recommended\" size=\"small\" />\n      )}\n      <div style={{ padding: 6 }}>\n        <MarkdownRender source={children} />\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport { JsonHttpClient } from '@useoptic/client-utilities';\nimport niceTry from 'nice-try';\nconst notificationsUrl = '/api/tracking/events';\nconst statusUrl = '/api/daemon/status';\n\nexport function useUserTracking() {\n  const [events, setEvents] = useState([]);\n  const [daemonIsUp, setDaemonIsUp] = useState(true);\n  const [_, setNotificationChannel] = useState(null);\n\n  useEffect(() => {\n    if (!daemonIsUp) {\n      return setNotificationChannel(null);\n    }\n    const notificationChannel = new EventSource(notificationsUrl);\n    setNotificationChannel(notificationChannel);\n    notificationChannel.onmessage = (event) => {\n      const { type, data } = JSON.parse(event.data);\n      if (type === 'message' && data) {\n        setEvents((e) => [...e, data]);\n      } else if (type === 'error') {\n      }\n    };\n    notificationChannel.onerror = (e) => {\n      console.error(e);\n    };\n    notificationChannel.onopen = (e) => {\n      console.log(e);\n    };\n\n    return () => notificationChannel.close();\n  }, [daemonIsUp]);\n\n  return { events, daemonIsUp };\n}\n\nexport function useLatestEvent(block, events) {\n  useEffect(() => {\n    const lastEvent = events[events.length - 1];\n    if (lastEvent) {\n      block(lastEvent);\n    }\n  }, [events.length]);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { JsonHttpClient } from '@useoptic/client-utilities';\nimport niceTry from 'nice-try';\n\nconst sessionsUrl = 'http://localhost:34444/api/sessions';\nconst samplesCount = (id, captureId) =>\n  `http://localhost:34444/api/specs/${id}/captures/${captureId}/samples`;\nconst diffReviewUrlBuilder = (id) => `http://localhost:34444/apis/${id}/diffs`;\n\nexport function useCaptureSampleCounter(cwd, captureId) {\n  const [count, setCount] = useState(0);\n  const [diffReviewUrl, setDiffReviewUrl] = useState(null);\n\n  useRecursiveTimeout(async () => {\n    try {\n      const { sessions } = await JsonHttpClient.getJson(sessionsUrl);\n\n      const normalized = (() => {\n        if (sessions && Array.isArray(sessions)) {\n          return sessions;\n        } else {\n          return sessions.sessions;\n        }\n      })();\n\n      const thisAPISession = normalized.find((i) => i.path === cwd);\n      if (thisAPISession) {\n        const localSessionId = thisAPISession.id;\n        console.log('get count', samplesCount(localSessionId, captureId));\n        const { samples } = await JsonHttpClient.getJson(\n          samplesCount(localSessionId, captureId)\n        );\n        setCount(samples.length);\n        setDiffReviewUrl(diffReviewUrlBuilder(localSessionId));\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }, 1500);\n\n  return { count, diffReviewUrl };\n}\n\nexport function useRecursiveTimeout(callback, delay) {\n  const savedCallback = useRef(callback);\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the timeout loop.\n  useEffect(() => {\n    let id;\n    function tick() {\n      const ret = savedCallback.current();\n      if (ret instanceof Promise) {\n        ret.then(() => {\n          if (delay !== null) {\n            id = setTimeout(tick, delay);\n          }\n        });\n      } else {\n        if (delay !== null) {\n          id = setTimeout(tick, delay);\n        }\n      }\n    }\n    if (delay !== null) {\n      id = setTimeout(tick, delay);\n      return () => id && clearTimeout(id);\n    }\n  }, [delay]);\n}\n","import React, { useState } from 'react';\nimport {\n  Collapse,\n  Dialog,\n  DialogContent,\n  LinearProgress,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Code } from './setup-api/CodeBlock';\nimport { AddedDarkGreen, AddedGreen, AddedGreenBackground } from '../../theme';\nimport { useLatestEvent } from './setup-api/useUserTracking';\nimport { ApiCheckCompleted } from '@useoptic/analytics/lib/events/onboarding';\nimport { useRecursiveTimeout } from './setup-api/useCaptureSampleCounter';\nimport { useServices } from '../../contexts/SpecServiceContext';\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\nimport { Link } from 'react-router-dom';\nimport { useBaseUrl } from '../../contexts/BaseUrlContext';\nimport ScrollIntoViewIfNeeded from 'react-scroll-into-view-if-needed';\n\nexport function CheckPassed(props) {\n  const classes = useStyles();\n  const { events } = props;\n  const [started, setStarted] = useState();\n  const { specService } = useServices();\n  const [count, setCounter] = useState(0);\n  const baseUrl = useBaseUrl();\n\n  useLatestEvent((latest) => {\n    console.log(latest);\n    if (latest.type === 'StartedTaskWithLocalCli') {\n      setStarted(latest.data);\n    }\n    if (latest.type === 'ExitedTaskWithLocalCli') {\n      setStarted(undefined);\n      setCounter(0);\n    }\n  }, events);\n\n  useRecursiveTimeout(async () => {\n    if (started) {\n      try {\n        const status = await specService.getCaptureStatus(started.captureId);\n        setCounter(status.interactionsCount);\n      } catch (e) {}\n    }\n  }, 1500);\n\n  const target = 5;\n  const percentComplete = (count / target) * 100;\n\n  return (\n    <Collapse in={props.passed} style={{ marginBottom: 300 }}>\n      <Divider style={{ marginTop: 40, marginBottom: 20 }} />\n      <div className={classes.root}>\n        {props.passed && (\n          <ScrollIntoViewIfNeeded>\n            <Typography variant=\"h5\" style={{ marginBottom: 18 }}>\n              ✅ Check Passed! Your <Code>api start</Code> command is all set\n              up.\n            </Typography>\n          </ScrollIntoViewIfNeeded>\n        )}\n        <Typography variant=\"h6\" className={classes.copy}>\n          Now run <Code>api start</Code>\n        </Typography>\n\n        {started ? (\n          <>\n            <Typography variant=\"h6\" style={{ marginTop: 10 }}>\n              Your API is running with Optic on{' '}\n              <Code>\n                {started.inputs['serviceConfig.protocol']}\n                {'//'}\n                {started.inputs['serviceConfig.host']}\n                {':'}\n                {started.inputs['serviceConfig.port']}\n              </Code>\n            </Typography>\n            <Typography\n              variant=\"body1\"\n              style={{ marginTop: 10, marginBottom: 10 }}\n            >\n              Send at least {target} requests to your API using, curl, Postman,\n              your webapp, etc\n            </Typography>\n\n            <ScrollIntoViewIfNeeded>\n              <LinearProgress\n                style={{ marginTop: 20 }}\n                variant=\"determinate\"\n                value={percentComplete < 100 ? percentComplete : 100}\n              />\n            </ScrollIntoViewIfNeeded>\n            <Typography\n              variant=\"h6\"\n              style={{ marginTop: 10, marginBottom: 10 }}\n            >\n              {count}/{target} requests sent\n            </Typography>\n            {count && count >= target ? (\n              <>\n                <Typography variant=\"h5\" style={{ marginTop: 20 }}>\n                  ✅ Awesome work! Let's document those endpoints!\n                </Typography>\n                <Button\n                  variant=\"contained\"\n                  size=\"medium\"\n                  component={Link}\n                  color=\"primary\"\n                  to={baseUrl + '/diffs'}\n                  style={{ marginTop: 20 }}\n                >\n                  Start Documenting\n                </Button>\n              </>\n            ) : null}\n          </>\n        ) : (\n          <Typography\n            variant=\"subtitle1\"\n            style={{ marginTop: 10, opacity: 0.5 }}\n          >\n            Waiting for your API to start...{started && JSON.stringify(started)}\n          </Typography>\n        )}\n      </div>\n    </Collapse>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    maxWidth: 640,\n    paddingTop: 22,\n  },\n  copy: {\n    fontWeight: 200,\n    marginBottom: 13,\n  },\n}));\n","import React, { useContext } from 'react';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport classnames from 'classnames';\nimport {\n  primary,\n  secondary,\n  UpdatedBlue,\n  UpdatedBlueBackground,\n  UpdatedBlueBackgroundMedium,\n} from '../../../theme';\nimport TextLoop from 'react-text-loop';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexGrow: 1,\n  },\n  paper: {\n    position: 'relative',\n    marginBottom: 12,\n    borderRadius: 7,\n    backgroundColor: '#f5f1f0',\n    overflow: 'hidden',\n    alignItems: 'center',\n    paddingTop: 30,\n    paddingBottom: 30,\n    justifyContent: 'center',\n    minHeight: 186,\n    textAlign: 'center',\n    display: 'flex',\n    flexDirection: 'column',\n    border: `2px solid transparent`,\n    transition: 'transform .2s',\n    '&:hover': {\n      transform: 'scale(1.03)',\n    },\n    cursor: 'pointer',\n  },\n  selected: {\n    border: `2px solid ${secondary}`,\n    '&:hover': {\n      transform: 'scale(1) !important',\n    },\n  },\n  scroller: {\n    fontFamily: 'Ubuntu Mono',\n    fontWeight: 100,\n    fontSize: 19,\n  },\n  demo: {\n    display: 'flex',\n    fontFamily: 'Ubuntu Mono',\n    fontSize: 19,\n    marginTop: 10,\n    flexDirection: 'row',\n  },\n  chip: {\n    position: 'absolute',\n    right: 2,\n    top: 2,\n    padding: 2,\n    paddingLeft: 5,\n    paddingRight: 5,\n    borderRadius: 5,\n    fontFamily: 'Ubuntu Mono',\n    color: primary,\n    fontSize: 15,\n    backgroundColor: '#e2e2e2',\n    textTransform: 'uppercase',\n    fontWeight: 600,\n  },\n  caption: {\n    marginTop: 12,\n    fontFamily: 'Ubuntu Mono',\n    color: '#808080',\n    paddingLeft: 50,\n    paddingRight: 50,\n  },\n}));\n\nexport function DemoStartCommandSetup() {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.demo}>\n      <TextLoop\n        springConfig={{ stiffness: 180, damping: 7 }}\n        className={classes.scroller}\n      >\n        {examples.map((i) => (\n          <span>{i}</span>\n        ))}\n      </TextLoop>\n      {rightArrow}\n      <span style={{ color: primary, fontWeight: 800 }}>api start</span>\n    </div>\n  );\n}\n\nconst examples = [\n  'npm start',\n  'rails server',\n  'flask run',\n  'go run server.go',\n  'sails lift',\n  'dotnet run',\n  'php artisan serve',\n  'cargo run',\n];\n\nconst rightArrow = (\n  <span\n    style={{\n      fontWeight: 200,\n      marginLeft: 10,\n      marginRight: 10,\n      color: primary,\n    }}\n  >\n    →\n  </span>\n);\n","import React, { useEffect, useMemo, useState } from 'react';\nimport Page from '../Page';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useMachine } from '@xstate/react';\nimport classnames from 'classnames';\nimport { newSetupAndCheckMachine } from './setup-and-check-machine';\nimport { useServices } from '../../contexts/SpecServiceContext';\nimport { ShowCurrentOpticYml } from './yaml/UpdateOpticYml';\nimport Grid from '@material-ui/core/Grid';\nimport { HelperCard } from './HelperCard';\nimport { FrameworkHelper } from './FrameworkHelper';\nimport { useLatestEvent, useUserTracking } from './setup-api/useUserTracking';\nimport { ApiCheckCompleted } from '@useoptic/analytics/lib/events/onboarding';\nimport Box from '@material-ui/core/Box';\nimport { useDebounce } from './useDebounceHook';\nimport HelpIcon from '@material-ui/icons/Help';\nimport {\n  Collapse,\n  IconButton,\n  Paper,\n  Typography,\n  Zoom,\n} from '@material-ui/core';\nimport { Code } from './setup-api/CodeBlock';\nimport {\n  OpticBlue,\n  SubtleBlueBackground,\n  UpdatedBlue,\n  UpdatedBlueBackground,\n} from '../../theme';\nimport { defaultCommandInit } from '@useoptic/cli-config/build/helpers/initial-task';\nimport { CheckPassed } from './CheckPassed';\nimport { MarkdownRender } from './fetch-docs/BuildMD';\nimport { DemoStartCommandSetup } from './setup-api/SetupType';\nimport { DocDarkGrey, DocGrey } from '../docs/DocConstants';\nimport { LightTooltip } from '../tooltips/LightTooltip';\nimport { integrationDocsOptions } from './fetch-docs/IntegrationDocs';\n\nexport function SetupPage(props) {\n  const classes = useStyles();\n  const { events, daemonIsUp } = useUserTracking();\n\n  const focusTask = 'start';\n  const { specService } = useServices();\n  const [state, send] = useMachine(\n    newSetupAndCheckMachine(focusTask, specService)\n  );\n\n  useLatestEvent((latest) => {\n    if (latest.type === ApiCheckCompleted.eventName) {\n      send({ type: 'CHECK_RESULT_RECEIVED', result: latest.data });\n    }\n  }, events);\n\n  const {\n    stagedRanges,\n    stagedConfig,\n    mode,\n    framework,\n    lastCheckResult,\n    lastKnownSavedConfig,\n    checkCount,\n  } = state.context;\n\n  const noChecks = !Boolean(lastCheckResult);\n\n  const debouncedConfigRaw = useDebounce(stagedConfig, 1500);\n  const hasChanges = lastKnownSavedConfig !== stagedConfig;\n  const isSaving = state.matches('saving');\n\n  useEffect(() => {\n    if (debouncedConfigRaw && hasChanges) {\n      send({ type: 'USER_FINISHED_CHANGING_CONFIG' });\n    }\n  }, [debouncedConfigRaw]);\n\n  function helperCardFor(setting) {\n    return (\n      <HelperCard\n        key={setting}\n        mode={mode}\n        noChecks={noChecks}\n        result={lastCheckResult}\n        setting={setting}\n        value={stagedRanges.task && stagedRanges.task[setting]}\n      />\n    );\n  }\n\n  const cards =\n    mode === 'recommended'\n      ? [helperCardFor('command'), helperCardFor('inboundUrl')]\n      : [helperCardFor('targetUrl'), helperCardFor('inboundUrl')];\n\n  return (\n    <Page title=\"Setup your API Start task\">\n      <Page.Navbar mini={true} />\n      <Page.Body padded={true} className={classes.pageBg}>\n        <Box display=\"flex\" className={classes.copyRoot}>\n          <ApiStartCommandCopy />\n        </Box>\n        <Box display=\"flex\" className={classes.root}>\n          {!state.matches('loading') && (\n            <>\n              <div style={{ minWidth: 600, flex: 1 }}>\n                <ShowCurrentOpticYml\n                  saving={isSaving}\n                  hasChanges={hasChanges}\n                  focusTask={focusTask}\n                  rawConfig={stagedConfig}\n                  result={lastCheckResult}\n                  ranges={stagedRanges}\n                  updateValue={(contents) =>\n                    send({ type: 'USER_UPDATED_CONFIG', contents })\n                  }\n                />\n\n                <PortAssumption\n                  style={{ marginTop: 24 }}\n                  framework={framework}\n                />\n\n                <PromptCheck\n                  hasChanges={hasChanges}\n                  stagedConfig={stagedConfig}\n                  lastResult={lastCheckResult}\n                  checkCount={checkCount}\n                  focusTask={focusTask}\n                  command={stagedRanges.task && stagedRanges.task.command}\n                />\n\n                <CheckPassed\n                  passed={lastCheckResult && lastCheckResult.passed}\n                  events={events}\n                />\n              </div>\n              <div style={{ paddingLeft: 20, width: 325 }}>\n                <FrameworkHelper\n                  mode={mode}\n                  framework={framework}\n                  onChooseFramework={(framework) => {\n                    send({ type: 'USER_SELECTED_FRAMEWORK', framework });\n                  }}\n                  onModeChange={(mode) =>\n                    send({ type: 'USER_TOGGLED_MODE', mode })\n                  }\n                />\n                <div style={{ marginTop: 20 }}>{cards}</div>\n              </div>\n            </>\n          )}\n        </Box>\n      </Page.Body>\n    </Page>\n  );\n}\n\nfunction PromptCheck({\n  hasChanges,\n  lastResult,\n  stagedConfig,\n  checkCount,\n  focusTask,\n}) {\n  const classes = useStyles();\n  const passed = lastResult && lastResult.passed;\n  const shouldShow =\n    !lastResult || (lastResult && lastResult.rawConfig !== stagedConfig);\n\n  return (\n    <>\n      {!passed && (\n        <Typography variant=\"subtitle1\" style={{ marginTop: 18, opacity: 0.5 }}>\n          Waiting for Checks to Pass...\n        </Typography>\n      )}\n      <Collapse in={!passed}>\n        <Paper\n          className={classes.promptCheck}\n          style={{ opacity: shouldShow ? 1 : 0.5 }}\n        >\n          <Typography\n            variant=\"caption\"\n            style={{ color: SubtleBlueBackground, marginRight: 15 }}\n          >\n            {checkCount > 0\n              ? 'Run the check again to see if your changes worked:'\n              : 'Check if your alias works by running this command in the terminal:'}\n          </Typography>\n          <Code style={{ color: 'white', fontSize: 18 }}>\n            api check {focusTask}\n          </Code>\n        </Paper>\n      </Collapse>\n    </>\n  );\n}\n\nfunction ApiStartCommandCopy(props) {\n  const classes = useStyles();\n\n  return (\n    <div style={{ maxWidth: 670 }}>\n      <Typography variant=\"h4\" style={{ marginBottom: 18 }}>\n        Start your API with Optic:\n      </Typography>\n      <Typography variant=\"body2\" className={classes.copy}>\n        Optic monitors your local API traffic for new endpoints, and any changes\n        you have made to existing ones. The simplest way to fit Optic into your\n        development flow is to alias the command you use to start your API with\n        Optic's <Code>api start</Code> command:\n      </Typography>\n      <DemoStartCommandSetup />\n      <Typography\n        variant=\"body2\"\n        className={classes.copy}\n        style={{ marginTop: 14 }}\n      >\n        Choose your API framework on the right and this wizard will help you\n        setup + check the alias. All the changes you make here will be saved to\n        your <Code>optic.yml</Code> file.\n      </Typography>\n      <Typography variant=\"body2\" className={classes.copy}>\n        After you set up the alias, begin using api start it whenever you're\n        developing. Optic will show you diffs when the process stops.\n      </Typography>\n    </div>\n  );\n}\n\nfunction PortAssumption(props) {\n  const classes = useStyles();\n\n  const docs = integrationDocsOptions.find((i) => i.value === props.framework);\n\n  const examplePorts = [\n    '`<start_command> --port=$PORT`',\n    '`<start_command> --listen=$PORT`',\n    '`<start_command> --p=$PORT`',\n    '`OUR_ENV_VAR=$PORT <start_command>`',\n    '`export OUR_ENV_VAR=$PORT; <start_command>`',\n  ];\n\n  const PortTooltip = (\n    <span style={{ fontWeight: 600 }}>\n      map this variable to a flag your API framework looks for\n      <LightTooltip\n        interactive\n        title={\n          <div>\n            <Typography variant=\"overline\">examples:</Typography>\n            {docs && !docs.data.code_change ? (\n              <MarkdownRender\n                source={\n                  docs.data.preamble + '\\n\\n```' + docs.data.after + '\\n```'\n                }\n              />\n            ) : (\n              <MarkdownRender source={examplePorts.join('\\n')} />\n            )}\n          </div>\n        }\n      >\n        <HelpIcon\n          style={{ width: 12, height: 12, marginLeft: 5 }}\n          color=\"primary\"\n        />\n      </LightTooltip>\n    </span>\n  );\n\n  const LookFor = (\n    <span style={{ fontWeight: 600 }}>\n      look for the <Code>$PORT</Code> variable when starting up\n      <LightTooltip\n        interactive\n        title={\n          <div>\n            <Typography variant=\"overline\">examples:</Typography>\n            {docs && (\n              <MarkdownRender\n                source={\n                  docs.data.preamble + '\\n\\n```' + docs.data.after + '\\n```'\n                }\n              />\n            )}\n            {!docs && (\n              <MarkdownRender\n                source={\n                  \"\\n```\\n//when your starts and binds to a port...\\napi.listen(env['PORT'])\\n```\"\n                }\n              />\n            )}\n          </div>\n        }\n      >\n        <HelpIcon\n          style={{ width: 12, height: 12, marginLeft: 5 }}\n          color=\"primary\"\n        />\n      </LightTooltip>\n      {'.'}\n    </span>\n  );\n\n  return (\n    <div style={{ maxWidth: 670, ...props.style }}>\n      <Typography variant=\"h6\" style={{ marginBottom: 18 }}>\n        Starting on the correct <Code>$PORT</Code>\n      </Typography>\n      <Typography variant=\"body2\" className={classes.copy}>\n        Optic assumes your API can be started on a specific port, which Optic\n        assigns. To do this, Optic provides\n        <Code>$PORT</Code> as an environment variable. You'll either need to{' '}\n        {PortTooltip}, or modify your code to {LookFor}\n      </Typography>\n    </div>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  copy: {\n    fontWeight: 200,\n    marginBottom: 13,\n  },\n  copyRoot: {\n    paddingTop: 35,\n    maxWidth: 1200,\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'flex-start',\n    margin: '0 auto',\n    width: '100%',\n    paddingLeft: 5,\n  },\n  root: {\n    paddingTop: 30,\n    paddingBottom: 100,\n    maxWidth: 1200,\n    margin: '0 auto',\n    minWidth: 900,\n    width: '100%',\n  },\n  promptCheck: {\n    marginTop: 10,\n    backgroundColor: '#0e2a35',\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingTop: 10,\n    paddingBottom: 10,\n    justifyContent: 'flex-start',\n    paddingLeft: 15,\n    borderLeft: `4px solid ${UpdatedBlue}`,\n  },\n  pageBg: {\n    backgroundImage: `url(${require('../../assets/agsquare_dark_@2X.png')})`,\n    backgroundSize: '100px 100px',\n  },\n}));\n","import { useEffect, useState } from 'react';\n\nexport function useDebounce(value, delay) {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(\n    () => {\n      // Update debounced value after delay\n      const handler = setTimeout(() => {\n        setDebouncedValue(value);\n      }, delay);\n\n      // Cancel the timeout if value changes (also on delay change or unmount)\n      // This is how we prevent debounced value from updating if value is changed ...\n      // .. within the delay period. Timeout gets cleared and restarted.\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n    [value, delay] // Only re-call effect if value or delay changes\n  );\n\n  return debouncedValue;\n}\n","import React, { Suspense } from 'react';\nimport { Redirect, Switch, Route } from 'react-router-dom';\nimport { useRouterPaths } from './RouterPaths';\nimport { CaptureManagerPage } from './components/diff/v2/CaptureManagerPage';\nimport { DocsPage } from './components/docs/DocsPage';\nimport Loading from './components/navigation/Loading';\nimport { ApiPage } from './components/api-page/ApiPage';\nimport { SetupPage } from './components/setup-page/SetupPage';\n\nconst TestingDashboardLoader = React.lazy(() =>\n  import('./components/loaders/TestingDashboardLoader')\n);\n\nconst TestindDashboardTeaserPage = React.lazy(() =>\n  import('./components/testing/TeaserPage')\n);\n\nexport function ApiRoutes(props) {\n  const routerPaths = useRouterPaths();\n  const defaultRoute = props.getDefaultRoute\n    ? props.getDefaultRoute(routerPaths)\n    : routerPaths.docsRoot;\n\n  return (\n    <Suspense fallback={<Loading />}>\n      <Switch>\n        {/*<Route strict path={routerPaths.dashboardRoot} component={ApiPage} />*/}\n        <Route strict path={routerPaths.setup} component={SetupPage} />\n        <Route strict path={routerPaths.docsRoot} component={DocsPage} />\n        <Route\n          strict\n          path={routerPaths.diffsRoot}\n          component={CaptureManagerPage}\n        />\n        {process.env.REACT_APP_TESTING_DASHBOARD === 'true' && (\n          <Route\n            strict\n            path={routerPaths.testingDashboard}\n            component={TestingDashboardLoader}\n          />\n        )}\n\n        {process.env.REACT_APP_TESTING_DASHBOARD !== 'true' &&\n          process.env.REACT_APP_TESTING_DASHBOARD_TEASER === 'true' && (\n            <Route\n              strict\n              path={routerPaths.testingDashboard}\n              component={TestindDashboardTeaserPage}\n            />\n          )}\n\n        <Redirect to={defaultRoute} />\n      </Switch>\n    </Suspense>\n  );\n}\n","import React from 'react';\nimport { useParams, useRouteMatch, matchPath } from 'react-router-dom';\nimport { ApiSpecServiceLoader } from '../components/loaders/ApiLoader';\nimport {\n  Provider as DebugSessionContextProvider,\n  useMockSession,\n} from '../contexts/MockDataContext';\nimport { ApiRoutes } from '../routes';\nimport { Provider as BaseUrlContext } from '../contexts/BaseUrlContext';\nimport { DiffHelpers, JsonHelper, RfcCommandContext } from '@useoptic/domain';\nimport {\n  cachingResolversAndRfcStateFromEventsAndAdditionalCommands,\n  normalizedDiffFromRfcStateAndInteractions,\n} from '@useoptic/domain-utilities';\n\nexport default function TestingSessions(props) {\n  const match = useRouteMatch();\n  const { sessionId } = useParams();\n\n  const session = useMockSession({\n    sessionId: sessionId,\n    exampleSessionCollection: 'example-sessions',\n  });\n\n  const captureServiceFactory = async (specService, captureId) => {\n    const { ExampleCaptureService } = await import(\n      '../services/diff/ExampleDiffService'\n    );\n    return new ExampleCaptureService(specService);\n  };\n\n  const diffServiceFactory = async (\n    specService,\n    captureService,\n    _events,\n    _rfcState,\n    additionalCommands,\n    config,\n    captureId\n  ) => {\n    async function computeInitialDiff() {\n      const capture = await specService.listCapturedSamples(captureId);\n      const commandContext = new RfcCommandContext(\n        'simulated',\n        'simulated',\n        'simulated'\n      );\n\n      const {\n        resolvers,\n        rfcState,\n      } = cachingResolversAndRfcStateFromEventsAndAdditionalCommands(\n        _events,\n        commandContext,\n        additionalCommands\n      );\n      const a = DiffHelpers;\n      let diffs = DiffHelpers.emptyInteractionPointersGroupedByDiff();\n      for (const interaction of capture.samples) {\n        diffs = DiffHelpers.groupInteractionPointerByDiffs(\n          resolvers,\n          rfcState,\n          JsonHelper.fromInteraction(interaction),\n          interaction.uuid,\n          diffs\n        );\n      }\n      return {\n        diffs,\n        rfcState,\n        resolvers,\n      };\n    }\n\n    const { diffs, rfcState } = await computeInitialDiff();\n    const { ExampleDiffService } = await import(\n      '../services/diff/ExampleDiffService'\n    );\n\n    return new ExampleDiffService(\n      specService,\n      captureService,\n      config,\n      diffs,\n      rfcState\n    );\n  };\n\n  return (\n    <BaseUrlContext value={{ path: match.path, url: match.url }}>\n      <DebugSessionContextProvider value={session}>\n        <ApiSpecServiceLoader\n          captureServiceFactory={captureServiceFactory}\n          diffServiceFactory={diffServiceFactory}\n        >\n          <ApiRoutes />\n        </ApiSpecServiceLoader>\n      </DebugSessionContextProvider>\n    </BaseUrlContext>\n  );\n}\n","import {\n  ICaptureService,\n  IDiffService,\n  IGetDescriptionResponse,\n  IListDiffsResponse,\n  IListSuggestionsResponse,\n  IListUnrecognizedUrlsResponse,\n  ILoadInteractionResponse,\n  ILoadStatsResponse,\n  IRfcCommand,\n  IStartDiffResponse,\n} from './index';\nimport { JsonHttpClient } from '@useoptic/client-utilities';\nimport {\n  DiffResultHelper,\n  getOrUndefined,\n  JsonHelper,\n  opticEngine,\n  ScalaJSHelpers,\n  UrlCounterHelper,\n} from '@useoptic/domain';\nimport { ILearnedBodies } from '@useoptic/cli-shared/build/diffs/initial-types';\n\nexport class LocalCliDiffService implements IDiffService {\n  constructor(\n    private captureService: ICaptureService,\n    private baseUrl: string,\n    private config: IStartDiffResponse,\n    private rfcState: any\n  ) {}\n\n  diffId(): string {\n    return this.config.diffId;\n  }\n\n  async listDiffs(): Promise<IListDiffsResponse> {\n    const url = `${this.baseUrl}/diffs`;\n    const diffsJson = await JsonHttpClient.getJson(url);\n    const diffs = opticEngine.DiffWithPointersJsonDeserializer.fromJs(\n      diffsJson\n    );\n    return {\n      diffs: ScalaJSHelpers.toJsArray(\n        DiffResultHelper.endpointDiffs(diffs, this.rfcState)\n      ),\n    };\n  }\n\n  async listUnrecognizedUrls(): Promise<IListUnrecognizedUrlsResponse> {\n    const url = `${this.baseUrl}/undocumented-urls`;\n    const json = (await JsonHttpClient.getJson(url)).urls;\n    const result = UrlCounterHelper.fromJsonToSeq(json, this.rfcState);\n    return result;\n  }\n\n  async loadStats(): Promise<ILoadStatsResponse> {\n    const url = `${this.baseUrl}/stats`;\n    return JsonHttpClient.getJson(url);\n  }\n\n  async loadDescription(diff: any): Promise<IGetDescriptionResponse> {\n    const interaction = await this.captureService.loadInteraction(\n      diff.firstInteractionPointer\n    );\n    if (interaction.interaction) {\n      return getOrUndefined(\n        DiffResultHelper.descriptionFromDiff(\n          diff,\n          this.rfcState,\n          JsonHelper.fromInteraction(interaction.interaction)\n        )\n      );\n    } else {\n      return null;\n    }\n  }\n\n  async listSuggestions(\n    diff: any,\n    interaction: any\n  ): Promise<IListSuggestionsResponse> {\n    return ScalaJSHelpers.toJsArray(\n      DiffResultHelper.suggestionsForDiff(diff, interaction, this.rfcState)\n    );\n  }\n\n  async loadInitialPreview(\n    diff: any,\n    currentInteraction: any,\n    inferPolymorphism: boolean\n  ) {\n    const bodyPreview = diff.previewBodyRender(currentInteraction);\n    //@todo check what this does for 'No Body' Nothing to infer. seems wasteful to load...\n    let interactions = [];\n    if (inferPolymorphism) {\n      interactions = await Promise.all(\n        ScalaJSHelpers.toJsArray(diff.randomPointers).map(async (i) => {\n          const { interaction } = await this.captureService.loadInteraction(i);\n          return JsonHelper.fromInteraction(interaction);\n        })\n      );\n    } else {\n      interactions = [currentInteraction];\n    }\n\n    const shapePreview = diff.previewShapeRender(\n      this.rfcState,\n      JsonHelper.jsArrayToVector(interactions),\n      inferPolymorphism\n    );\n\n    return {\n      bodyPreview,\n      shapePreview: shapePreview.shape,\n      suggestion: shapePreview.suggestion,\n    };\n  }\n\n  async learnInitial(\n    rfcService: any,\n    rfcId: any,\n    pathId: String,\n    method: string\n  ): Promise<ILearnedBodies> {\n    const events = opticEngine.EventSerialization.toJson(\n      rfcService.listEvents(rfcId)\n    );\n    const url = `${this.captureService.baseUrl}/initial-bodies`;\n    return await JsonHttpClient.postJson(url, {\n      events,\n      pathId,\n      method,\n    });\n  }\n}\n\nexport class LocalCliCaptureService implements ICaptureService {\n  constructor(public baseUrl: string) {}\n\n  async startDiff(\n    events: any[],\n    ignoreRequests: string[],\n    additionalCommands: IRfcCommand[],\n    filters: { pathId: string; method: string }[]\n  ): Promise<IStartDiffResponse> {\n    const url = `${this.baseUrl}/diffs`;\n    return JsonHttpClient.postJson(url, {\n      ignoreRequests,\n      additionalCommands,\n      events,\n      filters,\n    });\n  }\n\n  loadInteraction(\n    interactionPointer: string\n  ): Promise<ILoadInteractionResponse> {\n    const url = `${this.baseUrl}/interactions/${interactionPointer}`;\n    return JsonHttpClient.getJson(url);\n  }\n}\n","import React from 'react';\nimport { useParams, useRouteMatch } from 'react-router-dom';\nimport { LocalCliSpecServiceLoader } from '../components/loaders/ApiLoader';\nimport { ApiRoutes } from '../routes';\nimport EventEmitter from 'events';\nimport { Provider as BaseUrlContext } from '../contexts/BaseUrlContext';\nimport { SpecServiceClient } from '@useoptic/cli-client';\nimport {\n  LocalCliCaptureService,\n  LocalCliDiffService,\n} from '../services/diff/LocalCliDiffService';\n\nexport default function LocalCli(props) {\n  const match = useRouteMatch();\n  const { apiId } = useParams();\n\n  const eventEmitter = new EventEmitter();\n  const specService = new SpecServiceClient(apiId, eventEmitter);\n\n  const captureServiceFactory = async function (specService, captureId) {\n    const baseUrl = `/api/specs/${apiId}/captures/${captureId}`;\n    return new LocalCliCaptureService(baseUrl);\n  };\n  const diffServiceFactory = async function (\n    specService,\n    captureService,\n    events,\n    rfcState,\n    additionalCommands,\n    config,\n    captureId\n  ) {\n    const baseUrl = `/api/specs/${apiId}/captures/${captureId}/diffs/${config.diffId}`;\n    return new LocalCliDiffService(captureService, baseUrl, config, rfcState);\n  };\n\n  return (\n    <BaseUrlContext value={{ path: match.path, url: match.url }}>\n      <LocalCliSpecServiceLoader\n        specService={specService}\n        diffServiceFactory={diffServiceFactory}\n        captureServiceFactory={captureServiceFactory}\n      >\n        <ApiRoutes />\n      </LocalCliSpecServiceLoader>\n    </BaseUrlContext>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport EmptyState from './EmptyState';\nimport { AddOpticLink, DocumentingYourApi, OpticDocs } from './Links';\n\nconst useStyles = makeStyles((theme) => ({\n  body: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '100vh',\n  },\n}));\n\nexport default function WelcomePage(props) {\n  const classes = useStyles();\n  const { title, content } = props;\n\n  return (\n    <div className={classes.body}>\n      <div style={{ marginTop: -150 }}>\n        <EmptyState\n          title={'Optic is Monitoring your APIs'}\n          content={`\n**Getting Started**\n- [Add Optic to your API Project](${AddOpticLink})\n- [Document your API with Optic](${DocumentingYourApi})\n- [Explore all the Optic Documentation](${OpticDocs})\n`.trim()}\n        />\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { useParams, useRouteMatch, matchPath } from 'react-router-dom';\nimport { ApiSpecServiceLoader } from '../components/loaders/ApiLoader';\nimport {\n  Provider as DebugSessionContextProvider,\n  useMockSession,\n} from '../contexts/MockDataContext';\nimport { ApiRoutes } from '../routes';\nimport { Provider as BaseUrlContext } from '../contexts/BaseUrlContext';\nimport { DiffHelpers, JsonHelper, RfcCommandContext } from '@useoptic/domain';\nimport {\n  cachingResolversAndRfcStateFromEventsAndAdditionalCommands,\n  normalizedDiffFromRfcStateAndInteractions,\n} from '@useoptic/domain-utilities';\n\nexport default function PrivateSessions(props) {\n  const match = useRouteMatch();\n  const { sessionId } = useParams();\n\n  const session = useMockSession({\n    sessionId: sessionId,\n    exampleSessionCollection: 'private-sessions',\n  });\n\n  const captureServiceFactory = async (specService, captureId) => {\n    const { ExampleCaptureService } = await import(\n      '../services/diff/ExampleDiffService'\n    );\n    return new ExampleCaptureService(specService);\n  };\n\n  const diffServiceFactory = async (\n    specService,\n    captureService,\n    _events,\n    _rfcState,\n    additionalCommands,\n    config,\n    captureId\n  ) => {\n    const { ExampleDiffService } = await import(\n      '../services/diff/ExampleDiffService'\n    );\n    async function computeInitialDiff() {\n      const capture = await specService.listCapturedSamples(captureId);\n      const commandContext = new RfcCommandContext(\n        'simulated',\n        'simulated',\n        'simulated'\n      );\n\n      const {\n        resolvers,\n        rfcState,\n      } = cachingResolversAndRfcStateFromEventsAndAdditionalCommands(\n        _events,\n        commandContext,\n        additionalCommands\n      );\n      let diffs = DiffHelpers.emptyInteractionPointersGroupedByDiff();\n      for (const interaction of capture.samples) {\n        diffs = DiffHelpers.groupInteractionPointerByDiffs(\n          resolvers,\n          rfcState,\n          JsonHelper.fromInteraction(interaction),\n          interaction.uuid,\n          diffs\n        );\n      }\n      return {\n        diffs,\n        rfcState,\n        resolvers,\n      };\n    }\n\n    const { diffs, rfcState } = await computeInitialDiff();\n\n    return new ExampleDiffService(\n      specService,\n      captureService,\n      config,\n      diffs,\n      rfcState\n    );\n  };\n\n  return (\n    <BaseUrlContext value={{ path: match.path, url: match.url }}>\n      <DebugSessionContextProvider value={session}>\n        <ApiSpecServiceLoader\n          captureServiceFactory={captureServiceFactory}\n          diffServiceFactory={diffServiceFactory}\n        >\n          <ApiRoutes />\n        </ApiSpecServiceLoader>\n      </DebugSessionContextProvider>\n    </BaseUrlContext>\n  );\n}\n","import React, { useEffect, useState, useRef } from 'react';\nimport { useParams, useRouteMatch, useHistory } from 'react-router-dom';\nimport { ApiSpecServiceLoader } from '../components/loaders/ApiLoader';\nimport {\n  Provider as DebugSessionContextProvider,\n  useMockSession,\n} from '../contexts/MockDataContext';\nimport { ApiRoutes } from '../routes';\nimport { Provider as BaseUrlContext } from '../contexts/BaseUrlContext';\n// import {\n//   ExampleCaptureService,\n//   ExampleDiffService,\n// } from '../services/diff/ExampleDiffService';\nimport { DiffHelpers, JsonHelper, RfcCommandContext } from '@useoptic/domain';\nimport { cachingResolversAndRfcStateFromEventsAndAdditionalCommands } from '@useoptic/domain-utilities';\nimport { Snackbar, makeStyles } from '@material-ui/core';\nimport { analyticsEvents } from '../Analytics';\nimport * as DiffEvents from '@useoptic/analytics/lib/events/diffs';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport {\n  UpdatedBlueBackground,\n  ColorButton,\n  SubtleBlueBackground,\n} from '../theme';\nimport { subtabs } from '../components/diff/v2/CaptureManagerPage';\n\nconst snackbarStyles = makeStyles({\n  alert: {\n    border: `1px white solid`,\n    fontSize: '1.2em',\n  },\n  code: {\n    fontFamily: \"'Source Code Pro', monospace\",\n    fontWeight: 600,\n    paddingLeft: 2,\n    paddingRight: 2,\n    paddingTop: 1,\n    paddingBottom: 1,\n    wordBreak: 'break-word',\n    backgroundColor: UpdatedBlueBackground,\n  },\n  buttonWrapper: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    paddingTop: '1em',\n  },\n  message: {\n    color: SubtleBlueBackground,\n    paddingRight: 15,\n  },\n  wrapper: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  ctaButton: {},\n});\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\nexport default function DemoSessions(props) {\n  const match = useRouteMatch();\n  const { sessionId } = useParams();\n  const history = useHistory();\n\n  const session = useMockSession({\n    sessionId: sessionId,\n    exampleSessionCollection: 'demos',\n  });\n\n  const captureServiceFactory = async (specService, captureId) => {\n    const { ExampleCaptureService } = await import(\n      '../services/diff/ExampleDiffService'\n    );\n    return new ExampleCaptureService(specService);\n  };\n\n  const diffServiceFactory = async (\n    specService,\n    captureService,\n    _events,\n    _rfcState,\n    additionalCommands,\n    config,\n    captureId\n  ) => {\n    const { ExampleDiffService } = await import(\n      '../services/diff/ExampleDiffService'\n    );\n\n    async function computeInitialDiff() {\n      const capture = await specService.listCapturedSamples(captureId);\n      const commandContext = new RfcCommandContext(\n        'simulated',\n        'simulated',\n        'simulated'\n      );\n\n      const {\n        resolvers,\n        rfcState,\n      } = cachingResolversAndRfcStateFromEventsAndAdditionalCommands(\n        _events,\n        commandContext,\n        additionalCommands\n      );\n      let diffs = DiffHelpers.emptyInteractionPointersGroupedByDiff();\n      for (const interaction of capture.samples) {\n        diffs = DiffHelpers.groupInteractionPointerByDiffs(\n          resolvers,\n          rfcState,\n          JsonHelper.fromInteraction(interaction),\n          interaction.uuid,\n          diffs\n        );\n      }\n      return {\n        diffs,\n        rfcState,\n        resolvers,\n      };\n    }\n\n    const { diffs, rfcState } = await computeInitialDiff();\n\n    return new ExampleDiffService(\n      specService,\n      captureService,\n      config,\n      diffs,\n      rfcState\n    );\n  };\n\n  // info boxes / guides for the demo\n  const [message, setMessage] = useState({\n    message: 'informational tooltip is loading',\n    action: {\n      text: 'Button Text',\n      href: '/demos/todo',\n    },\n  });\n  const [commits, setCommits] = useState(0);\n  const trackCommit = () => setCommits(commits + 1);\n  const [hasCommited, setHasCommited] = useState(false);\n  const [route, _setRoute] = useState('');\n  const routeStateRef = useRef(route);\n  const setRoute = (data) => {\n    routeStateRef.current = data;\n    _setRoute(data);\n  };\n  const styles = snackbarStyles();\n  const [showTooltips, setShowTooltips] = useState(true);\n  const disableTooltips = () => setShowTooltips(false);\n  const [\n    hasDocumentedAllEndpointDiffs,\n    setDocumentedAllEndpointDiffs,\n  ] = useState(false);\n\n  // path specific info boxes\n  useEffect(() => {\n    if (props.location.pathname.includes('documentation/paths')) {\n      // then be like \"Lets document a new endpoint\" (force the right tab when you redirect)\n      setMessage({\n        message: `Here is the specification for your endpoint. You can add custom descriptions anywhere to help explain how the works.`,\n      });\n    } else if (props.location.pathname.includes('documentation')) {\n      setMessage({\n        message: `Details can be added to existing documentation. Click the \"Full Documentation\" drop-down on an endpoint above.`,\n      });\n    } else if (\n      props.location.pathname.includes('testing/captures') &&\n      props.location.pathname.includes('endpoints')\n    ) {\n      setMessage({\n        message: 'We can see that there is an undocumented field',\n      });\n    } else if (props.location.pathname.includes('testing/captures')) {\n      setMessage({\n        message: \"Choose an endpoint to see if it's fufilling its contract\",\n      });\n    }\n    const r = props.location.pathname.match(/paths\\/(.*)/);\n    if (r !== null) {\n      setRoute(r.pop());\n    }\n  }, [props.location.pathname]);\n\n  useEffect(() => {\n    const eventsHandler = (event) => {\n      const eventProps = event.data;\n\n      switch (event.type) {\n        case DiffEvents.UpdateContribution.eventName: {\n          setMessage({\n            message: `Nice! Descriptions will stay attached to their endpoint/fields even when the specification changes!\\n\\nLet's check back and see if there are any other diffs to approve`,\n            action: {\n              text: 'Review all diffs',\n              href: `/demos/todo/diffs/example-session?tab=${\n                hasDocumentedAllEndpointDiffs\n                  ? subtabs.UNDOCUMENTED_URL\n                  : subtabs.ENDPOINT_DIFF\n              }`,\n            },\n          });\n          break;\n        }\n        case DiffEvents.ShowInitialDocumentingView.eventName: {\n          setMessage({\n            message: `On the left, Optic is showing an example request it observed. The right panel shows the shape Optic detected from that request\\n\\nTo add this to your documentation, simply click \"Document Bodies\"`,\n          });\n          break;\n        }\n        case DiffEvents.UserChangedCaptureOverviewTab.eventName: {\n          if (event.data.currentTab === 'UNDOCUMENTED_URL') {\n            if (!hasCommited && props.location.pathname.includes('diffs')) {\n              // we don't need to keep telling them things they already did\n              const undocumentedUrlCount = eventProps.undocumentedUrlCount || 1;\n              if (undocumentedUrlCount > 0) {\n                setMessage({\n                  message:\n                    'Here, Optic is showing all urls that received traffic but have not been documented. \\n\\nChoose a url to document it',\n                });\n              } else {\n                console.log(routeStateRef.current);\n                setMessage({\n                  message: `All Undocumented URLs have been added to the specification`,\n                  action: {\n                    text: 'See Documentation',\n                    href: `/demos/todo/documentation/paths/${routeStateRef.current}`,\n                  },\n                });\n              }\n            }\n          } else if (event.data.currentTab === 'ENDPOINT_DIFF') {\n            if (!hasCommited && props.location.pathname.includes('diffs')) {\n              // we don't need to keep telling them things they already did\n              const diffAmount = eventProps.diffCount;\n              if (diffAmount > 0) {\n                setMessage({\n                  message: `Optic shows all your API endpoints. If any endpoints exhibit undocumented behavior, Optic detects it\\n\\nExample: Click \"Creates a new Todo Item\" to Review the Diff`,\n                });\n              } else {\n                setMessage({\n                  message: `Because we've documented all changes in our API's behavior, we can see that the requests are following the expected behavior, and that there are no diffs`,\n                });\n              }\n            }\n          }\n          break;\n        }\n        case DiffEvents.AddUrlModalIdentifyingPathComponents.eventName: {\n          setMessage({\n            message:\n              'If an API path has parameters, they can be documented for consumers. Click the last component of the path, which is an example of a `todo_id`, and click Next.',\n          });\n          // setMessage(`Since our route is using a path parameter, we can tell Optic to recognize the pattern. Click on ${eventProps.path.split(\"/\").pop()} and change it to say \"todo_id\"`)\n          break;\n        }\n        case DiffEvents.AddUrlModalNaming.eventName: {\n          const exampleEndpointName =\n            eventProps.method === 'GET'\n              ? 'Get specific TODO Item'\n              : 'Update Specific TODO Item';\n          setMessage({\n            message: `Now, let's give it a name. For example, we can call this endpoint \"${exampleEndpointName}\"`,\n          });\n          break;\n        }\n        case DiffEvents.ShowCommitCard.eventName: {\n          setMessage({\n            message:\n              'To commit these changes to your API Specification, click commit! Optic is recording the history of your API changes, somewhat like Git tracks changes in code.',\n          });\n          break;\n        }\n        case DiffEvents.UserCommittedChanges.eventName: {\n          setHasCommited(true);\n          trackCommit();\n          if (routeStateRef.current.includes('PUT')) {\n            setDocumentedAllEndpointDiffs(true);\n          }\n          // 1 - button is offset\n          console.log(routeStateRef);\n          setMessage({\n            message: `Awesome! Now that you've committed changes, let's take a look at the documentation!`,\n            action: {\n              text: 'See Documentation',\n              href: `/demos/todo/documentation/paths/${routeStateRef.current}`,\n            },\n          });\n          break;\n        }\n        case DiffEvents.UserPreviewedSuggestion.eventName: {\n          let m = '';\n          const addingField = eventProps.suggestion.match(\n            /Add field '(.*)' as/\n          );\n          const optionalField = eventProps.suggestion.match(\n            /Make field '(.*)' optional/\n          );\n          const removeField = eventProps.suggestion.match(\n            /Remove field '(.*)'/\n          );\n          const changeField = eventProps.suggestion.match(\n            /Change field '(.*)'/\n          );\n\n          if (addingField !== null) {\n            m = `Look! Optic updated the spec to add the field ${addingField.pop()}`;\n          } else if (optionalField !== null) {\n            m = `Look! Optic updated the spec to show the ${optionalField.pop()} field is optional`;\n          } else if (removeField !== null) {\n            m = `Look! Optic updated the spec to show the ${removeField.pop()} field is no longer part of the spec`;\n          } else if (changeField !== null && changeField.length > 2) {\n            m = `Look! Optic updated the spec to show the ${changeField[1]} field is now called ${changeField[2]}`;\n          }\n          if (m !== '') {\n            setMessage({\n              message: `${m}. Press \"Approve\" to save`,\n            });\n          }\n          break;\n        }\n        case DiffEvents.SuggestionDisplayed.eventName: {\n          let m = '';\n          const missingField = eventProps.suggestion.match(\n            /Missing (.*) field (.*)/\n          );\n          const newField = eventProps.suggestion.match(/New field (.*)/);\n\n          if (missingField !== null) {\n            m = `Optic has detected an optional field in your API: ${missingField.pop()}. No need to manually update your spec, just click  \"Make Optional\" and Optic will make the changes for you`;\n          } else if (newField !== null) {\n            m = `Optic has detected a new field in your API: ${newField.pop()}. No need to manually update your spec, just click  \"Add Field\" and Optic will make the changes for you`;\n          }\n\n          if (m !== '') {\n            setMessage({\n              message: m,\n            });\n          }\n          break;\n        }\n        default: {\n          break;\n        }\n      }\n    };\n\n    analyticsEvents.listen(eventsHandler);\n\n    return () =>\n      analyticsEvents.eventEmitter.removeListener('event', eventsHandler);\n  }, []);\n\n  // event specific info boxes\n\n  const m =\n    commits > 1\n      ? {\n          message:\n            \"Looks like you've got a hang of things! Feel free to keep poking around\",\n          action: {\n            text: 'End Walkthrough',\n            onClick: disableTooltips,\n          },\n        }\n      : message;\n  return (\n    <>\n      <BaseUrlContext value={{ path: match.path, url: match.url }}>\n        <DebugSessionContextProvider value={session}>\n          <ApiSpecServiceLoader\n            captureServiceFactory={captureServiceFactory}\n            diffServiceFactory={diffServiceFactory}\n          >\n            <ApiRoutes getDefaultRoute={(options) => options.diffsRoot} />\n\n            <Snackbar\n              open={showTooltips && m.message !== 'nothing'}\n              autoHideDuration={6000}\n            >\n              <Alert className={styles.alert} severity=\"info\" icon={false}>\n                <div className={styles.wrapper}>\n                  <div className={styles.message}>\n                    {m.message.split('\\n').map((item, key) => {\n                      return (\n                        <span key={key}>\n                          {item}\n                          <br />\n                        </span>\n                      );\n                    })}\n                  </div>\n\n                  <div className={styles.buttonWrapper}>\n                    {m.action && (\n                      <ColorButton\n                        className={styles.ctaButton}\n                        variant=\"contained\"\n                        onClick={() => {\n                          if (m.action.onClick) {\n                            m.action.onClick();\n                          } else {\n                            history.push(m.action.href);\n                          }\n                        }}\n                      >\n                        {m.action.text}\n                      </ColorButton>\n                    )}\n                  </div>\n                </div>\n              </Alert>\n            </Snackbar>\n          </ApiSpecServiceLoader>\n        </DebugSessionContextProvider>\n      </BaseUrlContext>\n    </>\n  );\n}\n","import React, { useMemo } from 'react';\n\nconst SpecViewerDataContext = React.createContext(null);\nSpecViewerDataContext.displayName = 'SpecViewerDataContext';\nSpecViewerDataContext.debugSession = true;\n\n// only expose the Provider component, but hide the Consumer in favour of hooks\nexport const { Provider } = SpecViewerDataContext;\n\nfunction createSpecSession(specId) {\n\n\t\n  let fetchedData = null;\n  async function getData(refresh = false) {\n    if (!fetchedData || refresh) {\n\t\tconst ApiUrl = `${process.env.REACT_APP_API_URL}/api/v1`;\n\n\t\tconst response = await fetch(`${ApiUrl}/sharing/public/spec-urls/${specId}`);\n\t\tconst data = await response.json();\n\t\tfetchedData = {\n\t\t\tevents: data,\n\t\t\texamples: {},\n\t\t\tsession: {\n\t\t\t\tmetadata: {\n\t\t\t\tcompleted: true,\n\t\t\t\t},\n\t\t\t\tsamples: [],\n\t\t\t\tlinks: [\n\t\t\t\t\t{\n\t\t\t\t\t\trel: 'next',\n\t\t\t\t\t\thref: '',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t};\n    }\n    return await fetchedData;\n  }\n\n  return {\n    specId,\n    getData,\n  };\n}\n\nexport function useSpecSession(specId) {\n  const dashboardContext = useMemo(() => createSpecSession(specId), [specId]);\n  return dashboardContext;\n}\n","import React from 'react';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport TestingSessions from './testing-sessions';\nimport LocalCli from './localcli';\nimport WelcomePage from '../components/support/WelcomePage';\nimport PrivateSessions from './private-sessions';\nimport DemoSessions from './demo-sessions';\nimport SpecViewer from './spec-viewer';\n\nexport default function TopLevelRoutes() {\n  return (\n    <Switch>\n      <Route\n        strict\n        path=\"/development/private-sessions/:sessionId\"\n        component={PrivateSessions}\n      />\n      <Route\n        strict\n        path=\"/development/:sessionId\"\n        component={TestingSessions}\n      />\n      <Route\n        strict\n        path=\"/demos/:sessionId\"\n        component={DemoSessions}\n      />\n      <Route strict path=\"/apis/:apiId\" component={LocalCli} />\n      \n      <Route strict path={'/'} component={WelcomePage} />\n    </Switch>\n  );\n}\n","import React, { useContext } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { Typography } from '@material-ui/core';\nimport { lighten, makeStyles } from '@material-ui/core/styles';\nimport { DocDarkGrey } from '../../../docs/DocConstants';\nimport { LearnAPIPageContext } from './LearnAPIPageContext';\n\nexport default function LearnAPIMenu() {\n  const classes = useStyles();\n  const { startLearning } = useContext(LearnAPIPageContext);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const show = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  function CustomMenuItem({ name, type, why, description }) {\n    return (\n      <MenuItem\n        onClick={() => {\n          startLearning(type);\n          handleClose();\n        }}\n        component=\"div\"\n      >\n        <div className={classes.option}>\n          <div className={classes.topline}>\n            <Typography variant=\"body1\">{name}</Typography>\n            <div style={{ flex: 1 }} />\n            <Typography variant=\"body2\" className={classes.why}>\n              {why}\n            </Typography>\n          </div>\n          <Typography\n            variant=\"caption\"\n            className={classes.description}\n            component=\"div\"\n          >\n            {description}\n          </Typography>\n        </div>\n      </MenuItem>\n    );\n  }\n\n  return (\n    <div>\n      <Button\n        color=\"primary\"\n        variant=\"contained\"\n        onMouseEnter={show}\n        onClick={show}\n      >\n        Learn Endpoints\n      </Button>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        onMouseLeave={handleClose}\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <div onMouseLeave={handleClose}>\n          <CustomMenuItem\n            name=\"Automatic\"\n            type=\"automatic\"\n            why=\"faster\"\n            description=\"Learn the current behavior of each endpoint. Optic will document the bodies of each request, and the 2xx, 4xx responses. Optionals, nullables and oneOfs will be inferred.\"\n          />\n          <CustomMenuItem\n            name=\"Manual\"\n            type=\"manual\"\n            why=\"most control\"\n            description=\"Add these endpoints to your API. Then manually document the request/response bodies.\"\n          />\n        </div>\n      </Menu>\n    </div>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  option: {\n    width: 400,\n    overflow: 'hidden',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  topline: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  description: {\n    wordBreak: 'break-all',\n    whiteSpace: 'normal',\n    color: DocDarkGrey,\n  },\n  why: {\n    color: '#027a7d',\n    fontSize: 10,\n    paddingRight: 5,\n  },\n}));\n","import {\n  commandsToJson,\n  Facade,\n  lengthScala,\n  mapScala,\n  Queries,\n  RfcCommandContext,\n} from '@useoptic/domain';\nimport uuidv4 from 'uuid/v4';\n\nconst clientSessionId = uuidv4();\nconst clientId = 'anonymous';\n\nexport function batchCommandHandler(eventStore, rfcId) {\n  const initialEventStore = eventStore.getCopy(rfcId);\n\n  const rfcService = Facade.makeRfcService(initialEventStore);\n\n  const pendingCommands = [];\n\n  function emitCommands(commands) {\n    const batchId = uuidv4();\n    const commandContext = new RfcCommandContext(\n      clientId,\n      clientSessionId,\n      batchId\n    );\n    pendingCommands.push(...commands);\n    rfcService.handleCommands(rfcId, commandContext, ...commands);\n  }\n\n  return {\n    doWork: (handler) => {\n      const queries = Queries(eventStore, rfcService, rfcId);\n      handler({\n        emitCommands,\n        queries,\n        rfcState: rfcService.currentState(rfcId),\n        rfcService,\n        rfcId,\n      });\n    },\n    getAllCommands: () => pendingCommands,\n  };\n}\n","import { batchCommandHandler } from '../../../utilities/BatchCommandHandler';\nimport { resolvePath } from '../../../utilities/PathUtilities';\nimport {\n  DiffResultHelper,\n  getOrUndefined,\n  opticEngine,\n  OpticIds,\n  RequestsCommands,\n} from '@useoptic/domain';\nimport {\n  cleanupPathComponentName,\n  pathStringToPathComponents,\n} from '../AddUrlModal';\n\nconst { JsonHelper } = opticEngine.com.useoptic;\nconst jsonHelper = JsonHelper();\n\nexport function LearnPaths(eventStore, rfcId, currentPathExpressions) {\n  const batchHandler = batchCommandHandler(eventStore, rfcId);\n  const endpointIds = [];\n  //learn paths\n  currentPathExpressions.forEach((i) => {\n    batchHandler.doWork(({ emitCommands, queries }) => {\n      const pathsById = queries.requestsState().pathComponents;\n      let lastParentPathId;\n      const commands = [];\n      //create path if missing\n      const pathComponents = pathStringToPathComponents(i.pathExpression);\n      const { toAdd, lastMatch } = resolvePath(pathComponents, pathsById);\n      lastParentPathId = lastMatch.pathId;\n      toAdd.forEach((addition) => {\n        const pathId = OpticIds.newPathId();\n        const command = (addition.isParameter\n          ? RequestsCommands.AddPathParameter\n          : RequestsCommands.AddPathComponent)(\n          pathId,\n          lastParentPathId,\n          cleanupPathComponentName(addition.name)\n        );\n        commands.push(command);\n        lastParentPathId = pathId;\n      });\n      endpointIds.push({ method: i.method, pathId: lastParentPathId });\n      emitCommands(commands);\n    });\n  });\n\n  return {\n    commands: batchHandler.getAllCommands(),\n    endpointIds,\n  };\n}\n","import { batchCommandHandler } from '../../../utilities/BatchCommandHandler';\nimport { useEffect, useState } from 'react';\nimport {\n  getOrUndefined,\n  opticEngine,\n  OpticIds,\n  RequestsCommands,\n} from '@useoptic/domain';\nimport { DiffResultHelper } from '@useoptic/domain';\nimport Bottleneck from 'bottleneck';\nimport flattenDeep from 'lodash.flattendeep';\n\nconst { JsonHelper } = opticEngine.com.useoptic;\nconst jsonHelper = JsonHelper();\n\nexport function useBatchLearn(\n  additionalCommands,\n  isManual,\n  eventStore,\n  rfcId,\n  endpointIds,\n  diffService,\n  setProgressTicker,\n  onCompleted\n) {\n  const [allBodies, setAllBodies] = useState([]);\n\n  useEffect(() => {\n    async function process() {\n      if (additionalCommands.length && Boolean(endpointIds)) {\n        const batchHandler = batchCommandHandler(eventStore, rfcId);\n        //update with the path commands\n        batchHandler.doWork(({ emitCommands }) =>\n          emitCommands(additionalCommands)\n        );\n\n        const throttler = new Bottleneck({\n          maxConcurrent: 5,\n          minTime: 100,\n        });\n\n        endpointIds.forEach(({ pathId, method }) => {\n          throttler.schedule(async () => {\n            console.log(`learning started for ${pathId} ${method}`);\n            let promise;\n            batchHandler.doWork(async ({ rfcService, rfcId }) => {\n              if (isManual) {\n                setProgressTicker((p) => p + 1); //don't try to learn.\n                promise = Promise.resolve();\n              } else {\n                promise = diffService.learnInitial(\n                  rfcService,\n                  rfcId,\n                  pathId,\n                  method\n                );\n              }\n            });\n\n            if (!isManual) {\n              promise.finally((i) => {\n                console.log(`learning finished ${pathId} ${method}`);\n                setProgressTicker((p) => p + 1);\n              });\n              try {\n                const result = await promise;\n                setAllBodies((current) => [...current, result]);\n              } catch (e) {\n                console.error(e);\n              }\n            }\n\n            await promise;\n          });\n        });\n      }\n    }\n    process();\n  }, [additionalCommands.length, endpointIds]);\n\n  useEffect(() => {\n    if (!isManual && allBodies.length === (endpointIds && endpointIds.length)) {\n      //manufacture suggestions\n\n      const allCommands = flattenDeep(\n        allBodies.map((i) => {\n          return [\n            i.requests.map((req) => req.commands),\n            i.responses.map((req) => req.commands),\n          ];\n        })\n      );\n\n      const asScalaCommandsInJsArray = JsonHelper().vectorToJsArray(\n        opticEngine.CommandSerialization.fromJs(allCommands)\n      );\n\n      //flatten requests and responses into one set of runnable commands\n      // allBodies.forEach((i) => (commands = [...commands, ...i.commands]));\n      onCompleted(asScalaCommandsInJsArray);\n    } else if (isManual && endpointIds) {\n      onCompleted([]);\n    }\n  }, [allBodies, endpointIds]);\n}\n","import React, { useContext, useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItem from '@material-ui/core/ListItem';\nimport List from '@material-ui/core/List';\nimport uuidv4 from 'uuid/v4';\nimport Divider from '@material-ui/core/Divider';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Slide from '@material-ui/core/Slide';\nimport { Container } from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport {\n  Dark,\n  DocDarkGrey,\n  DocDivider,\n  DocGrey,\n} from '../../../docs/DocConstants';\nimport { LearnAPIPageContext } from './LearnAPIPageContext';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport DoneIcon from '@material-ui/icons/Done';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { AddedGreen } from '../../../../theme';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { LearnPaths } from './Learn';\nimport { RfcContext } from '../../../../contexts/RfcContext';\nimport {\n  Facade,\n  lengthScala,\n  mapScala,\n  OasProjectionHelper,\n  opticEngine,\n  RfcCommandContext,\n} from '@useoptic/domain';\nimport { useCaptureContext } from '../../../../contexts/CaptureContext';\nimport { DiffContext } from '../DiffContext';\nimport { flatten } from '../DiffPageNew';\nimport { withSpecContext } from '../Finalize';\nimport { useServices } from '../../../../contexts/SpecServiceContext';\nimport { useHistory } from 'react-router-dom';\nimport { useBaseUrl } from '../../../../contexts/BaseUrlContext';\nimport Collapse from '@material-ui/core/Collapse';\nimport { Stat, subtabs } from '../CaptureManagerPage';\nimport { useBatchLearn } from './useBatchLearn';\n\nconst { JsonHelper } = opticEngine.com.useoptic;\nconst jsonHelper = JsonHelper();\n\nconst useStyles = makeStyles((theme) => ({\n  appBar: {\n    position: 'relative',\n  },\n  title: {\n    marginLeft: theme.spacing(2),\n    flex: 1,\n  },\n  container: {\n    marginTop: '20%',\n  },\n  paper: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 14,\n  },\n}));\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport default function InProgressFullScreen({ type }) {\n  const isManual = type === 'manual';\n  const { currentPathExpressions, reset } = useContext(LearnAPIPageContext);\n\n  const history = useHistory();\n  const {\n    endpointDiffs,\n    captureService,\n    diffService,\n    captureId,\n    additionalCommands,\n    updatedAdditionalCommands,\n  } = useCaptureContext();\n  const { eventStore, rfcId, clientSessionId, clientId } = useContext(\n    RfcContext\n  );\n  const { specService } = useServices();\n  const classes = useStyles();\n  const baseUrl = useBaseUrl();\n\n  const [endpointIds, setEndpointIds] = useState(undefined);\n  const [stats, setStats] = useState(undefined);\n  const [progressTicker, setProgressTicker] = useState(0);\n  const [done, setDone] = useState(0);\n\n  //Runs First\n  useEffect(() => {\n    //build the paths\n    const { commands, endpointIds } = LearnPaths(\n      eventStore,\n      rfcId,\n      currentPathExpressions\n    );\n    setEndpointIds(endpointIds);\n    setProgressTicker(0);\n    updatedAdditionalCommands(commands);\n  }, [currentPathExpressions.length]);\n\n  useBatchLearn(\n    // this will work through each sample and wait for component to update progress before proceeding to next item of the batch\n    additionalCommands,\n    isManual,\n    eventStore,\n    rfcId,\n    endpointIds,\n    diffService,\n    setProgressTicker,\n    async (commands) => {\n      if (isManual) {\n        const learnManual = async () => {\n          const batchCommands = [...additionalCommands];\n\n          const commandsAsVector = jsonHelper.jsArrayToVector(batchCommands);\n\n          const newEventStore = eventStore.getCopy(rfcId);\n          const {\n            StartBatchCommit,\n            EndBatchCommit,\n          } = opticEngine.com.useoptic.contexts.rfc.Commands;\n          const batchId = uuidv4();\n          const commandContext = new RfcCommandContext(\n            clientId,\n            clientSessionId,\n            batchId\n          );\n\n          Facade.fromCommands(\n            newEventStore,\n            rfcId,\n            commandsAsVector,\n            commandContext\n          );\n\n          setStats({\n            fields: 0,\n            requests: 0,\n            responses: 0,\n            oasLineCount: 0,\n          });\n          updatedAdditionalCommands([]); // clear these\n          await specService.saveEvents(newEventStore, rfcId);\n          setDone(true);\n        };\n        learnManual();\n      } else {\n        const newEventStore = eventStore.getCopy(rfcId);\n        const {\n          StartBatchCommit,\n          EndBatchCommit,\n        } = opticEngine.com.useoptic.contexts.rfc.Commands;\n        const batchId = uuidv4();\n        const commandContext = new RfcCommandContext(\n          clientId,\n          clientSessionId,\n          batchId\n        );\n\n        const pathAddCommands = additionalCommands;\n        const batchCommands = [...pathAddCommands, ...commands];\n\n        const commandsAsVector = jsonHelper.jsArrayToVector(batchCommands);\n\n        const asJs = opticEngine.CommandSerialization.toJs(commandsAsVector);\n\n        Facade.fromCommands(\n          newEventStore,\n          rfcId,\n          commandsAsVector,\n          commandContext\n        );\n\n        updatedAdditionalCommands([]); // clear these\n        setStats({\n          fields: 0,\n          requests: 0,\n          responses: 0,\n          oasLineCount: 0,\n        });\n        await specService.saveEvents(newEventStore, rfcId);\n        setDone(true);\n      }\n    }\n  );\n\n  const Step = ({ title, done, started }) => {\n    if (!started) {\n      return null;\n    }\n    return (\n      <ListItem dense>\n        <ListItemText\n          primary={title}\n          primaryTypographyProps={{\n            style: {\n              color: Dark,\n              fontWeight: 100,\n            },\n          }}\n        />\n        <ListItemSecondaryAction>\n          {done ? (\n            <DoneIcon style={{ color: AddedGreen, height: 15, marginTop: 7 }} />\n          ) : (\n            <div style={{ marginLeft: -16 }}>\n              <CircularProgress size={10} color=\"secondary\" />\n            </div>\n          )}\n        </ListItemSecondaryAction>\n      </ListItem>\n    );\n  };\n\n  return (\n    <Dialog fullScreen open={true} TransitionComponent={Transition}>\n      <Container maxWidth=\"sm\" className={classes.container}>\n        <Paper className={classes.paper} elevation={4}>\n          <PulsingOpticHuge />\n          <Typography color=\"primary\" variant=\"h5\" style={{ marginTop: 8 }}>\n            {done ? (\n              <>\n                Documented {currentPathExpressions.length} endpoint\n                {currentPathExpressions.length !== 1 && 's'}\n              </>\n            ) : (\n              <>\n                Learning {currentPathExpressions.length} endpoint\n                {currentPathExpressions.length !== 1 && 's'}...\n              </>\n            )}\n          </Typography>\n          {!done && (\n            <Typography\n              variant=\"caption\"\n              style={{\n                fontSize: 11,\n                color: DocDarkGrey,\n                textTransform: 'uppercase',\n              }}\n            >\n              This may take a minute\n            </Typography>\n          )}\n\n          <List dense>\n            <Collapse in={!done}>\n              <div>\n                <Step\n                  title={'Adding paths to spec...'}\n                  started={true}\n                  done={Boolean(endpointIds)}\n                />\n\n                {Boolean(endpointIds) ? (\n                  <>\n                    <ListItem dense>\n                      <ListItemText\n                        primary={`Learning Endpoints (${progressTicker}/${currentPathExpressions.length})...`}\n                        primaryTypographyProps={{\n                          style: {\n                            color: Dark,\n                            fontWeight: 100,\n                          },\n                        }}\n                      />\n                    </ListItem>\n                    <LinearProgress\n                      variant=\"determinate\"\n                      value={\n                        (progressTicker / currentPathExpressions.length) * 100\n                      }\n                      style={{ marginTop: 5 }}\n                    />\n                  </>\n                ) : null}\n              </div>\n            </Collapse>\n            <Collapse in={done}>\n              <div style={{ textAlign: 'center', marginTop: 19 }}>\n                {/*{stats && !isManual ? (*/}\n                {/*  <Typography variant=\"body1\" color=\"primary\">*/}\n                {/*    <Typography variant=\"h6\" color=\"textPrimary\">*/}\n                {/*      That's <Stat number={stats.oasLineCount} label=\"line\" />{' '}*/}\n                {/*      of OpenAPI that Optic will continue to keep up-to-date for*/}\n                {/*      your team!*/}\n                {/*    </Typography>*/}\n\n                {/*    <div*/}\n                {/*      style={{*/}\n                {/*        display: 'flex',*/}\n                {/*        margin: '0 auto',*/}\n                {/*        justifyContent: 'space-around',*/}\n                {/*        maxWidth: 320,*/}\n                {/*      }}*/}\n                {/*    >*/}\n                {/*      <StatMini number={stats.requests} label=\"new request\" />*/}\n                {/*      <StatMini number={stats.responses} label=\"new response\" />*/}\n                {/*      <StatMini number={stats.fields} label=\"new field\" />*/}\n                {/*    </div>*/}\n                {/*    <div></div>*/}\n                {/*    <div></div>*/}\n                {/*  </Typography>*/}\n                {/*) : null}*/}\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  size=\"small\"\n                  style={{ marginTop: 30 }}\n                  onClick={() => {\n                    if (isManual) {\n                      reset();\n                      history.push(\n                        `${baseUrl}/diffs/${captureId}?tab=${subtabs.ENDPOINT_DIFF}`\n                      );\n                    } else {\n                      history.push(`${baseUrl}/documentation`);\n                    }\n                  }}\n                >\n                  {isManual ? 'Document Bodies' : 'Review Documentation'}\n                </Button>\n              </div>\n            </Collapse>\n          </List>\n        </Paper>\n      </Container>\n    </Dialog>\n  );\n}\n\nconst PulsingOpticHuge = () => (\n  <div className={'blobBig'} style={{ marginRight: 9 }}>\n    <img src=\"/optic-logo.svg\" width={72} height={72} />\n  </div>\n);\n\nconst StatMini = ({ number, label }) => {\n  return (\n    <span>\n      {number !== 0 && (\n        <Typography\n          variant=\"caption\"\n          component=\"span\"\n          color=\"secondary\"\n          style={{ fontWeight: 800 }}\n        >\n          {number}{' '}\n        </Typography>\n      )}\n      <Typography\n        variant=\"caption\"\n        component=\"span\"\n        style={{ fontWeight: 800 }}\n        color=\"primary\"\n      >\n        {number === 0 && 'no '}\n        {label}\n        {number === 1 ? '' : 's'}\n      </Typography>\n    </span>\n  );\n};\n","import React, { useContext, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useCaptureContext } from '../../../../contexts/CaptureContext';\nimport { useBaseUrl } from '../../../../contexts/BaseUrlContext';\nimport { getOrUndefined, JsonHelper } from '@useoptic/domain';\nimport { DiffLoadingOverview } from '../LoadingNextDiff';\nimport { NewUrlModal } from '../AddUrlModal';\nimport classNames from 'classnames';\nimport { Show } from '../../../shared/Show';\nimport isEqual from 'lodash.isequal';\nimport RemoveCircleIcon from '@material-ui/icons/RemoveCircle';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport { DocDarkGrey, DocGrey } from '../../../docs/DocConstants';\nimport List from '@material-ui/core/List';\nimport { PathNameFromId } from '../../../../contexts/EndpointContext';\nimport ListItem from '@material-ui/core/ListItem';\nimport { MethodRenderLarge, PathAndMethod } from '../PathAndMethod';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport Chip from '@material-ui/core/Chip';\nimport { lighten, makeStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TablePagination from '@material-ui/core/TablePagination';\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { AddedGreenBackground, secondary } from '../../../../theme';\nimport { useCaptureManagerPageStyles } from '../CaptureManagerPage';\nimport TableRow from '@material-ui/core/TableRow';\nimport Fade from '@material-ui/core/Fade';\nimport PathMatcher from '../../PathMatcher';\nimport { LearnAPIPageContext, LearnAPIStore } from './LearnAPIPageContext';\nimport Button from '@material-ui/core/Button';\nimport LearnAPIMenu from './LearnAPIMenu';\nimport TextField from '@material-ui/core/TextField';\nimport IconButton from '@material-ui/core/IconButton';\nimport { LightTooltip } from '../../../tooltips/LightTooltip';\nimport { Icon } from '@material-ui/core';\nimport InProgressFullScreen from './InProgressFullScreen';\n\nexport function LearnAPIPage(props) {\n  const { captureId, urlsSplit } = props;\n  //normalize in anticipation of wasm\n  const undocumented = JsonHelper.seqToJsArray(urlsSplit.undocumented);\n  const allUnmatchedPaths = JsonHelper.seqToJsArray(urlsSplit.allPaths);\n  const urls = JsonHelper.seqToJsArray(urlsSplit.urls).map((i) => ({\n    method: i.method,\n    pathId: getOrUndefined(i.pathId),\n    path: i.path,\n    count: i.count,\n    id: rowId(i),\n  }));\n\n  return <LearnAPIPageInner {...{ undocumented, allUnmatchedPaths, urls }} />;\n}\n\nfunction LearnAPIPageInner(props) {\n  const { undocumented, allUnmatchedPaths, urls } = props;\n  const { completed } = useCaptureContext();\n  const classes = useCaptureManagerPageStyles();\n  const history = useHistory();\n\n  const baseUrl = useBaseUrl();\n\n  return (\n    <LearnAPIStore allUrls={urls} key=\"learning-store\">\n      <EnhancedTable urls={urls} key=\"url-table\" />\n      {urls.length === 0 && undocumented.length === 0 && !completed && (\n        <DiffLoadingOverview show={true} />\n      )}\n    </LearnAPIStore>\n  );\n}\n\nconst Stat = ({ number, label }) => {\n  return (\n    <span>\n      {number !== 0 && (\n        <Typography\n          variant=\"h6\"\n          component=\"span\"\n          color=\"secondary\"\n          style={{ fontWeight: 800 }}\n        >\n          {number}{' '}\n        </Typography>\n      )}\n      <Typography variant=\"h6\" component=\"span\" style={{ fontWeight: 800 }}>\n        {number === 0 && 'no '}\n        {label}\n        {number === 1 ? '' : 's'}\n      </Typography>\n    </span>\n  );\n};\n\nfunction descendingComparator(a, b, orderBy) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n  return 0;\n}\n\nfunction getComparator(order, orderBy) {\n  return order === 'desc'\n    ? (a, b) => descendingComparator(a, b, orderBy)\n    : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\nfunction stableSort(array, comparator) {\n  const stabilizedThis = array.map((el, index) => [el, index]);\n  stabilizedThis.sort((a, b) => {\n    const order = comparator(a[0], b[0]);\n    if (order !== 0) return order;\n    return a[1] - b[1];\n  });\n  return stabilizedThis.map((el) => el[0]);\n}\n\nconst headCells = [\n  {\n    id: 'method',\n    width: 50,\n    padding: 'default',\n    label: 'Method',\n    style: {\n      paddingRight: 0,\n    },\n  },\n  { id: 'path', padding: 'none', label: 'Path' },\n  {\n    id: 'document',\n    padding: 'none',\n    label: 'Document',\n    align: 'right',\n    style: {\n      paddingRight: 32,\n    },\n  },\n];\n\nfunction EnhancedTableHead(props) {\n  const {\n    classes,\n    order,\n    orderBy,\n    numSelected,\n    rowCount,\n    onRequestSort,\n  } = props;\n  const createSortHandler = (property) => (event) => {\n    onRequestSort(event, property);\n  };\n\n  return (\n    <TableHead>\n      <TableRow>\n        {headCells.map((headCell) => (\n          <TableCell\n            width={headCell.width}\n            key={headCell.id}\n            align={headCell.align}\n            padding={headCell.padding}\n            sortDirection={orderBy === headCell.id ? order : false}\n            style={{ ...headCell.style, paddingTop: 6, paddingBottom: 6 }}\n          >\n            <TableSortLabel\n              active={orderBy === headCell.id}\n              direction={orderBy === headCell.id ? order : 'asc'}\n              onClick={createSortHandler(headCell.id)}\n              style={{\n                color: DocDarkGrey,\n                fontSize: 9,\n                textTransform: 'uppercase',\n              }}\n            >\n              {headCell.label}\n              {orderBy === headCell.id ? (\n                <span className={classes.visuallyHidden}>\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\n                </span>\n              ) : null}\n            </TableSortLabel>\n          </TableCell>\n        ))}\n      </TableRow>\n    </TableHead>\n  );\n}\n\nconst EnhancedTableToolbar = (props) => {\n  const classes = useToolbarStyles();\n  const { numSelected } = props;\n\n  return (\n    <Toolbar\n      className={classNames(classes.root, {\n        [classes.highlight]: numSelected > 0,\n      })}\n    >\n      {numSelected > 0 ? (\n        <div\n          style={{\n            display: 'flex',\n            flexDirection: 'row',\n            width: '100%',\n            alignItems: 'center',\n          }}\n        >\n          <Typography\n            className={classes.title}\n            color=\"inherit\"\n            variant=\"body1\"\n            component=\"div\"\n          >\n            {numSelected} endpoints to document\n          </Typography>\n          <div style={{ flex: 1 }} />\n          <div style={{ width: 200, display: 'flex' }}>\n            <LearnAPIMenu />\n          </div>\n        </div>\n      ) : (\n        <Typography\n          className={classes.title}\n          variant=\"body1\"\n          id=\"tableTitle\"\n          component=\"div\"\n        >\n          Add Endpoints to Specification\n        </Typography>\n      )}\n    </Toolbar>\n  );\n};\n\nexport default function EnhancedTable(props) {\n  const classes = useStyles();\n  const {\n    checkedIds,\n    toDocument,\n    learningInProgress,\n    shouldHideIds,\n    highlightAlsoMatching,\n    updatePathExpression,\n    addRow,\n    setIgnore,\n    pathExpressions,\n    toggleRow,\n  } = useContext(LearnAPIPageContext);\n  const { urls } = props;\n  const [order, setOrder] = React.useState('asc');\n  const [orderBy, setOrderBy] = React.useState('calories');\n  const [page, setPage] = React.useState(0);\n  const [dense, setDense] = React.useState(false);\n  const [rowsPerPage, setRowsPerPage] = React.useState(50);\n\n  const handleRequestSort = (event, property) => {\n    const isAsc = orderBy === property && order === 'asc';\n    setOrder(isAsc ? 'desc' : 'asc');\n    setOrderBy(property);\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  const isSelected = (row) => checkedIds.indexOf(row.id) !== -1;\n\n  const filteredUrls = urls.filter((url) => !shouldHideIds.includes(url.id));\n\n  return (\n    <div className={classes.root}>\n      {learningInProgress && <InProgressFullScreen type={learningInProgress} />}\n      <Paper className={classes.paper}>\n        <EnhancedTableToolbar numSelected={checkedIds.length} />\n        <FilterAction\n          handleChangePage={handleChangePage}\n          paginator={\n            <TablePagination\n              rowsPerPageOptions={[25, 50, 100, 200]}\n              count={filteredUrls.length}\n              rowsPerPage={rowsPerPage}\n              page={page}\n              component=\"div\"\n              onChangePage={handleChangePage}\n              onChangeRowsPerPage={handleChangeRowsPerPage}\n            />\n          }\n        />\n        <TableContainer>\n          <Table\n            className={classes.table}\n            stickyHeader\n            aria-labelledby=\"tableTitle\"\n            size={dense ? 'small' : 'medium'}\n            aria-label=\"enhanced table\"\n          >\n            <EnhancedTableHead\n              classes={classes}\n              numSelected={checkedIds.length}\n              order={order}\n              orderBy={orderBy}\n              onRequestSort={handleRequestSort}\n              rowCount={filteredUrls.length}\n            />\n            <TableBody key=\"table-body\">\n              {stableSort(filteredUrls, getComparator(order, orderBy))\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                .map((row, index) => {\n                  const isItemSelected = isSelected(row);\n                  const alsoMatchesCurrent = highlightAlsoMatching.includes(\n                    row.id\n                  );\n\n                  return (\n                    <UndocumentedRowWrapper\n                      key={row.id}\n                      {...{\n                        isItemSelected,\n                        alsoMatchesCurrent,\n                        updatePathExpression,\n                        addRow,\n                        toDocument,\n                        pathExpressions,\n                        toggleRow,\n                        setIgnore,\n                        row,\n                      }}\n                    />\n                  );\n                })}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </Paper>\n    </div>\n  );\n}\n\nclass UndocumentedRowWrapper extends React.Component {\n  shouldComponentUpdate(nextProps, nextState, nextContext) {\n    if (\n      this.props.row.id !== nextProps.row.id ||\n      this.props.isItemSelected !== nextProps.isItemSelected ||\n      this.props.alsoMatchesCurrent !== nextProps.alsoMatchesCurrent\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  render() {\n    return <UndocumentedRow {...this.props} />;\n  }\n}\n\nfunction UndocumentedRow(props) {\n  const classes = useStyles();\n\n  const {\n    isItemSelected,\n    alsoMatchesCurrent,\n    row,\n    updatePathExpression,\n    addRow,\n    pathExpressions,\n    toggleRow,\n    toDocument,\n    setIgnore,\n  } = props;\n\n  const handleClick = (row) => {\n    toggleRow(row);\n  };\n\n  return (\n    <TableRow\n      hover\n      role=\"checkbox\"\n      tabIndex={-1}\n      key={rowId}\n      selected={isItemSelected || alsoMatchesCurrent}\n      classes={{\n        selected: alsoMatchesCurrent\n          ? classes.selectedRowMatches\n          : classes.selectedRow,\n      }}\n    >\n      <TableCell align=\"left\" style={{ verticalAlign: 'initial' }}>\n        <div style={{ marginTop: 2 }}>\n          <MethodRenderLarge method={row.method} />\n        </div>\n      </TableCell>\n      <TableCell align=\"left\">\n        <PathMatcher\n          initialPathString={row.path}\n          key={row.path + row.id}\n          url={row.path}\n          rowId={row.id}\n          onUserCompleted={() => {\n            addRow(row);\n          }}\n          onChange={(result) => {\n            updatePathExpression(row.id, result);\n          }}\n        />\n      </TableCell>\n      <TableCell padding=\"checkbox\" align=\"right\">\n        <div className={classes.innerCheck}>\n          <Fade in={alsoMatchesCurrent}>\n            <Typography\n              variant=\"overline\"\n              style={{\n                color: secondary,\n                fontSize: 10,\n                textAlign: 'right',\n                width: !alsoMatchesCurrent ? 0 : '100%',\n              }}\n            >\n              Matches!\n            </Typography>\n          </Fade>\n          <Fade in={!alsoMatchesCurrent}>\n            <Typography\n              variant=\"overline\"\n              style={{ color: DocDarkGrey, fontSize: 10 }}\n            >\n              {isItemSelected && !(pathExpressions[row.id] || {}).hasParameters\n                ? 'No Path Parameters'\n                : ''}\n            </Typography>\n          </Fade>\n          <Fade in={!alsoMatchesCurrent}>\n            <Checkbox\n              checked={isItemSelected}\n              onClick={(event) => handleClick(row)}\n              color=\"primary\"\n              style={{ marginLeft: 14 }}\n            />\n          </Fade>\n          <LightTooltip title=\"Mark as Ignored\">\n            <IconButton size=\"small\" onClick={() => setIgnore(row)}>\n              <RemoveCircleIcon\n                fontSizeAdjust=\"small\"\n                style={{ width: '.8rem', height: '.8rem' }}\n              />\n            </IconButton>\n          </LightTooltip>\n        </div>\n      </TableCell>\n    </TableRow>\n  );\n}\n\nfunction FilterAction({ paginator, handleChangePage }) {\n  const classes = useStyles();\n  const { setBasepath, basepath } = useContext(LearnAPIPageContext);\n  return (\n    <div>\n      <div className={classes.filter}>\n        <IconButton size=\"small\" disabled style={{ marginRight: 10 }}>\n          <FilterListIcon fontSize=\"10\" />\n        </IconButton>\n        <LightTooltip title=\"Basepath filter: Only show URLs that start with a certain path. ie /api\">\n          <TextField\n            inputProps={{\n              className: classes.filterInput,\n            }}\n            placeholder=\"filter basepath\"\n            value={basepath}\n            onFocus={(e) => {\n              e.target.value = '';\n              e.target.value = basepath;\n            }}\n            onChange={(e) => {\n              const newValue = e.target.value.replace(/\\s+/g, '');\n              handleChangePage(null, 0);\n              if (!newValue.startsWith('/')) {\n                setBasepath('/' + newValue);\n              } else {\n                setBasepath(newValue);\n              }\n            }}\n          />\n        </LightTooltip>\n        <div style={{ flex: 1 }} />\n        {paginator}\n      </div>\n    </div>\n  );\n}\n\nfunction rowId(row) {\n  return `${row.path + row.method + getOrUndefined(row.pathId) || 'new'}`;\n}\n\nconst useToolbarStyles = makeStyles((theme) => ({\n  root: {\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(1),\n  },\n  highlight:\n    theme.palette.type === 'light'\n      ? {\n          color: theme.palette.primary.main,\n          backgroundColor: lighten(theme.palette.primary.light, 0.85),\n        }\n      : {\n          color: theme.palette.text.primary,\n          backgroundColor: theme.palette.primary.dark,\n        },\n  title: {\n    flex: '1 1 100%',\n  },\n}));\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    paddingTop: 20,\n    height: '80%',\n  },\n  paper: {\n    width: '100%',\n    marginBottom: theme.spacing(2),\n  },\n  table: {\n    minWidth: 750,\n  },\n  visuallyHidden: {\n    border: 0,\n    clip: 'rect(0 0 0 0)',\n    height: 1,\n    margin: -1,\n    overflow: 'hidden',\n    padding: 0,\n    position: 'absolute',\n    top: 20,\n    width: 1,\n  },\n  selectedRow: {\n    backgroundColor: `${lighten(theme.palette.primary.light, 0.9)} !important`,\n  },\n  selectedRowMatches: {\n    backgroundColor: `${lighten(\n      theme.palette.secondary.light,\n      0.9\n    )} !important`,\n  },\n  innerCheck: {\n    display: 'flex',\n    minWidth: 250,\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    paddingRight: 15,\n  },\n  filter: {\n    paddingLeft: 12,\n    paddingRight: 12,\n    display: 'flex',\n    alignItems: 'center',\n    backgroundColor: 'rgb(250,250,250)',\n  },\n  filterInput: {\n    fontWeight: 100,\n    width: 270,\n  },\n}));\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport TopLevelRoutes from './entrypoints';\nimport * as serviceWorker from './serviceWorker';\n\nglobal.opticDebug = {};\n\nReactDOM.render(<App topLevelRoutes={TopLevelRoutes} />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import * as React from 'react';\nimport { useContext, useEffect, useState } from 'react';\nimport { useServices } from './SpecServiceContext';\nimport { RfcContext, withRfcContext } from './RfcContext';\nimport {\n  commandsToJson,\n  CompareEquality,\n  DiffResultHelper,\n  JsonHelper,\n  lengthScala,\n  ScalaJSHelpers,\n} from '@useoptic/domain';\nimport debounce from 'lodash.debounce';\nexport const CaptureContext = React.createContext(null);\n\nexport function useCaptureContext() {\n  return useContext(CaptureContext);\n}\n\nconst initialState = (debouncer = null) => {\n  return {\n    diffService: null,\n    captureService: null,\n    notificationChannel: null,\n    config: null,\n    additionalCommands: [],\n    lastUpdate: null,\n    pendingUpdates: false,\n    completed: false,\n    skipped: '0',\n    processed: '0',\n\n    reloadDebounce: debouncer,\n    unrecognizedUrls: [],\n    endpointDiffs: [],\n  };\n};\n\nclass _CaptureContextStore extends React.Component {\n  state = initialState();\n\n  componentDidMount = async () => {\n    this.setState(\n      {\n        reloadDebounce: debounce(this.reload, 1000, {\n          leading: true,\n          maxWait: 1500,\n        }),\n      },\n      async () => await this.startDiff()\n    );\n  };\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (\n      prevProps.rfcService &&\n      prevProps.rfcService.currentState(prevProps.rfcId).toString() !==\n        this.props.rfcService.currentState(prevProps.rfcId).toString()\n    ) {\n      this.startDiff();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.state.notificationChannel) {\n      this.state.notificationChannel.close();\n    }\n  }\n\n  reload = async (notifData) => {\n    const notifDataUpdates = (() => {\n      if (notifData && notifData.hasOwnProperty('hasMoreInteractions')) {\n        if (!notifData.hasMoreInteractions) {\n          console.log('completed diff');\n          if (this.state.notificationChannel) {\n            this.state.notificationChannel.close();\n          }\n          // track('Completed IAsyncTask', {\n          //   captureId: this.props.captureId,\n          // });\n        }\n        const stats = {\n          completed: !notifData.hasMoreInteractions,\n          skipped: notifData.skippedInteractionsCounter,\n          processed: notifData.diffedInteractionsCounter,\n        };\n\n        // track('IAsyncTask Progress', {\n        //   captureId: this.props.captureId,\n        //   ...stats,\n        // });\n\n        return stats;\n      } else {\n        return {};\n      }\n    })();\n\n    const { diffService } = this.state;\n\n    if (diffService) {\n      const [diffsResponse, urlsResponse] = await Promise.all([\n        diffService.listDiffs(),\n        diffService.listUnrecognizedUrls(),\n      ]);\n\n      console.log('results', [diffsResponse.diffs.length, urlsResponse.length]);\n\n      // track('IAsyncTask Incremental Results', {\n      //   captureId: this.props.captureId,\n      //   diffs: diffsResponse.diffs.length,\n      //   newUrls: urlsResponse.length,\n      // });\n      //\n      this.setState({\n        endpointDiffs: diffsResponse.diffs,\n        unrecognizedUrls: urlsResponse,\n        pendingUpdates: true,\n        lastUpdate: new Date(),\n        ...notifDataUpdates,\n      });\n    }\n  };\n\n  cleanupDiff = async () => {\n    if (this.state.notificationChannel) {\n      this.state.notificationChannel.close();\n    }\n    return await new Promise((resolve) => {\n      this.setState(\n        {\n          unrecognizedUrls: [],\n          endpointDiffs: [],\n          lastUpdate: null,\n          pendingUpdates: false,\n          config: null,\n          completed: false,\n          skipped: '0',\n          processed: '0',\n        },\n        resolve\n      );\n    });\n  };\n\n  startDiff = async () => {\n    const {\n      specService,\n      captureServiceFactory,\n      diffServiceFactory,\n      captureId,\n      eventStore,\n      rfcId,\n      rfcService,\n      method,\n      pathId,\n    } = this.props;\n\n    //clear diff\n    await this.cleanupDiff();\n\n    const captureService = await captureServiceFactory(specService, captureId);\n    //@TODO: handle error\n    const apiConfig = await specService.loadConfig();\n    const events = eventStore.listEvents(rfcId);\n\n    // track('Starting Diff', {\n    //   eventsLength: events.length,\n    //   additionalCommandsLength: this.state.additionalCommands.length,\n    //   captureId,\n    // });\n    const eventsAsArray = ScalaJSHelpers.eventsJsArray(events);\n\n    const config = await captureService.startDiff(\n      eventsAsArray,\n      apiConfig.config.ignoreRequests || [],\n      commandsToJson(this.state.additionalCommands), //commands serialize me\n      pathId && method ? [{ pathId, method }] : [] // partition diff when on an endpoint page\n    );\n\n    const rfcState = rfcService.currentState(rfcId);\n\n    const diffService = await diffServiceFactory(\n      specService,\n      captureService,\n      eventsAsArray,\n      rfcState,\n      this.state.additionalCommands,\n      config,\n      captureId\n    );\n\n    let notificationChannel = null;\n    let stats_SIMULATED = undefined;\n    if (config.notificationsUrl) {\n      notificationChannel = new EventSource(config.notificationsUrl);\n      notificationChannel.onmessage = (event) => {\n        const { type, data } = JSON.parse(event.data);\n        if (type === 'message') {\n          this.state.reloadDebounce(data);\n        } else if (type === 'error') {\n          console.error(data);\n          debugger;\n        }\n      };\n      notificationChannel.onerror = (e) => {\n        console.error(e);\n      };\n      notificationChannel.onopen = (e) => {\n        console.log(e);\n      };\n    } else {\n      const stats = await diffService.loadStats();\n      stats_SIMULATED = { hasMoreInteractions: false, ...stats };\n    }\n\n    this.setState(\n      {\n        config,\n        diffService,\n        captureService,\n        notificationChannel,\n        pendingUpdates: false,\n      },\n      () => this.reload(stats_SIMULATED)\n    );\n  };\n\n  updatedAdditionalCommands = (additionalCommands) => {\n    this.setState({ additionalCommands }, () => {\n      this.startDiff();\n    });\n  };\n\n  render = () => {\n    const {\n      pendingUpdates,\n      unrecognizedUrls,\n      endpointDiffs,\n      lastUpdate,\n      config,\n      diffService,\n      captureService,\n      completed,\n      skipped,\n      processed,\n    } = this.state;\n\n    const endpointDiffsWithoutIgnored = CompareEquality.filterIgnored(\n      endpointDiffs,\n      this.props.ignoredDiffs\n    );\n\n    const value = {\n      pendingUpdates,\n      captureId: this.props.captureId,\n      config,\n      lastUpdate,\n      endpointDiffs: endpointDiffsWithoutIgnored,\n      unrecognizedUrls,\n      diffService,\n      captureService,\n      completed,\n      skipped,\n      processed,\n      additionalCommands: this.state.additionalCommands,\n      updatedAdditionalCommands: this.updatedAdditionalCommands,\n    };\n\n    return (\n      <CaptureContext.Provider value={value}>\n        {this.props.children}\n      </CaptureContext.Provider>\n    );\n  };\n}\n\nexport const CaptureContextStore = withRfcContext(_CaptureContextStore);\n","\"use strict\";\n\nvar _classCallCheck = require(\"/home/runner/work/optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/home/runner/work/optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Client = void 0;\n\nvar client_utilities_1 = require(\"@useoptic/client-utilities\");\n\nvar Client = /*#__PURE__*/function () {\n  function Client(baseUrl) {\n    _classCallCheck(this, Client);\n\n    this.baseUrl = baseUrl;\n  }\n\n  _createClass(Client, [{\n    key: \"getIdentity\",\n    value: function getIdentity() {\n      var url = \"\".concat(this.baseUrl, \"/identity\");\n      return client_utilities_1.JsonHttpClient.getJsonWithoutHandlingResponse(url);\n    }\n  }, {\n    key: \"setIdentity\",\n    value: function setIdentity(user) {\n      if (user) {\n        var url = \"\".concat(this.baseUrl, \"/identity\");\n        return client_utilities_1.JsonHttpClient.putJson(url, {\n          user: user\n        });\n      }\n    }\n  }, {\n    key: \"postTrackingEvents\",\n    value: function postTrackingEvents(events) {\n      var url = \"\".concat(this.baseUrl, \"/tracking/events\");\n      return client_utilities_1.JsonHttpClient.postJson(url, {\n        events: events\n      });\n    }\n  }, {\n    key: \"findSession\",\n    value: function findSession(path, taskConfig, captureId) {\n      var url = \"\".concat(this.baseUrl, \"/sessions\");\n      return client_utilities_1.JsonHttpClient.postJson(url, {\n        path: path,\n        taskConfig: taskConfig,\n        captureId: captureId\n      });\n    }\n  }, {\n    key: \"markCaptureAsCompleted\",\n    value: function markCaptureAsCompleted(specId, captureId) {\n      var url = \"\".concat(this.baseUrl, \"/specs/\").concat(specId, \"/captures/\").concat(captureId, \"/status\");\n      return client_utilities_1.JsonHttpClient.putJson(url, {\n        status: 'completed'\n      });\n    }\n  }, {\n    key: \"stopDaemon\",\n    value: function stopDaemon() {\n      var url = \"\".concat(this.baseUrl, \"/commands\");\n      return client_utilities_1.JsonHttpClient.postJson(url, {\n        type: 'shutdown'\n      });\n    }\n  }]);\n\n  return Client;\n}();\n\nexports.Client = Client;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/home/runner/work/optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/home/runner/work/optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/home/runner/work/optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/home/runner/work/optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.JsonHttpClient = void 0;\n\nvar cross_fetch_1 = __importDefault(require(\"cross-fetch\"));\n\nvar JsonHttpClient = /*#__PURE__*/function () {\n  function JsonHttpClient() {\n    _classCallCheck(this, JsonHttpClient);\n  }\n\n  _createClass(JsonHttpClient, null, [{\n    key: \"verifyOkResponse\",\n    value: function () {\n      var _verifyOkResponse = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(response) {\n        var text;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return response.text();\n\n              case 2:\n                text = _context.sent;\n\n                if (response.ok) {\n                  _context.next = 5;\n                  break;\n                }\n\n                throw new Error(\"expected a successful response. got \".concat(response.status, \" \").concat(response.statusText, \" \\n\").concat(text));\n\n              case 5:\n                return _context.abrupt(\"return\", text);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function verifyOkResponse(_x) {\n        return _verifyOkResponse.apply(this, arguments);\n      }\n\n      return verifyOkResponse;\n    }()\n  }, {\n    key: \"handleJsonResponse\",\n    value: function () {\n      var _handleJsonResponse = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response) {\n        var json, text;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!response.ok) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                if (!(response.status === 204)) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 3:\n                _context2.next = 5;\n                return response.json();\n\n              case 5:\n                json = _context2.sent;\n                return _context2.abrupt(\"return\", json);\n\n              case 9:\n                _context2.next = 11;\n                return response.text();\n\n              case 11:\n                text = _context2.sent;\n                throw new Error(\"\".concat(response.status, \" \").concat(response.statusText, \" \\n\").concat(text));\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function handleJsonResponse(_x2) {\n        return _handleJsonResponse.apply(this, arguments);\n      }\n\n      return handleJsonResponse;\n    }()\n  }, {\n    key: \"getJson\",\n    value: function getJson(url) {\n      var additionalHeaders = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return cross_fetch_1.default(url, {\n        method: 'GET',\n        headers: Object.assign({\n          accept: 'application/json'\n        }, additionalHeaders)\n      }).then(JsonHttpClient.handleJsonResponse);\n    }\n  }, {\n    key: \"getJsonWithoutHandlingResponse\",\n    value: function getJsonWithoutHandlingResponse(url) {\n      return cross_fetch_1.default(url, {\n        method: 'GET',\n        headers: {\n          Accept: 'application/json'\n        }\n      });\n    }\n  }, {\n    key: \"postJsonString\",\n    value: function postJsonString(url, body) {\n      var additionalHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return cross_fetch_1.default(url, {\n        method: 'POST',\n        body: body,\n        headers: Object.assign({\n          accept: 'application/json',\n          'content-type': 'application/json'\n        }, additionalHeaders)\n      }).then(JsonHttpClient.handleJsonResponse);\n    }\n  }, {\n    key: \"postJson\",\n    value: function postJson(url, body) {\n      var additionalHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return JsonHttpClient.postJsonString(url, JSON.stringify(body), additionalHeaders);\n    }\n  }, {\n    key: \"patchJsonString\",\n    value: function patchJsonString(url, body) {\n      var additionalHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return cross_fetch_1.default(url, {\n        method: 'PATCH',\n        body: body,\n        headers: Object.assign({\n          accept: 'application/json',\n          'content-type': 'application/json'\n        }, additionalHeaders)\n      }).then(JsonHttpClient.handleJsonResponse);\n    }\n  }, {\n    key: \"patchJson\",\n    value: function patchJson(url, body) {\n      var additionalHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return JsonHttpClient.patchJsonString(url, JSON.stringify(body), additionalHeaders);\n    }\n  }, {\n    key: \"postJsonWithoutBody\",\n    value: function postJsonWithoutBody(url) {\n      var additionalHeaders = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return cross_fetch_1.default(url, {\n        method: 'POST',\n        headers: Object.assign({\n          accept: 'application/json'\n        }, additionalHeaders)\n      }).then(JsonHttpClient.handleJsonResponse);\n    }\n  }, {\n    key: \"getJsonAsText\",\n    value: function getJsonAsText(url) {\n      return cross_fetch_1.default(url, {\n        headers: {\n          accept: 'application/json'\n        }\n      }).then(JsonHttpClient.verifyOkResponse);\n    }\n  }, {\n    key: \"putJson\",\n    value: function putJson(url, body) {\n      var additionalHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return JsonHttpClient.putJsonString(url, JSON.stringify(body), additionalHeaders);\n    }\n  }, {\n    key: \"putJsonString\",\n    value: function putJsonString(url, body) {\n      var additionalHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return cross_fetch_1.default(url, {\n        method: 'PUT',\n        body: body,\n        headers: Object.assign({\n          accept: 'application/json',\n          'content-type': 'application/json'\n        }, additionalHeaders)\n      }).then(JsonHttpClient.handleJsonResponse);\n    }\n  }, {\n    key: \"putBytes\",\n    value: function putBytes(url, body) {\n      var additionalHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return cross_fetch_1.default(url, {\n        method: 'PUT',\n        body: body,\n        headers: Object.assign({\n          'content-length': body.length.toString()\n        }, additionalHeaders)\n      }).then(JsonHttpClient.verifyOkResponse);\n    }\n  }]);\n\n  return JsonHttpClient;\n}();\n\nexports.JsonHttpClient = JsonHttpClient;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/home/runner/work/optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/home/runner/work/optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/home/runner/work/optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/home/runner/work/optic/optic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Client = void 0;\n\nvar bottleneck_1 = __importDefault(require(\"bottleneck\"));\n\nvar client_utilities_1 = require(\"@useoptic/client-utilities\");\n\nvar outgoingPoll = new bottleneck_1.default({\n  maxConcurrent: 1,\n  minTime: 1000\n});\n\nvar Client = /*#__PURE__*/function () {\n  function Client(specId, eventEmitter) {\n    var baseUrl = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '/api';\n\n    _classCallCheck(this, Client);\n\n    this.specId = specId;\n    this.eventEmitter = eventEmitter;\n    this.baseUrl = baseUrl;\n  }\n\n  _createClass(Client, [{\n    key: \"addIgnoreRule\",\n    value: function addIgnoreRule(rule) {\n      return client_utilities_1.JsonHttpClient.patchJson(\"\".concat(this.baseUrl, \"/specs/\").concat(this.specId, \"/ignores\"), {\n        rule: rule\n      });\n    }\n  }, {\n    key: \"loadConfig\",\n    value: function () {\n      var _loadConfig = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return client_utilities_1.JsonHttpClient.getJson(\"\".concat(this.baseUrl, \"/specs/\").concat(this.specId, \"/config\"));\n\n              case 2:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function loadConfig() {\n        return _loadConfig.apply(this, arguments);\n      }\n\n      return loadConfig;\n    }()\n  }, {\n    key: \"saveConfig\",\n    value: function () {\n      var _saveConfig = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(config) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return client_utilities_1.JsonHttpClient.postJson(\"\".concat(this.baseUrl, \"/specs/\").concat(this.specId, \"/config/raw\"), {\n                  raw: config\n                });\n\n              case 2:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function saveConfig(_x) {\n        return _saveConfig.apply(this, arguments);\n      }\n\n      return saveConfig;\n    }()\n  }, {\n    key: \"listEvents\",\n    value: function listEvents() {\n      return client_utilities_1.JsonHttpClient.getJsonAsText(\"\".concat(this.baseUrl, \"/specs/\").concat(this.specId, \"/events\"));\n    }\n  }, {\n    key: \"listCaptures\",\n    value: function listCaptures() {\n      return client_utilities_1.JsonHttpClient.getJson(\"\".concat(this.baseUrl, \"/specs/\").concat(this.specId, \"/captures\"));\n    }\n  }, {\n    key: \"saveEvents\",\n    value: function saveEvents(eventStore, rfcId) {\n      var _this = this;\n\n      var serializedEvents = eventStore.serializeEvents(rfcId);\n      return client_utilities_1.JsonHttpClient.putJsonString(\"\".concat(this.baseUrl, \"/specs/\").concat(this.specId, \"/events\"), serializedEvents).then(function (x) {\n        _this.eventEmitter.emit('events-updated');\n\n        return x;\n      });\n    }\n  }, {\n    key: \"listCapturedSamples\",\n    value: function listCapturedSamples(captureId) {\n      var _this2 = this;\n\n      return outgoingPoll.schedule(function () {\n        return client_utilities_1.JsonHttpClient.getJson(\"\".concat(_this2.baseUrl, \"/specs/\").concat(_this2.specId, \"/captures/\").concat(captureId, \"/samples\")).then(function (body) {\n          return {\n            samples: body.samples,\n            metadata: body.metadata\n          };\n        });\n      });\n    }\n  }, {\n    key: \"getCaptureStatus\",\n    value: function getCaptureStatus(captureId) {\n      return client_utilities_1.JsonHttpClient.getJson(\"\".concat(this.baseUrl, \"/specs/\").concat(this.specId, \"/captures/\").concat(captureId, \"/status\"));\n    }\n  }, {\n    key: \"getTestingCredentials\",\n    value: function getTestingCredentials() {\n      return client_utilities_1.JsonHttpClient.getJsonWithoutHandlingResponse(\"\".concat(this.baseUrl, \"/specs/\").concat(this.specId, \"/testing-credentials\"));\n    }\n  }, {\n    key: \"getEnabledFeatures\",\n    value: function () {\n      var _getEnabledFeatures = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.getTestingCredentials();\n\n              case 2:\n                response = _context3.sent;\n                return _context3.abrupt(\"return\", {\n                  TESTING_DASHBOARD: response.status >= 200 && response.status <= 299\n                });\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getEnabledFeatures() {\n        return _getEnabledFeatures.apply(this, arguments);\n      }\n\n      return getEnabledFeatures;\n    }()\n  }]);\n\n  return Client;\n}();\n\nexports.Client = Client;","import React from 'react'\n\nexport const DepthContext = React.createContext({depth: 0});\n\nexport const Indent = ({children, add = 1, style}) => {\n  return (\n    <DepthContext.Consumer>\n      {({depth}) => (\n        <div style={{paddingLeft: (depth + add) * 13, ...style}}>\n          <DepthContext.Provider value={{depth: depth + add}}>\n            {children}\n          </DepthContext.Provider>\n        </div>\n      )}\n    </DepthContext.Consumer>\n  );\n};\n\nexport const IndentIncrement = ({children, add = 1}) => {\n  return (\n    <DepthContext.Consumer>\n      {({depth}) => (\n        <DepthContext.Provider value={{depth: depth + add}}>\n          {children}\n        </DepthContext.Provider>\n      )}\n    </DepthContext.Consumer>\n  );\n};\n","import * as React from 'react';\n\nexport function GenericContextFactory(defaultValue) {\n    const Context = React.createContext(defaultValue);\n\n    //@TODO: add optional key parameter e.g. function (Wrapper, propKey = null). If it is set, instead of spreading the context it will use that key for the prop name\n    const withContext = function (Wrapper) {\n        return function (props) {\n            return (\n                <Context.Consumer>\n                    {(context) => {\n                        return (\n                            <Wrapper {...props} {...context} />\n                        )\n                    }}\n                </Context.Consumer>\n            )\n        }\n    }\n\n    return {\n        Context,\n        withContext\n    }\n}","import React from 'react'\nimport {withStyles} from '@material-ui/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nexport const LightTooltip = withStyles(theme => ({\n  tooltip: {\n    backgroundColor: theme.palette.common.white,\n    color: 'rgba(0, 0, 0, 0.87)',\n    boxShadow: theme.shadows[1],\n    maxWidth: 600,\n    fontSize: 13,\n    padding: 8,\n  },\n}))(Tooltip);\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { methodColorsDark } from '../../docs/DocConstants';\nimport { LightTooltip } from '../../tooltips/LightTooltip';\n\nexport const PathAndMethod = ({ path, method }) => {\n  const methodRender = (\n    <Typography\n      variant=\"body1\"\n      component=\"span\"\n      style={{\n        fontWeight: 400,\n        color: '#ffffff',\n        padding: 4,\n        fontSize: 11,\n        borderRadius: 2,\n        marginTop: -3,\n        backgroundColor: methodColorsDark[method.toUpperCase()],\n      }}\n    >\n      {method.toUpperCase()}\n    </Typography>\n  );\n  const pathRender = (\n    <Typography\n      variant=\"subtitle1\"\n      component=\"span\"\n      style={{ fontSize: 12, marginLeft: 7 }}\n    >\n      {path}\n    </Typography>\n  );\n\n  return (\n    <span>\n      {' '}\n      {methodRender} {pathRender}{' '}\n    </span>\n  );\n};\n\nexport const PathAndMethodOverflowFriendly = ({ path, method }) => {\n  const methodRender = (\n    <Typography\n      variant=\"body1\"\n      component=\"div\"\n      style={{\n        fontWeight: 400,\n        color: '#ffffff',\n        fontSize: 9,\n        borderRadius: 2,\n        padding: 3,\n        paddingTop: 4,\n        backgroundColor: methodColorsDark[method.toUpperCase()],\n      }}\n    >\n      {method.toUpperCase()}\n    </Typography>\n  );\n  const pathRender = (\n    <Typography\n      variant=\"subtitle1\"\n      component=\"div\"\n      style={{\n        fontSize: 10,\n        marginLeft: 8,\n        maxWidth: 220,\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        wordBreak: 'break-all',\n        whiteSpace: 'nowrap',\n      }}\n    >\n      {path}\n    </Typography>\n  );\n\n  return (\n    <LightTooltip title={<PathAndMethod method={method} path={path} />}>\n      <div\n        style={{\n          display: 'flex',\n          flexDirection: 'row',\n          paddingLeft: 8,\n          paddingRight: 8,\n        }}\n      >\n        {' '}\n        {methodRender} {pathRender}{' '}\n      </div>\n    </LightTooltip>\n  );\n};\n\nexport const MethodRenderLarge = ({ method, style }) => {\n  return (\n    <Typography\n      variant=\"body1\"\n      component=\"span\"\n      style={{\n        fontWeight: 400,\n        color: '#ffffff',\n        padding: 4,\n        fontSize: 13,\n        borderRadius: 2,\n        marginTop: -4,\n        backgroundColor: methodColorsDark[method.toUpperCase()],\n        ...style,\n      }}\n    >\n      {method.toUpperCase()}\n    </Typography>\n  );\n};\n\nexport const PathAndMethodLarge = ({ path, method }) => {\n  const methodRender = (\n    <Typography\n      variant=\"body1\"\n      component=\"span\"\n      style={{\n        fontWeight: 400,\n        color: '#ffffff',\n        padding: 4,\n        fontSize: 15,\n        borderRadius: 2,\n        marginTop: -3,\n        backgroundColor: methodColorsDark[method.toUpperCase()],\n      }}\n    >\n      {method.toUpperCase()}\n    </Typography>\n  );\n  const pathRender = (\n    <Typography\n      variant=\"subtitle1\"\n      component=\"span\"\n      style={{ fontSize: 17, marginLeft: 7, fontWeight: 200 }}\n    >\n      {path}\n    </Typography>\n  );\n\n  return (\n    <span>\n      {' '}\n      {methodRender} {pathRender}{' '}\n    </span>\n  );\n};\n\nexport const SquareChip = ({ label, color, bgColor, style }) => {\n  return (\n    <Typography\n      variant=\"body1\"\n      component=\"span\"\n      style={{\n        fontWeight: 400,\n        color,\n        padding: 4,\n        fontSize: 8,\n        borderRadius: 2,\n        marginTop: -3,\n        backgroundColor: bgColor,\n        ...style,\n      }}\n    >\n      {label}\n    </Typography>\n  );\n};\n","import React, {useContext} from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport {AllCapturesContext} from './CaptureManagerPage';\nimport {useParams} from 'react-router-dom';\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport default function MoreRecentCapture(props) {\n  const {captures, dismissed, dismissCapture, switchToCapture} = useContext(AllCapturesContext);\n  const {captureId} = useParams();\n  const latestCaptureId = captures.length > 0 ? captures[0].captureId : null;\n  const hidden = latestCaptureId === null || (captureId === latestCaptureId) || dismissed.includes(latestCaptureId);\n\n  function handleReview() {\n    switchToCapture(latestCaptureId);\n  }\n\n  function handleDismiss() {\n    dismissCapture(latestCaptureId);\n  }\n\n  return (\n    <Dialog\n      open={!hidden}\n      TransitionComponent={Transition}\n      keepMounted\n      onClose={handleDismiss}\n      aria-labelledby=\"alert-dialog-slide-title\"\n      aria-describedby=\"alert-dialog-slide-description\"\n    >\n      <DialogTitle id=\"alert-dialog-slide-title\">New Capture</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-slide-description\">\n          Optic has observed a newer Capture than the one you are currently working on.\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleDismiss} color=\"primary\">\n          Dismiss\n        </Button>\n        <Button onClick={handleReview} color=\"primary\">\n          Review\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-noconflict/mode-json';\nimport 'ace-builds/src-noconflict/theme-github';\n\nconst styles = theme => ({\n  root: {},\n});\n\nfunction TypeModal({value, onChange}) {\n  return (\n    <AceEditor\n      mode=\"json\"\n      theme=\"github\"\n      tabSize={2}\n      showPrintMargin={false}\n      width={'90%'}\n      onChange={onChange}\n      value={value}\n      editorProps={{$blockScrolling: true}}\n    />\n  );\n}\n\nexport default withStyles(styles)(TypeModal);\n","import React, { useMemo, useState } from 'react';\nimport Drawer from '@material-ui/core/Drawer';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useRouterPaths } from '../../RouterPaths';\nimport { useEnabledFeatures } from '../../contexts/SpecServiceContext';\nimport { Link } from 'react-router-dom';\nimport IconButton from '@material-ui/core/IconButton';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport ChangeHistoryIcon from '@material-ui/icons/ChangeHistory';\nimport PolicyIcon from '@material-ui/icons/Policy';\nimport { LightTooltip } from '../tooltips/LightTooltip';\nimport { track } from '../../Analytics';\n\nconst drawerWidth = 270;\n\nconst useStyles = makeStyles({\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  miniDrawer: {\n    width: 55,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n    backgroundColor: '#1B2958',\n    display: 'flex',\n    flexDirection: 'row',\n  },\n  miniDrawerPaper: {\n    backgroundColor: '#1B2958',\n    display: 'flex',\n    flexDirection: 'row',\n  },\n  topLevel: {\n    width: 55,\n    // backgroundColor: '#2b3966',\n    overflow: 'hidden',\n    borderRight: '1px solid #3F5597',\n    display: 'flex',\n    alignItems: 'center',\n    flexDirection: 'column',\n  },\n  navButton: {\n    marginTop: 6,\n  },\n  opticLogo: {\n    marginTop: 5,\n  },\n  mainSection: {\n    flex: 1,\n  },\n});\n\nexport default function Navbar(props) {\n  const classes = useStyles();\n  const routerPaths = useRouterPaths();\n\n  const enabledFeatures = useEnabledFeatures();\n  \n  const menuItems = useMemo(\n    () => [\n      ...(!process.env.REACT_APP_DONT_SHOW_DIFF ? [{\n        name: 'Review Diff',\n        icon: <ChangeHistoryIcon style={{ color: '#e2e2e2' }} />,\n        link: routerPaths.diffsRoot,\n      }] : []),\n      {\n        name: 'Documentation',\n        icon: <DescriptionIcon style={{ color: '#e2e2e2' }} />,\n        link: routerPaths.docsRoot,\n      },\n      ...(enabledFeatures && enabledFeatures.TESTING_DASHBOARD\n        ? [\n            {\n              name: 'Live Contract Testing',\n              icon: <PolicyIcon style={{ color: '#e2e2e2' }} />,\n              link: routerPaths.testingDashboard,\n            },\n          ]\n        : []),\n    ],\n    [routerPaths]\n  );\n\n  return (\n    <Drawer\n      id=\"navbar\"\n      elevation={2}\n      className={props.mini ? classes.miniDrawer : classes.drawer}\n      variant={'permanent'}\n      classes={{\n        paper: props.mini ? classes.miniDrawerPaper : classes.drawerPaper,\n      }}\n      anchor=\"left\"\n    >\n      <div\n        className={classes.topLevel}\n        style={props.mini && { borderRight: 'none' }}\n      >\n        <img src=\"/optic-logo.svg\" width={50} className={classes.opticLogo} />\n        {menuItems.map((i) => (\n          <LightTooltip\n            key={i.link}\n            title={i.name}\n            component={Link}\n            to={i.link}\n            placement=\"right\"\n            onClick={() => {\n              // track(`Navigating to ${i.name}`, i)\n            }}\n          >\n            <IconButton className={classes.navButton}>{i.icon}</IconButton>\n          </LightTooltip>\n        ))}\n      </div>\n      {props.mini ? null : (\n        <div className={classes.mainSection}>{props.children}</div>\n      )}\n    </Drawer>\n  );\n}\n","import React, { useEffect, useContext, useState } from 'react';\nimport Navbar from './navigation/Navbar';\nimport { useLocation } from 'react-router-dom';\nimport classNames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst PageContext = React.createContext(null);\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexGrow: 1,\n  },\n  content: ({ padded = true }) => ({\n    display: 'flex',\n    flexDirection: 'column', // default to vertical stacking of child elements by default\n\n    flexGrow: 1,\n    paddingLeft: padded ? theme.spacing(4) : 0,\n    paddingRight: padded ? theme.spacing(4) : 0,\n  }),\n}));\n\nexport default function Page(props) {\n  const classes = useStyles();\n  const pageContext = useState([]);\n  usePageTitle(props.title, pageContext);\n\n  const [pageTitles] = pageContext;\n  const titles = pageTitles.filter((title) => !!title);\n  const title = titles[titles.length - 1] || '';\n\n  useEffect(() => {\n    if (!document || !title) return;\n    document.title = `${title} - Optic`;\n  }, [title]);\n\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    if (props.scrollToTop) {\n      window.scrollTo(0, 0);\n    }\n  }, [pathname]);\n\n  return (\n    <PageContext.Provider value={pageContext}>\n      <div className={classes.root}>{props.children}</div>\n    </PageContext.Provider>\n  );\n}\n\nfunction PageBody(props) {\n  const classes = useStyles(props);\n\n  return (\n    <div className={classNames(classes.content, props.className)}>\n      {props.children}\n    </div>\n  );\n}\n\nexport function usePageTitle(title, injectedContext) {\n  const context = useContext(PageContext) || injectedContext;\n\n  useEffect(() => {\n    if (!context) throw Error('usePageTitle must be used in context of a Page');\n    const [titles, setTitles] = context;\n    setTitles([...titles, title]);\n\n    return () => {\n      const index = titles.indexOf(title);\n      setTitles(titles.slice(index, 1));\n    };\n  }, [title]);\n\n  return title;\n}\n\n// require the use of sub components in context of the Page, to nudge the use of them\n// together (as that's the only way they really make sense)\nPage.Navbar = Navbar;\nPage.Body = PageBody;\n","import React, { useContext } from 'react';\n\nimport { GenericContextFactory } from './GenericContextFactory';\nimport {\n  createEndpointDescriptor,\n  getEndpointId,\n} from '../utilities/EndpointUtilities';\nimport { RfcContext, withRfcContext } from './RfcContext';\nimport { commandsForUpdatingContribution } from '../engine/routines';\nimport {\n  asPathTrail,\n  getNameWithFormattedParameters,\n} from '../components/utilities/PathUtilities';\n\nconst {\n  Context: EndpointsContext,\n  withContext: withEndpointsContext,\n} = GenericContextFactory(null);\n\nclass EndpointsContextStoreWithoutContext extends React.Component {\n  render() {\n    //usage defined props\n    const { pathId, method, notFound } = this.props;\n    const lookupExampleForRequest = (requestId) =>\n      this.props.lookupExampleForRequest(pathId, method, requestId);\n    const lookupExampleForResponse = (responseId) =>\n      this.props.lookupExampleForResponse(pathId, method, responseId);\n    //props from context\n    const { cachedQueryResults, queries, handleCommands } = this.props;\n    const { contributions } = cachedQueryResults;\n\n    const endpointId = getEndpointId({ pathId, method });\n    const endpointDescriptor = createEndpointDescriptor(\n      { pathId, method },\n      cachedQueryResults\n    );\n\n    if (endpointDescriptor) {\n      const context = {\n        endpointId,\n        endpointDescriptor,\n        getContribution: (id, key) => contributions.getOrUndefined(id, key),\n        lookupExampleForRequest,\n        lookupExampleForResponse,\n        updateContribution: (id, key, value) => {\n          handleCommands(...commandsForUpdatingContribution(id, key, value));\n        },\n      };\n\n      return (\n        <EndpointsContext.Provider value={context}>\n          {this.props.children}\n        </EndpointsContext.Provider>\n      );\n    } else {\n      return (\n        notFound || (\n          <div>\n            Endpoint Not Found {method} {pathId}\n          </div>\n        )\n      );\n    }\n  }\n}\n\nconst EndpointsContextStore = withRfcContext(\n  EndpointsContextStoreWithoutContext\n);\n\nexport { EndpointsContextStore, EndpointsContext, withEndpointsContext };\n\nexport function PathNameFromId({ pathId }) {\n  const { cachedQueryResults } = useContext(RfcContext);\n\n  const { pathsById } = cachedQueryResults;\n\n  if (!pathId) {\n    return null;\n  }\n\n  let pathParameters = [];\n\n  //try to resolve this path\n  const pathTrail = asPathTrail(pathId, pathsById);\n  const pathTrailComponents = pathTrail.map((pathId) => pathsById[pathId]);\n\n  const pathTrailWithNames = pathTrailComponents.map((pathComponent) => {\n    const pathComponentName = getNameWithFormattedParameters(pathComponent);\n    const pathComponentId = pathComponent.pathId;\n    return {\n      pathComponentName,\n      pathComponentId,\n    };\n  });\n\n  const fullPath = pathTrailWithNames\n    .map(({ pathComponentName }) => pathComponentName)\n    .join('/');\n\n  return <>{fullPath || '/'}</>;\n}\n","import React from 'react';\nimport { GenericContextFactory } from '../../../contexts/GenericContextFactory';\nimport { withRequestTabsContext } from '../../docs/ContentTabs';\n\nconst {\n  Context: DiffContext,\n  withContext: withDiffContext,\n} = GenericContextFactory();\n\nclass _DiffContextStore extends React.Component {\n  state = {\n    isFinishing: false,\n  };\n\n  render() {\n    const {\n      acceptSuggestion,\n      acceptedSuggestions,\n      diffsForThisEndpoint,\n      completed,\n    } = this.props;\n\n    // const setIsFinishing = (bool) => this.setState({isFinishing: bool});\n\n    const context = {\n      diffsForThisEndpoint,\n      completed,\n      isFinishing: this.state.isFinishing,\n\n      clearPreview: () => {\n        this.setState({\n          exampleInteractions: [],\n          isFinishing: false,\n        });\n      },\n      reset: () => {\n        this.props.reset();\n        this.setState({\n          exampleInteractions: [],\n          isFinishing: false,\n        });\n      },\n\n      acceptSuggestion,\n      acceptedSuggestions,\n    };\n\n    return (\n      <DiffContext.Provider value={context}>\n        {this.props.children}\n      </DiffContext.Provider>\n    );\n  }\n}\n\nconst DiffContextStore = withRequestTabsContext(_DiffContextStore);\n\nexport { DiffContext, withDiffContext, DiffContextStore };\n","export function isPathParameter(path) {\n  if (path.descriptor.ParameterizedPathComponentDescriptor) {\n    return true;\n  }\n  return false;\n}\n\nexport function asNormalizedAbsolutePath(pathTrailComponents) {\n  if (pathTrailComponents.length === 1) {\n    return '/';\n  }\n  return pathTrailComponents.map((pathTrailComponent) => getNormalizedName(pathTrailComponent)).join('/');\n}\n\nexport function asAbsolutePath(pathTrailComponents) {\n  if (pathTrailComponents.length === 1) {\n    return '/';\n  }\n  return pathTrailComponents.map((pathTrailComponent) => getNameWithFormattedParameters(pathTrailComponent)).join('/');\n}\n\nexport function getName(path) {\n  if (path.descriptor.ParameterizedPathComponentDescriptor) {\n    return path.descriptor.ParameterizedPathComponentDescriptor.name;\n  }\n  if (path.descriptor.BasicPathComponentDescriptor) {\n    return path.descriptor.BasicPathComponentDescriptor.name;\n  }\n  return null;\n}\n\nexport function getNameWithFormattedParameters(path) {\n  if (path.descriptor.ParameterizedPathComponentDescriptor) {\n    return `{${path.descriptor.ParameterizedPathComponentDescriptor.name}}`;\n  }\n  if (path.descriptor.BasicPathComponentDescriptor) {\n    return path.descriptor.BasicPathComponentDescriptor.name;\n  }\n  return null;\n}\n\nexport function getNormalizedName(path) {\n  if (path.descriptor.ParameterizedPathComponentDescriptor) {\n    return `{}`;\n  }\n  if (path.descriptor.BasicPathComponentDescriptor) {\n    return path.descriptor.BasicPathComponentDescriptor.name;\n  }\n  return null;\n}\n\nexport function getParentPathId(path) {\n  if (!path || !path.descriptor) {\n    return null;\n  }\n  if (path.descriptor.ParameterizedPathComponentDescriptor) {\n    return path.descriptor.ParameterizedPathComponentDescriptor.parentPathId;\n  }\n  if (path.descriptor.BasicPathComponentDescriptor) {\n    return path.descriptor.BasicPathComponentDescriptor.parentPathId;\n  }\n  return null;\n}\n\nexport function asPathTrail(pathId, pathsById) {\n  let lastPathId = pathId;\n  let pathTrail = [];\n  do {\n    pathTrail.push(lastPathId);\n    const lastPath = pathsById[lastPathId];\n    lastPathId = getParentPathId(lastPath);\n  } while (lastPathId);\n  return pathTrail.reverse();\n}\n\nexport function asPathTrailComponents(pathId, pathsById) {\n  return asPathTrail(pathId, pathsById).map(id => pathsById[id]);\n}\n\nexport function addAbsolutePath(pathId, pathsById) {\n  const basePath = pathsById[pathId];\n  const pathTrail = asPathTrail(pathId, pathsById);\n  const pathTrailComponents = pathTrail.map(x => pathsById[x]);\n  return {\n    ...basePath,\n    normalizedAbsolutePath: asNormalizedAbsolutePath(pathTrailComponents),\n    absolutePath: asAbsolutePath(pathTrailComponents)\n  };\n}\n\nexport function normalizePath(pathComponents) {\n  return '/' + pathComponents.map(x => x.isParameter ? '{}' : x.name).join('/');\n}\n\nexport function toAbsolutePath(pathComponents) {\n  return '/' + pathComponents.map(x => x.isParameter ? `{${x.name}}` : x.name).join('/');\n}\n\nfunction lastOrElse(array, defaultValue) {\n  const length = array.length;\n  return length === 0 ? defaultValue : array[length - 1];\n}\n\nconst rootPathComponent = [];\n\nexport function prefixes(pathComponents) {\n  return pathComponents\n    .reduce((acc, pathComponent) => {\n      return [\n        ...acc,\n        [...(lastOrElse(acc, [])), pathComponent]\n      ];\n    }, [rootPathComponent]);\n}\n\nexport function resolvePath(pathComponents, pathsById) {\n  const normalizedPathMap = Object.entries(pathsById)\n    .reduce((acc, [pathId, pathComponent]) => {\n      const normalizedAbsolutePath = asNormalizedAbsolutePath(asPathTrailComponents(pathId, pathsById));\n      acc[normalizedAbsolutePath] = pathComponent;\n      return acc;\n    }, {});\n  const pathPrefixes = prefixes(pathComponents).reverse();\n  // should be guaranteed to have a match of at least [] => '/' (root)\n  const lastMatchComponents = pathPrefixes\n    .find((pathComponentPrefix) => {\n      const normalized = normalizePath(pathComponentPrefix);\n      const match = normalizedPathMap[normalized];\n      return !!match;\n    });\n\n\n  const normalized = normalizePath(lastMatchComponents);\n  const lastMatch = normalizedPathMap[normalized];\n\n  const lengthDifference = pathComponents.length - lastMatchComponents.length;\n  const toAdd = lengthDifference <= 0 ? [] : pathComponents.slice(-1 * lengthDifference);\n  return {\n    lastMatch,\n    toAdd\n  };\n}\n","import React, { useContext, useEffect, useMemo, useState } from 'react';\n\nconst MockDataContext = React.createContext(null);\nMockDataContext.displayName = 'MockDataContext';\n\n// only expose the Provider component, but hide the Consumer in favour of hooks\nexport const { Provider } = MockDataContext;\n\nfunction createDebugSession({ exampleSessionCollection, sessionId }) {\n  let fetchedData = null;\n  async function getData(refresh = false) {\n    if (!fetchedData || refresh) {\n      // only fetch data once\n      fetchedData = fetch(`/${exampleSessionCollection}/${sessionId}.json`, {\n        headers: { accept: 'application/json' },\n      }).then((response) => {\n        if (response.ok) {\n          return response.json();\n        }\n\n        throw new Error();\n      });\n    }\n    return await fetchedData;\n  }\n\n  return {\n    sessionId,\n    getData,\n  };\n}\n\n\n// Hooks\n// -----\n\nexport function useMockSession({ sessionId, exampleSessionCollection }) {\n  const dashboardContext = useMemo(\n    () => createDebugSession({ sessionId, exampleSessionCollection }),\n    [sessionId]\n  );\n  return dashboardContext;\n}\n\nexport function useMockData(deps, context=MockDataContext) {\n  const debugSession = useContext(MockDataContext);\n  // TODO: consider using useReducer here instead, lots of moving bits of state here\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [available, setAvailable] = useState(true);\n\n  useEffect(() => {\n    if (!debugSession) {\n      setAvailable(false);\n      setData(null);\n      setLoading(false);\n    } else {\n      setAvailable(true);\n      debugSession\n        .getData()\n        .then((result) => {\n          setData(result);\n          setLoading(false);\n          return result;\n        })\n        .catch((err) => {\n          console.log(\"no data err\")\n          console.log(err)\n          setError(err);\n        });\n    }\n  }, deps);\n\n  return { available, data, loading, error };\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.JsonHttpClient = void 0;\n\nvar json_http_client_1 = require(\"./json-http-client\");\n\nObject.defineProperty(exports, \"JsonHttpClient\", {\n  enumerable: true,\n  get: function get() {\n    return json_http_client_1.JsonHttpClient;\n  }\n});","const docsBaseLink = 'https://www.useoptic.com/docs';\n\nexport const OpticDocs = docsBaseLink + '/';\nexport const AddOpticLink = docsBaseLink + '/getting-started/setup/';\nexport const DocumentingYourApi = docsBaseLink + '/building-the-documentation/';\n\nexport const Contact = (subject) =>\n  `mailto:aidan@useoptic.com?subject=${subject}`;\nexport const GithubIssues = 'https://github.com/opticdev/optic/issues';\n","import React from 'react';\n\nexport function Show({ when, children, style }) {\n  return (\n    <div style={{ display: !when && 'none', ...style }}>{when && children}</div>\n  );\n}\n\nexport function ShowSpan({ when, children, style }) {\n  return (\n    <span style={{ display: !when && 'none', ...style }}>\n      {when && children}\n    </span>\n  );\n}\n"],"sourceRoot":""}